(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{157:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAAuCAYAAADHhpC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdFQUNCNTE0N0VFQzExRTNCRDFDRjczREZDQ0IzMjA4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjdFQUNCNTE1N0VFQzExRTNCRDFDRjczREZDQ0IzMjA4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6N0VBQ0I1MTI3RUVDMTFFM0JEMUNGNzNERkNDQjMyMDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6N0VBQ0I1MTM3RUVDMTFFM0JEMUNGNzNERkNDQjMyMDgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6iQNIkAAAG9ElEQVR42uxdW4jjVBg+qbPqCK52XB1BFE1hQR8Up+si3h6k3ScVETMs4g0fGhkUwQenDyqigqk3hEU09Ul8mwoiuuowQRBEUQy46wVUtg/igvpgl0XEUXfjf3L+dJLTM8lJmzbp9vzwTbeZk5zbd/7bOZnVPM8jvGiaRqZGbK9Bf4au1ImpOUTJRGRupnpre2X4uQaoASjJTCBbV/VxeCmJLoJWOuKNJnpBh9fCgSX4uXoKLpOJ9rE0Yxq3lvBd9VERKFachO+qj2MgUFdLL0X1K1qhAXXw+6kmE+3jbDnRzJmsqz5mSCCtLXCiGwOe/aSHoQQDcVIFycWXovpAmpoaRaC0chrgBsBlM+jcKwKNKGcDDqDt/g3wn5qa6ZAiONGXANYBm4CrAE9yfpeD6IycUU2z7WF7VRLNoUTrtz0DftIyq4Kw2YGyrSHaF9QZPDsSDQPa/qepdTLp4+C9tC9lIk4+0jpdvl95E+hVwEpCmRrCmrBvVMU6A3H9ybP9LLtNtk/QsfbaHr13OXaytyZOx7qMmFJ6vz22V8lse4KRdjWhboK/N5CgtF9uniaMsvw7CfIUS9hgf0Xks7truKplnmnk1Ku1lHVTIm8g6XMh0IWA7wFXcNfbPrOZltGA4fRzAdDE1Z+3BJuU9LOH7ar47QwgbquF5i5uAsucqahzzw3GoTPmPnawngWufhNNaHgs7DxM2CLgcyRR2DSYQpKYGp2olo/4SZiEWLj6HFThPUF7g7bSwW1w93a28VfCG88teEYzZhwCjdUbC3G2M4um1oZ6O6gp9b6phrbIEEiHbqbJJNahOpHTdh3gLcClnGNYlxoQGV9ivKKjE1mXaKuJE13t30vJYg6kbXlHuSXx7Ky1cVNqbCmJba/FOei1SZgwqgIfALzLrTaCJqtHpkfMEcoaxexRqoXJl9XHTSBqql4DvAHYJfB53Ckij5Nq9bOyLhed8dKbCpJFTWnYzOkyJqwLircyRHU0o/w6YB9+/xKwN4bNxSfQcPdUIxFXlIQih7tXAHOdlCcaex7oNsALgN34/Xk0X3tHnJA8ZRht2RNEclHzYXtOSDuVMfQPEqftnEgS1ojVuOJZE+g8TEo9BJjHa08BngV8wTnPsyA9gSNOBH7gGmfigmSk3Q/fx3l2m0WDjSSyjJtANMp6DnATF74+DfC41TcrBEoiVOBX1HESrQEtxa5ZGEY3MyVS9AC+yGF2uRQFvedIeCGICLTz2D+kdO7p0s2gJe8HPAO4AK/9BXgC8PI295RnhDDlRAKFcy00sGBEMgSTGmwlLGfoI21wWoe1IUWwUBKQ4d6f//SPVsjIlYA3MTcQkOco4G4BeXoJqnwWCJSsPSiRWK6pguaLF+oj1TLQPrzJavr5q5R5Jp5ANwJWzkgO7ql/Q/ex3gfsD13/AW36O6JojhtYfcrJICO1yAJKY35oWWY2FgQBh5VBf2qRuZE/PVDejkA70Nn9Sd8Zex7nesKSgnQn/eLQ9UNIns8koxhjyghUTbnCde6e4aJO6iMxjdSNtIX5L1kRyJXsUzWOQPcArgV8s6Mk3Lq4GvAS4CAZPLR9EMlzOKZ63m43pswXMkYsP2rStD0SobPXqBEClcnW0YrKvyfZuZvNE4Ss/+Kbq1cA7wEeBZwTuv8E5nvuAvyYUHmXGwQ9I1U8KdHxjI/sSrU4/6+d8YRnGclWh+hThEC3AJbw33fe+hFZXPmUkH0fEHL7ur8d8QjgIu7eoxh9PQY4LtnQFudMNzCMlJkUuwAkWpU837M20G/R7j3tk8wpA2aujKH9qWSXQo/tl7hP/TD+LMAdZOu03xxonXB4LzoF+DFqo0MpG007bXKNoQPzB5KrE1lZLNoIM98sAIksbFc0U8wG2SCDx0E7MQ6qjlFVoJ0H99vYxA4e+xhd2iS6s26h39bqk5N9N0Lj7/IBECXKNRiOJ8oc6KsHLyfk8SVy8+I8+TqOKDH7Zx0kgs2pZyuiIif/LpqM9lwN+QI1Ca3oSpI+fFw1eeKHOW8tShcMhvIsIy1uQxf93A3ehNGD7LuS6luCEm/DsB2AGGxxPhP270npWOa9d+Zg8NCVJpyp7RGaLnFuTGra/VxNdlKXHFeXsFOSXZEJo77MpjBJpDHi7Addct9uYNmZmU6IiyQKzFRDkBtyyNZbDvkf/WBvN1TQrFQFkVbQ3nYCcYLnLSe8iUGliWVbY+hPsI0SZL4bAmvhxG3qanAzpcXD6AxTU3KMsDPL9ND7J+jv/J7DZOVLFvWXz6SEaqC/AS8CPgScD/gVtdJxNTxKEgmEf0iBek3f9tWSpl5NVyIn6h10JYpAShSBlCgCKVEEUqJEEUiJIpASRSAlsyGa6D9bUaJEVv4XYACpQVlQDED48wAAAABJRU5ErkJggg=="},349:function(e,t,a){e.exports=a(470)},420:function(e,t,a){},449:function(e,t){},453:function(e,t,a){},470:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(21),s=a.n(i),o=a(9),r=a(8),c=a(10),d=a(11),u=a(12),m=a(14),h=a(100),g=a(313),p="GET_ERRORS",f={},y=a(2),b=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length};function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _={isAuthenticated:!1,user:{}},S=Object(h.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return E({},e,{isAuthenticated:!b(t.payload),user:t.payload});default:return e}}}),C=Object(h.e)(S,{},Object(h.d)(Object(h.a)(g.a))),I=a(80),k=a.n(I),A=a(90),x=a.n(A),O=function(e){e?x.a.defaults.headers.common.Authorization=e:delete x.a.defaults.headers.common.Authorization},w=x.a.create({baseURL:"http://beeping.me/"}),R=a(57),j=a.n(R),D=a(145),q=a(13),N=a.n(q);a(23);function P(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var B=function(e,t){return function(t){w.post("menu-add",e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Menu is Added Successfully")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}},F=function(e){return{type:"SET_CURRENT_USER",payload:e}},V=a(3),L=a(541),U=a(547),M=a(542),T=a(543),W=a(73),Q=a(218),J=a(215),z=a(31),G=a(123),Y=a(17),K=a(540),H=a(211),X=a(157),Z=a.n(X),$=a(82),ee=a.n($),te=Object(G.a)(function(e){return{grow:{flexGrow:1,display:"flex"},menuButton:{marginRight:e.spacing(2)},title:Object(y.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Y.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Y.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(y.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(y.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),appBar:{zIndex:e.zIndex.drawer+1},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,nested:{paddingLeft:e.spacing(4)},icon:{color:"#FFFFFF"}}});function ae(){var e=te(),t=l.a.useState(null),a=Object(z.a)(t,2),n=a[0],i=(a[1],l.a.useState(null)),s=Object(z.a)(i,2),o=s[0],r=(s[1],l.a.useState(!1)),c=Object(z.a)(r,2),d=(c[0],c[1],l.a.useState(0)),u=Object(z.a)(d,2);u[0],u[1],Boolean(n),Boolean(o);return l.a.createElement("div",{className:e.grow},l.a.createElement(K.a,{position:"fixed",className:e.appBar},l.a.createElement(ee.a,null),l.a.createElement(H.a,null,"\xa0\xa0")))}var ne={BASE_URL:"http://beeping.me/"},le=a(212),ie=a(554),se=a(280),oe=a(315),re=a(180),ce=a.n(re),de=a(178),ue=a.n(de),me=a(179),he=a.n(me),ge=a(181),pe=a.n(ge),fe=a(74),ye=a(483),be=a(551),ve=a(486),Ee=a(556),_e=a(294),Se=a(557),Ce=a(184),Ie=a.n(Ce),ke=a(182),Ae=a.n(ke),xe=a(221),Oe=a.n(xe),we=a(86),Re=a.n(we),je=a(109),De=a.n(je),qe=a(110),Ne=a.n(qe),Pe=a(183),Be=a.n(Pe),Fe=a(139),Ve=a.n(Fe),Le=a(223),Ue=a.n(Le),Me=a(224),Te=a.n(Me),We=a(222),Qe=a.n(We),Je=a(320),ze=a.n(Je),Ge=a(225),Ye=a.n(Ge),Ke=a(307),He=a(263),Xe=a(562),Ze=a(545),$e=a(213),et=a(264),tt=a(265),at=a(266),nt=a(267),lt=a(268),it=a(546),st=a(24),ot=a.n(st);function rt(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var ct=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a.state={open:!1,open1:!1,companyName:"",email:"",contact:"",payment:"",getAllCompany:[],getCompanyPlans:[],getAllPlan:[],getVisiblePlan:[],getAllDiscount:[],options:[],primaryId:[],amount:0,discountedamount:0,discount:0,selectedPackage:"",packageDiscount:0,plan_duration:0,companyid:"",status:"",editIndex:-1,delIndex:-1,loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.selectSubId=a.selectSubId.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleErrors",value:function(e){if(!e.ok)throw Error(e.status);return e}},{key:"handleClick",value:function(e,t,a){this.setState({open:!0,companyid:e,editIndex:a}),console.log("Sub Details --- "+JSON.stringify(t));for(var n=0;n<t.length;n++)this.state.getVisiblePlan.push(t[n]._id);console.log("Visible --- "+JSON.stringify(this.state.getVisiblePlan)),this.fetchVisiblePlan(this.state.getVisiblePlan)}},{key:"fetchVisiblePlan",value:function(e){var t=this;console.log("All Plan --- "+e),fetch(ne.BASE_URL+"subwithoutid",{method:"post",headers:{"x-access-token":localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({sub_id:e})}).then(function(e){return e.json()}).then(function(e){console.log("Size --- "+JSON.stringify(e)),t.setState({getAllPlan:e.subscription}),console.log("ALL PLAN --- "+JSON.stringify(t.state.getAllPlan)),t.fetchAllDiscount()})}},{key:"handleClickDelete",value:function(e,t,a){this.setState({open1:!0,companyid:e,status:t,delIndex:a})}},{key:"fetchAllCompany",value:function(){var e=this;console.log("Calling --- Company "+ne.BASE_URL+"company"),this.setState({loading:!0},function(){fetch(ne.BASE_URL+"company",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(e.handleErrors).then(function(e){return e.json()}).then(function(t){console.log("Testing ... "+JSON.stringify(t.company[t.company.length-1].subscriptionDetail[0].planName)),e.setState({getAllCompany:t.company,getCompanyPlans:t.company.subscriptionDetail,loading:!1})}).catch(function(e){return console.log(e)})}),console.log("getAllCompany ---  "+JSON.stringify(this.state.getCompanyPlans)),console.log("Calling --- End ---  ")}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllCompany()}},{key:"fetchAllDiscount",value:function(){var e,t=this;fetch(ne.BASE_URL+"plan",(e={data:"name"},Object(y.a)(e,"data","discount"),Object(y.a)(e,"method","GET"),Object(y.a)(e,"headers",{"x-access-token":localStorage.getItem("token")}),e)).then(function(e){return e.json()}).then(function(e){console.log("Size ---Discount "+e.plans.length),t.setState({getAllDiscount:e.plans})}),console.log("Discount --- "+this.state.getAllDiscount)}},{key:"handleDelete",value:function(e){var t,a=this;e.preventDefault(),t="active"===this.state.status?"inactive":"active";var n={companyid:this.state.companyid,status:t};this.setState(function(e){return{getAllCompany:e.getAllCompany.filter(function(e,t){return t!==a.state.delIndex})}}),w.post("company-activate",n,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),e.data.value,rt(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose(),this.fetchAllCompany()}},{key:"selectPackId",value:function(e,t,a){this.state.selectedPackage=e,this.state.packageDiscount=t,console.log("Length --- "+this.state.selectedPackage.length),a.target.checked?"Quarterly"===this.state.selectedPackage?(this.setState({discountedamount:3*this.state.amount-parseInt(3*this.state.amount)*parseInt(t)/100}),this.setState({plan_duration:90})):"Yearly"===this.state.selectedPackage?(this.setState({discountedamount:12*this.state.amount-parseInt(12*this.state.amount)*parseInt(t)/100}),this.setState({plan_duration:365})):"Monthly"===this.state.selectedPackage?(this.setState({discountedamount:this.state.amount-parseInt(this.state.amount)*parseInt(t)/100}),this.setState({plan_duration:30})):"HalfYearly"===this.state.selectedPackage&&(this.setState({discountedamount:6*this.state.amount-parseInt(6*this.state.amount)*parseInt(t)/100}),this.setState({plan_duration:180})):this.setState({discountedamount:this.state.amount}),console.log("Selected value : "+this.state.options+" "+this.state.discountedamount)}},{key:"selectSubId",value:function(e,t,a,n){var l,i;n.target.checked?(this.state.options.push(+n.target.value),this.state.primaryId.push(a),console.log("Primary ID --- "+this.state.primaryId),this.state.amount=parseInt(this.state.amount)+parseInt(t)):(l=this.state.options.indexOf(+n.target.value),i=this.state.primaryId.indexOf(a),this.state.options.splice(l,1),this.state.primaryId.splice(i,1),this.state.amount=parseInt(this.state.amount)-parseInt(t)),this.setState({options:this.state.options}),this.setState({primaryId:this.state.primaryId}),console.log("Selected value : "+this.state.options+" "+this.state.amount),console.log("Selected Package Name : "+this.state.selectedPackage),"Quarterly"===this.state.selectedPackage?(this.state.discountedamount=3*this.state.amount-parseInt(3*this.state.amount)*parseInt(this.state.packageDiscount)/100,this.setState({plan_duration:90})):"Yearly"===this.state.selectedPackage?(this.state.discountedamount=12*this.state.amount-parseInt(12*this.state.amount)*parseInt(this.state.packageDiscount)/100,this.setState({plan_duration:365})):"Monthly"===this.state.selectedPackage?(this.state.discountedamount=this.state.amount-parseInt(this.state.amount)*parseInt(this.state.packageDiscount)/100,this.setState({plan_duration:30})):"HalfYearly"===this.state.selectedPackage&&(this.state.discountedamount=6*this.state.amount-parseInt(6*this.state.amount)*parseInt(this.state.packageDiscount)/100,this.setState({plan_duration:180})),console.log("this.state.discountedamount : "+this.state.discountedamount)}},{key:"handleSubmit",value:function(e){var t,a,n,l=this;e.preventDefault(),t=this.state.discountedamount.toFixed(),a=this.state.options,n=this.state.primaryId;var i={companyid:this.state.companyid,new_subscription:a,new_subscriptionDetail:n,totpay:t,plan_duration:this.state.plan_duration};console.log("Total Pay --- "+t),w.post("company-edit",i,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){rt("Module upgrade is successful.")}else rt(e.data.message);l.fetchAllCompany()}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state),a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={fontWeight:"bold",fontSize:"15px",color:"black"},o={fontSize:"12px"},r={marginTop:3};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Upgrade Plan"),l.a.createElement("form",null,l.a.createElement("div",null,this.state.getAllPlan&&this.state.getAllPlan.map(function(t,a){return l.a.createElement(He.a,{style:r,control:l.a.createElement(Ke.a,{value:t.subscriptionId,color:"primary",onChange:function(a){return e.selectSubId(t.subscriptionId,t.price,t._id,a)}}),label:t.planName+"(Monthly : \u20b9"+t.price+" )"})})),l.a.createElement("div",null,l.a.createElement($e.a,{component:"fieldset",style:r},l.a.createElement(Ze.a,{"aria-label":"plan",name:"plan",row:!0},this.state.getAllDiscount.map(function(t,a){return l.a.createElement(He.a,{control:l.a.createElement(Xe.a,{color:"primary",value:t.name,onChange:function(a){return e.selectPackId(t.name,t.discount,a)}}),label:t.name+" ( "+t.discount+"% Discount)"})})))),l.a.createElement("div",null,l.a.createElement(J.a,{style:{width:100,height:40,marginLeft:2,marginRight:2,marginTop:2,marginBottom:15},label:"Amount:",value:"\u20b9"+this.state.discountedamount,margin:"normal",InputProps:{readOnly:!0}})))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Upgrade"))),l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are you sure to change the status?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),this.state.getAllCompany.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},"Company name"),l.a.createElement(nt.a,{style:s},"Email"),l.a.createElement(nt.a,{style:s},"Contact"),l.a.createElement(nt.a,{style:s},"Modules"),l.a.createElement(nt.a,{style:s},"Payment( ","\u20b9"," )"),l.a.createElement(nt.a,{style:s},"Upgrade Module"),l.a.createElement(nt.a,{style:s},"Status"))),l.a.createElement(lt.a,null,this.state.getAllCompany&&this.state.getAllCompany.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},t.companyName),l.a.createElement(nt.a,{style:o},t.email),l.a.createElement(nt.a,{style:o},t.contact),l.a.createElement(nt.a,{style:o},e.state.getAllCompany[a].subscriptionDetail&&e.state.getAllCompany[a].subscriptionDetail.map(function(e,t){return l.a.createElement("p",null," ",e.planName," ")})),l.a.createElement(nt.a,{style:o},t.payment),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t._id,e.state.getAllCompany[a].subscriptionDetail,a)}})),l.a.createElement(nt.a,{style:o,onClick:function(n){return e.handleClickDelete(t._id,t.status,a)}},l.a.createElement("a",{href:"#"},t.status)))}))):"")}}]),t}(n.Component),dt=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{changeStatus:function(e,t){return function(t){w.post("company-activate",e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),e.data.value,P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(ct);function ut(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var mt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleClose=function(){e.setState({open:!1})},e.handleClick=function(){e.setState({open:!0})},e.reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({companyname:""}),e.setState({email:""}),e.setState({password:""}),e.setState({subscription:""}),e.setState({discountedamount:0})},e.state={open:!1,companyname:"",email:"",password:"",subscription:"",subscriptionDetail:"",getAllPlan:[],getAllDiscount:[],options:[],primaryId:[],amount:0,discountedamount:0,discount:0,selectedPackage:"",packageDiscount:0,showChild:!0,plan_duration:0},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e.selectSubId=e.selectSubId.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchAllPlans",value:function(){var e,t=this;fetch(ne.BASE_URL+"subscription",(e={data:"planName"},Object(y.a)(e,"data","price"),Object(y.a)(e,"data","subscriptionId"),Object(y.a)(e,"method","GET"),Object(y.a)(e,"headers",{"x-access-token":localStorage.getItem("token")}),e)).then(function(e){return e.json()}).then(function(e){console.log("Size --- "+JSON.stringify(e)),t.setState({getAllPlan:e.subscription})}),this.forceUpdate()}},{key:"fetchAllDiscount",value:function(){var e,t=this;fetch(ne.BASE_URL+"plan",(e={data:"name"},Object(y.a)(e,"data","discount"),Object(y.a)(e,"method","GET"),Object(y.a)(e,"headers",{"x-access-token":localStorage.getItem("token")}),e)).then(function(e){return e.json()}).then(function(e){console.log("Size ---Discount "+e.plans.length),t.setState({getAllDiscount:e.plans})}),console.log("Discount --- "+this.state.getAllDiscount),this.forceUpdate()}},{key:"componentDidMount",value:function(){this.fetchAllPlans(),this.fetchAllDiscount()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"checkEmail",value:function(e){var t=this,a={email:this.state.email};w.post("user-check",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value||(ut(e.data.message),t.setState({email:""}))}).catch(function(e){return console.log(e)})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""==this.state.companyname||""==this.state.email||""==this.state.password)ut("Please Fill required feilds");else if(""==this.state.options)ut("Please select options");else if(""==this.state.packageDiscount)ut("Please select plan");else{var a,n,l;a=this.state.discountedamount.toFixed(),n=this.state.options,l=this.state.primaryId;var i={companyname:this.state.companyname,email:this.state.email,password:this.state.password,subscription:n,subscriptionDetail:l,totpay:a,plan_duration:this.state.plan_duration};console.log("Total Pay --- "+a),w.post("company",i,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(t.resetField(),console.log(e.data.value),console.log(e.data.message),1==e.data.value){ut("Company registraion is successfull")}else ut(e.data.message);t.resetField(),t.reloadChild()}).catch(function(e){return console.log(e)})}}},{key:"selectPackId",value:function(e,t,a){this.state.selectedPackage=e,this.state.packageDiscount=t,console.log("Length --- "+this.state.selectedPackage.length),a.target.checked?"Quarterly"===this.state.selectedPackage?(this.setState({discountedamount:3*this.state.amount-parseInt(3*this.state.amount)*parseInt(t)/100}),this.setState({plan_duration:90})):"Yearly"===this.state.selectedPackage?(this.setState({discountedamount:12*this.state.amount-parseInt(12*this.state.amount)*parseInt(t)/100}),this.setState({plan_duration:365})):"Monthly"===this.state.selectedPackage?(this.setState({discountedamount:this.state.amount-parseInt(this.state.amount)*parseInt(t)/100}),this.setState({plan_duration:30})):"HalfYearly"===this.state.selectedPackage&&(this.setState({discountedamount:6*this.state.amount-parseInt(6*this.state.amount)*parseInt(t)/100}),this.setState({plan_duration:180})):this.setState({discountedamount:this.state.amount}),console.log("Selected value : "+this.state.options+" "+this.state.discountedamount)}},{key:"selectSubId",value:function(e,t,a,n){var l,i;n.target.checked?(this.state.options.push(+n.target.value),this.state.primaryId.push(a),console.log("Primary ID --- "+this.state.primaryId),this.state.amount=parseInt(this.state.amount)+parseInt(t)):(l=this.state.options.indexOf(+n.target.value),i=this.state.primaryId.indexOf(a),this.state.options.splice(l,1),this.state.primaryId.splice(i,1),this.state.amount=parseInt(this.state.amount)-parseInt(t)),this.setState({options:this.state.options}),this.setState({primaryId:this.state.primaryId}),console.log("Selected value : "+this.state.options+" "+this.state.amount),console.log("Selected Package Name : "+this.state.selectedPackage),"Quarterly"===this.state.selectedPackage?(this.state.discountedamount=3*this.state.amount-parseInt(3*this.state.amount)*parseInt(this.state.packageDiscount)/100,this.setState({plan_duration:90})):"Yearly"===this.state.selectedPackage?(this.state.discountedamount=12*this.state.amount-parseInt(12*this.state.amount)*parseInt(this.state.packageDiscount)/100,this.setState({plan_duration:365})):"Monthly"===this.state.selectedPackage?(this.state.discountedamount=this.state.amount-parseInt(this.state.amount)*parseInt(this.state.packageDiscount)/100,this.setState({plan_duration:30})):"HalfYearly"===this.state.selectedPackage&&(this.state.discountedamount=6*this.state.amount-parseInt(6*this.state.amount)*parseInt(this.state.packageDiscount)/100,this.setState({plan_duration:180})),console.log("this.state.discountedamount : "+this.state.discountedamount)}},{key:"render",value:function(){var e=this,t=this.state.open,a={marginTop:3},n={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2};return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(L.a,{open:t,onClose:this.handleClose},l.a.createElement(U.a,null,"Modal Pop-up"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"This is an example of modal pop-up"))),l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Company Registration"),l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,id:"companyname",label:"Name",name:"companyname",value:this.state.companyname,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,inputProps:{"padding-top":"0","padding-bottom":"0"},id:"email",type:"email",label:"Email Address",name:"email",value:this.state.email,onChange:function(t){return e.handleInputChangeValue(t)},onBlur:function(t){return e.checkEmail(t)}}),l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,name:"password",value:this.state.password,label:"Password",type:"password",id:"password",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null),l.a.createElement("div",{style:{border:"2px solid blue",display:"flex",flexWrap:"wrap",padding:"2px"}},this.state.getAllPlan.map(function(t,n){return l.a.createElement(He.a,{style:a,control:l.a.createElement(Ke.a,{value:t.subscriptionId,color:"primary",onChange:function(a){return e.selectSubId(t.subscriptionId,t.price,t._id,a)}}),label:t.planName+"(Monthly : \u20b9"+t.price+" )"})})),l.a.createElement("div",{style:{border:"2px solid blue",display:"flex",flexWrap:"wrap",padding:"2px",marginTop:"5px"}},l.a.createElement($e.a,{component:"fieldset",style:a},l.a.createElement(Ze.a,{"aria-label":"plan",name:"plan",row:!0},this.state.getAllDiscount.map(function(t,a){return l.a.createElement(He.a,{control:l.a.createElement(Xe.a,{color:"primary",value:t.name,onChange:function(a){return e.selectPackId(t.name,t.discount,a)}}),label:t.name+" ( "+t.discount+"% Discount)"})})))),l.a.createElement("div",null,l.a.createElement(J.a,{style:{width:100,height:40,marginLeft:2,marginRight:2,marginTop:2,marginBottom:15},label:"Amount:",value:"\u20b9"+this.state.discountedamount.toFixed(),margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement(Q.a,{style:a,type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),this.state.showChild?l.a.createElement(dt,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),ht=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{companyReg:function(e,t){return function(t){w.post("company",e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Company registraion is successfull")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(mt),gt=a(485),pt=l.a.forwardRef(function(e,t){return l.a.createElement(gt.a,Object.assign({direction:"up",ref:t},e))}),ft=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleClose=function(){e.state.open1=!1,e.forceUpdate()},e.resetField=function(){e.setState({email:""}),e.setState({password:""}),e.setState({oldpassword:""}),e.setState({confirmpassword:""})},e.state={email:"",password:"",oldpassword:"",confirmpassword:"",open1:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.password===this.state.confirmpassword){var t;t=localStorage.getItem("id");var a={email:this.state.email,oldpassword:this.state.oldpassword,password:this.state.password,superid:t};this.props.changePass(a,this.props.history),this.resetField()}else console.log("Testing --- "),this.state.open1=!0,this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.open,t.open1),n={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2};return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Change Password"),l.a.createElement("form",{className:"reg",noValidate:!0},l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,inputProps:{"padding-top":"0","padding-bottom":"0"},id:"email",type:"email",label:"Email Address",name:"email",value:this.state.email,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,name:"oldpassword",value:this.state.oldpassword,label:"Old Password",type:"password",id:"password",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,name:"password",value:this.state.password,label:"New Password",type:"password",id:"newpassword",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,name:"confirmpassword",value:this.state.confirmpassword,label:"Confirm Password",type:"password",id:"confirmpassword",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement(Q.a,{style:{marginTop:3},type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")),l.a.createElement(L.a,{open:a,TransitionComponent:pt,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},l.a.createElement(M.a,null,l.a.createElement(T.a,{id:"alert-dialog-slide-description"},"New Password and Confirm Password is not same.")),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"OK"))))}}]),t}(n.Component),yt=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{changePass:function(e,t){return function(t){w.post("superadmin/changepassword",e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Password is updated successfully")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(ft);function bt(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var vt=a(40),Et=a(25),_t=a.n(Et),St=[],Ct=null,It=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){n.setState({open:!1,open1:!1})},n.onChangeHandler=function(e){var t,a=e.target.files;t=e.target.files[0].name.slice(2+(e.target.files[0].name.lastIndexOf(".")-1>>>0)),n.setState({ext:t}),console.log("File Name : "+e.target.files[0].name+" "+t);var l=new FileReader;l.readAsDataURL(a[0]),l.onload=function(e){console.log("Files --- "+e.target.result.split(",").pop()),Ct={file:e.target.result.split(",").pop()}},n.setState({selectedFile:e.target.files[0],loaded:0})},n.state=(a={planName:"",price:"",duedate:"",subscriptions:[],getAllPlan:[],plans:[]},Object(y.a)(a,"price",[]),Object(y.a)(a,"delIndex",-1),Object(y.a)(a,"editIndex",-1),Object(y.a)(a,"filename",""),Object(y.a)(a,"selectedFile",null),Object(y.a)(a,"ext",""),a),n.handleSubmit=n.handleSubmit.bind(Object(V.a)(n)),n.handleDelete=n.handleDelete.bind(Object(V.a)(n)),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n,l){this.setState({open:!0,price:e,planName:t,subscriptionId:a,filename:n,editIndex:l})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,subscriptionid:e,delIndex:t})}},{key:"fetchAllPlans",value:function(){var e,t=this;console.log("Calling --- "),fetch(ne.BASE_URL+"subscription",(e={data:"planName"},Object(y.a)(e,"data","price"),Object(y.a)(e,"data","subscriptionId"),Object(y.a)(e,"method","GET"),Object(y.a)(e,"headers",{"x-access-token":localStorage.getItem("token")}),e)).then(function(e){return e.json()}).then(function(e){console.log("Size --- "+e.subscription.length),t.setState({getAllPlan:e.subscription});for(var a=0;a<e.subscription.length;a++)St.push(e.subscription[a].planName),t.setState({id:e.subscription[a].subscriptionId}),t.setState({price:e.subscription[a].price});console.log("array"+St),t.setState({plans:St}),console.log("Plan Names --- "+t.state.getAllPlan)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllPlans()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.planName)j()("Please fill all required feilds");else{console.log("hghd"+this.state.price);var t={planName:this.state.planName,price:this.state.price,subscriptionid:this.state.subscriptionId,file:Ct||this.state.filename,extension:this.state.ext};this.state.getAllPlan[this.state.editIndex].planName=this.state.planName,this.state.getAllPlan[this.state.editIndex].price=this.state.price,this.state.getAllPlan[this.state.editIndex].subscriptionid=this.state.subscriptionid,this.state.getAllPlan[this.state.editIndex].filename=this.state.filename,this.props.subscriptionApiEdit(t,this.props.history),this.handleClose()}}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var a={subscriptionid:this.state.subscriptionid};this.setState(function(e){return{getAllPlan:e.getAllPlan.filter(function(e,a){return a!==t.state.delIndex})}}),this.props.subscriptionApiDelete(a,this.props.history),this.handleClose()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={cursor:"pointer",color:"red"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"};return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are you sure to delete the subscription module?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Subscription"),l.a.createElement("form",{onSubmit:this.handleSubmit,encType:"multipart/form-data"},l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"companyname",label:"Name",name:"planName",value:this.state.planName,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"price",value:this.state.price,label:"Price",name:"price",fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement("div",{id:"2"},l.a.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler})))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Module name"),l.a.createElement(nt.a,{style:o},"Price( Monthly ","\u20b9"," )"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllPlan&&this.state.getAllPlan.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.planName),l.a.createElement(nt.a,{style:r},t.price),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t.price,t.planName,t._id,t.filename,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickDelete(t._id,a)}})))}))))}}]),t}(n.Component),kt=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{subscriptionApiEdit:function(e,t){return function(t){console.log(e),console.log(e.subscriptionid),w.put("subscription/"+e.subscriptionid,e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?bt("Module is edited successfully"):bt(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}},subscriptionApiDelete:function(e,t){return function(t){w.post("subscription/"+e.subscriptionid,e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?bt("Module is deleted successfully"):bt(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(It);a(396);function At(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var xt=null,Ot=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).onChangeHandler=function(e){var t,n=e.target.files;t=e.target.files[0].name.slice(2+(e.target.files[0].name.lastIndexOf(".")-1>>>0)),a.setState({ext:t}),console.log("File Name : "+e.target.files[0].name+" "+t);var l=new FileReader;l.readAsDataURL(n[0]),l.onload=function(e){console.log("Files --- "+e.target.result.split(",").pop()),xt={file:e.target.result.split(",").pop()}},a.setState({selectedFile:e.target.files[0],loaded:0})},a.reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({planName:""}),a.setState({price:""}),a.setState({duedate:new Date}),a.setState({file:new Date}),a.fileInput.value=""},a.state={open:!1,planName:"",price:"",duedate:new Date,showChild:!0,selectedFile:null,ext:""},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleChange",value:function(e){console.log("hiii"),console.log(e),this.setState({duedate:e})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""==this.state.planName)At("Please fill all required feilds");else{var a={planName:this.state.planName,price:this.state.price,file:xt,extension:this.state.ext};this.forceUpdate(),w.post("subscription",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?(At("Module is added successfully"),t.reloadChild()):At(e.data.message)}).catch(function(e){}),this.resetField()}}},{key:"render",value:function(){var e=this,t=(this.state.open,{marginLeft:454,paddingTop:"2"}),a={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2};return l.a.createElement("div",null,l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0,style:t},"Add New Module Details"),l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit,encType:"multipart/form-data"},l.a.createElement("div",{style:t},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",id:"companyname",required:"true",label:"Name",name:"planName",value:this.state.planName,onChange:function(t){return e.handleInputChangeValue(t)},autoFocus:!0})),l.a.createElement("div",{style:t},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,type:"number",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"price",label:"Price",name:"price",value:this.state.price,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement("label",{style:{marginTop:"500px"}},"(Monthly \xa0","\u20b9",")")),l.a.createElement("div",{style:t,id:"2"},l.a.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler,ref:function(t){return e.fileInput=t}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{style:t},l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary"},"Submit"))),l.a.createElement("br",null),this.state.showChild?l.a.createElement(kt,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),wt=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{subscriptionApis:function(e,t){return function(t){w.post("subscription",e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?bt("Module is added successfully"):bt(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Ot),Rt=a(37),jt=a.n(Rt),Dt=a(158),qt=a.n(Dt),Nt=a(402),Pt=[],Bt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handlePrint=function(){"block"==document.getElementById("hidebtn").style.display?(document.getElementById("hidebtn").style.display="none",console.log("Block")):(document.getElementById("hidebtn").style.display="block",console.log("Hide")),e.setState({open1:!1}),window.print()},e.handleClose=function(){e.setState({open:!1,open1:!1})},e.state={lead_name:[],lead_company_name:[],lead_introducer:[],lead_address:[],lead_price:[],lead_contact_person:[],lead_contact_email:[],lead_contact_ph:[],next_appoint_date:[],appoint_date:[],piority:[],last_meeting_date:[],meeting_date:[],last_meeting_conclusion:[],special_note:[],next_followup_date:[],followup_date:[],next_followup_time:[],followup_time:[],Leads:[],getAllLead:[],open:!1,open1:!1},e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchAllLeads",value:function(){var e=this;fetch(ne.BASE_URL+"lead",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.Leads.length),e.setState({getAllLead:t.Leads});for(var a=0;a<t.Leads.length;a++)Pt.push(t.Leads[a].lead_name);console.log("array"+Pt),e.setState({Leads:Pt}),console.log("Plan Names --- "+e.state.getAllLead)})}},{key:"componentDidMount",value:function(){this.fetchAllLeads()}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&this.setState({errors:e.errors})}},{key:"handleClick",value:function(e,t,a,n,l,i,s,o,r,c,d,u,m,h,g){this.setState({open:!0,lead_name:e,lead_company_name:t,lead_introducer:a,lead_address:n,lead_price:l,lead_contact_person:i,lead_contact_email:s,lead_contact_ph:o,next_appoint_date:r.slice(0,10),piority:c,last_meeting_date:d.slice(0,10),last_meeting_conclusion:u,special_note:m,next_followup_date:h.slice(0,10),next_followup_time:g.slice(11,19)}),console.log("Meeting date --- "+this.state.leadname+" "+this.state.next_appoint_date)}},{key:"handleDownload",value:function(e,t,a,n,l,i,s,o,r,c,d,u,m,h,g){this.setState({open1:!0,lead_name:e,lead_company_name:t,lead_introducer:a,lead_address:n,lead_price:l,lead_contact_person:i,lead_contact_email:s,lead_contact_ph:o,next_appoint_date:r.slice(0,10),piority:c,last_meeting_date:d.slice(0,10),last_meeting_conclusion:u,special_note:m,next_followup_date:h.slice(0,10),next_followup_time:g.slice(11,19)}),console.log("Meeting date --- "+this.state.leadname+" "+this.state.next_appoint_date)}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={fontWeight:"bold",fontSize:"15px",color:"black"},o={fontSize:"12px"};return l.a.createElement("div",null,l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Lead Details"),l.a.createElement(M.a,null,l.a.createElement("form",null,l.a.createElement(J.a,{margin:"dense",id:"lead_name",label:"Name",name:"lead_name",value:this.state.lead_name,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"lead_company_name",label:"Company Name",name:"lead_company_name",value:this.state.lead_company_name,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_introducer",label:"Introducer",id:"lead_introducer",value:this.state.lead_introducer,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_address",label:"Address",id:"lead_address",value:this.state.lead_address,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_price",label:"Price",id:"lead_price",value:this.state.lead_price,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_person",label:"Contact Person",id:"lead_contact_person",value:this.state.lead_contact_person,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_email",label:"Email",id:"lead_contact_email",value:this.state.lead_contact_email,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_ph",label:"Contact Number",id:"lead_contact_ph",value:this.state.lead_contact_ph,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_appoint_date",label:"Next Appoint Date",name:"next_appoint_date",format:"dd/MM/yyyy",value:this.state.next_appoint_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"piority",label:"Piority",id:"piority",value:this.state.piority,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",label:"Last Meeting Date",name:"last_meeting_date",format:"dd/MM/yyyy",value:this.state.last_meeting_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"last_meeting_conclusion",label:"Last Meeting Conclusion",id:"last_meeting_conclusion",value:this.state.last_meeting_conclusion,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"special_note",label:"Special Note",id:"special_note",value:this.state.special_note,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_followup_date",label:"Next Followup Date",name:"next_followup_date",format:"dd/MM/yyyy",value:this.state.next_followup_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_followup_time",name:"next_followup_time",label:"Next Followup Time",value:this.state.next_followup_time,fullWidth:!0,InputProps:{readOnly:!0}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"Close"))),l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(Nt,null,l.a.createElement(U.a,{id:"form-dialog-title"},"Lead Details"),l.a.createElement(M.a,null,l.a.createElement("form",null,l.a.createElement(J.a,{margin:"dense",id:"lead_name",label:"Name",name:"lead_name",value:this.state.lead_name,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"lead_company_name",label:"Company Name",name:"lead_company_name",value:this.state.lead_company_name,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_introducer",label:"Introducer",id:"lead_introducer",value:this.state.lead_introducer,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_address",label:"Address",id:"lead_address",value:this.state.lead_address,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_price",label:"Price",id:"lead_price",value:this.state.lead_price,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_person",label:"Contact Person",id:"lead_contact_person",value:this.state.lead_contact_person,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_email",label:"Email",id:"lead_contact_email",value:this.state.lead_contact_email,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_ph",label:"Contact Number",id:"lead_contact_ph",value:this.state.lead_contact_ph,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_appoint_date",label:"Next Appoint Date",name:"next_appoint_date",format:"dd/MM/yyyy",value:this.state.next_appoint_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"piority",label:"Piority",id:"piority",value:this.state.piority,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",label:"Last Meeting Date",name:"last_meeting_date",format:"dd/MM/yyyy",value:this.state.last_meeting_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"last_meeting_conclusion",label:"Last Meeting Conclusion",id:"last_meeting_conclusion",value:this.state.last_meeting_conclusion,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"special_note",label:"Special Note",id:"special_note",value:this.state.special_note,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_followup_date",label:"Next Followup Date",name:"next_followup_date",format:"dd/MM/yyyy",value:this.state.next_followup_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_followup_time",name:"next_followup_time",label:"Next Followup Time",value:this.state.next_followup_time,fullWidth:!0,InputProps:{readOnly:!0}})))),l.a.createElement(it.a,null,l.a.createElement("div",{id:"hidebtn",style:{display:"block"}},l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handlePrint,color:"primary"},"Print")))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},"Company Name"),l.a.createElement(nt.a,{style:s},"Introducer Name"),l.a.createElement(nt.a,{style:s},"Price"),l.a.createElement(nt.a,{style:s},"View"),l.a.createElement(nt.a,{style:s},"Download"))),l.a.createElement(lt.a,null,this.state.getAllLead&&this.state.getAllLead.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},t.lead_company_name),l.a.createElement(nt.a,{style:o},t.lead_introducer),l.a.createElement(nt.a,{style:o},t.lead_price),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:i,onClick:function(a){return e.handleClick(t.lead_name,t.lead_company_name,t.lead_introducer,t.lead_address,t.lead_price,t.lead_contact_person,t.lead_contact_email,t.lead_contact_ph,t.next_appoint_date,t.piority,t.last_meeting_date,t.last_meeting_conclusion,t.special_note,t.next_followup_date,t.next_followup_time)}})),l.a.createElement(nt.a,null,l.a.createElement(qt.a,{fontSize:"small",style:i,onClick:function(a){return e.handleDownload(t.lead_name,t.lead_company_name,t.lead_introducer,t.lead_address,t.lead_price,t.lead_contact_person,t.lead_contact_email,t.lead_contact_ph,t.next_appoint_date,t.piority,t.last_meeting_date,t.last_meeting_conclusion,t.special_note,t.next_followup_date,t.next_followup_time)}})))}))))}}]),t}(n.Component),Ft=a(317),Vt=a(563),Lt=a(564),Ut=[],Mt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1,open2:!1})},a.state={lead_name:[],lead_company_name:[],lead_introducer:[],lead_address:[],lead_price:[],lead_contact_person:[],lead_contact_email:[],lead_contact_ph:[],next_appoint_date:[],appoint_date:[],piority:[],last_meeting_date:[],meeting_date:[],last_meeting_conclusion:[],special_note:[],next_followup_date:[],followup_date:[],next_followup_time:[],followup_time:[],Leads:[],getAllLead:[],open:!1,delIndex:-1},a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleAppointDateChange=a.handleAppointDateChange.bind(Object(V.a)(a)),a.handleMeetingDateChange=a.handleMeetingDateChange.bind(Object(V.a)(a)),a.handleFollowupDateChange=a.handleFollowupDateChange.bind(Object(V.a)(a)),a.handleFollowupTimeChange=a.handleFollowupTimeChange.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchAllLeads",value:function(){var e=this;fetch(ne.BASE_URL+"lead",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.Leads.length),e.setState({getAllLead:t.Leads});for(var a=0;a<t.Leads.length;a++)Ut.push(t.Leads[a].lead_name);console.log("array"+Ut),e.setState({Leads:Ut}),console.log("Plan Names --- "+e.state.getAllLead)})}},{key:"componentDidMount",value:function(){this.fetchAllLeads()}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&this.setState({errors:e.errors})}},{key:"handleClick",value:function(e,t,a,n,l,i,s,o,r,c,d,u,m,h,g){this.setState({open:!0,lead_name:e,lead_company_name:t,lead_introducer:a,lead_address:n,lead_price:l,lead_contact_person:i,lead_contact_email:s,lead_contact_ph:o,next_appoint_date:r.slice(0,10),piority:c,last_meeting_date:d.slice(0,10),last_meeting_conclusion:u,special_note:m,next_followup_date:h.slice(0,10),next_followup_time:g.slice(11,19)}),console.log("Meeting date --- "+this.state.leadname+" "+this.state.next_appoint_date)}},{key:"handleClickEdit",value:function(e,t,a,n,l,i,s,o,r,c,d,u,m,h,g,p,f){this.setState({open1:!0,lead_name:e,lead_company_name:t,lead_introducer:a,lead_address:n,lead_price:l,lead_contact_person:i,lead_contact_email:s,lead_contact_ph:o,next_appoint_date:r.slice(0,10),piority:c,last_meeting_date:d.slice(0,10),last_meeting_conclusion:u,special_note:m,next_followup_date:h.slice(0,10),next_followup_time:g,leadId:p,editIndex:f})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleAppointDateChange",value:function(e){this.setState({appoint_date:e})}},{key:"handleMeetingDateChange",value:function(e){this.setState({meeting_date:e})}},{key:"handleFollowupDateChange",value:function(e){this.setState({followup_date:e})}},{key:"handleFollowupTimeChange",value:function(e){this.setState({followup_time:e})}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log("hghd"+this.state.price);var t={lead_name:this.state.lead_name,lead_company_name:this.state.lead_company_name,lead_introducer:this.state.lead_introducer,lead_address:this.state.lead_address,lead_price:this.state.lead_price,lead_contact_person:this.state.lead_contact_person,lead_contact_email:this.state.lead_contact_email,lead_contact_ph:this.state.lead_contact_ph,next_appoint_date:this.state.appoint_date,piority:this.state.piority,last_meeting_date:this.state.meeting_date,last_meeting_conclusion:this.state.last_meeting_conclusion,special_note:this.state.special_note,next_followup_date:this.state.followup_date,next_followup_time:this.state.followup_time,leadid:this.state.leadId};this.state.getAllLead[this.state.editIndex].lead_name=this.state.lead_name,this.state.getAllLead[this.state.editIndex].lead_company_name=this.state.lead_company_name,this.state.getAllLead[this.state.editIndex].lead_introducer=this.state.lead_introducer,this.state.getAllLead[this.state.editIndex].lead_address=this.state.lead_address,this.state.getAllLead[this.state.editIndex].lead_price=this.state.lead_price,this.state.getAllLead[this.state.editIndex].lead_contact_person=this.state.lead_contact_person,this.state.getAllLead[this.state.editIndex].lead_contact_email=this.state.lead_contact_email,this.state.getAllLead[this.state.editIndex].lead_contact_ph=this.state.lead_contact_ph,this.state.getAllLead[this.state.editIndex].next_appoint_date=this.state.next_appoint_date,this.state.getAllLead[this.state.editIndex].piority=this.state.piority,this.state.getAllLead[this.state.editIndex].last_meeting_date=this.state.last_meeting_date,this.state.getAllLead[this.state.editIndex].last_meeting_conclusion=this.state.last_meeting_conclusion,this.state.getAllLead[this.state.editIndex].special_note=this.state.special_note,this.state.getAllLead[this.state.editIndex].next_followup_date=this.state.next_followup_date,this.state.getAllLead[this.state.editIndex].next_followup_time=this.state.next_followup_time,this.state.getAllLead[this.state.editIndex].leadid=this.state.leadid,this.props.leadEdit(t,this.props.history),this.handleClose()}},{key:"handleClickDelete",value:function(e,t){this.setState({open2:!0,leadid:e,delIndex:t})}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var a={leadid:this.state.leadid};this.setState(function(e){return{getAllLead:e.getAllLead.filter(function(e,a){return a!==t.state.delIndex})}}),this.props.leadDelete(a,this.props.history),this.handleClose()}},{key:"render",value:function(){var e=this,t=this.state.open,a=this.state,n=a.open1,i=a.open2,s={width:300,height:50,marginLeft:4,marginRight:4,marginTop:5};return l.a.createElement("div",null,l.a.createElement(L.a,{open:i,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , want to delete lead?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"primary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:t,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Lead Details"),l.a.createElement(M.a,null,l.a.createElement("form",null,l.a.createElement(J.a,{margin:"dense",id:"lead_name",label:"Name",name:"lead_name",value:this.state.lead_name,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"lead_company_name",label:"Company Name",name:"lead_company_name",value:this.state.lead_company_name,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_introducer",label:"Introducer",id:"lead_introducer",value:this.state.lead_introducer,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_address",label:"Address",id:"lead_address",value:this.state.lead_address,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_price",label:"Price",id:"lead_price",value:this.state.lead_price,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_person",label:"Contact Person",id:"lead_contact_person",value:this.state.lead_contact_person,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_email",label:"Email",id:"lead_contact_email",value:this.state.lead_contact_email,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_ph",label:"Contact Number",id:"lead_contact_ph",value:this.state.lead_contact_ph,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_appoint_date",label:"Next Appoint Date",name:"next_appoint_date",format:"dd/MM/yyyy",value:this.state.next_appoint_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"piority",label:"Piority",id:"piority",value:this.state.piority,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",label:"Last Meeting Date",name:"last_meeting_date",format:"dd/MM/yyyy",value:this.state.last_meeting_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"last_meeting_conclusion",label:"Last Meeting Conclusion",id:"last_meeting_conclusion",value:this.state.last_meeting_conclusion,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",name:"special_note",label:"Special Note",id:"special_note",value:this.state.special_note,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_followup_date",label:"Next Followup Date",name:"next_followup_date",format:"dd/MM/yyyy",value:this.state.next_followup_date,fullWidth:!0,InputProps:{readOnly:!0}}),l.a.createElement(J.a,{margin:"dense",id:"next_followup_time",name:"next_followup_time",label:"Next Followup Time",value:this.state.next_followup_time,fullWidth:!0,InputProps:{readOnly:!0}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"Close"))),l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit Lead"),l.a.createElement(M.a,null,l.a.createElement(T.a,null),l.a.createElement("form",null,l.a.createElement(J.a,{margin:"dense",id:"lead_name",label:"Name",name:"lead_name",value:this.state.lead_name,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",id:"lead_company_name",label:"Company Name",name:"lead_company_name",value:this.state.lead_company_name,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",name:"lead_introducer",label:"Introducer",id:"lead_introducer",value:this.state.lead_introducer,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",name:"lead_address",label:"Address",id:"lead_address",value:this.state.lead_address,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",name:"lead_price",label:"Price",id:"lead_price",value:this.state.lead_price,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_person",label:"Contact Person",id:"lead_contact_person",value:this.state.lead_contact_person,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_email",label:"Email",id:"lead_contact_email",value:this.state.lead_contact_email,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",name:"lead_contact_ph",label:"Contact Number",id:"lead_contact_ph",value:this.state.lead_contact_ph,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:s,margin:"normal",id:"next_appoint_date",label:"Next Appoint Date",name:"next_appoint_date",format:"dd/MM/yyyy",value:this.state.next_appoint_date,onChange:this.handleAppointDateChange,KeyboardButtonProps:{"aria-label":"change date"}})),l.a.createElement(J.a,{margin:"dense",name:"piority",label:"Piority",id:"piority",value:this.state.piority,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:s,margin:"normal",id:"last_meeting_date",label:"Last Meeting Date",name:"last_meeting_date",format:"dd/MM/yyyy",value:this.state.last_meeting_date,onChange:this.handleMeetingDateChange,KeyboardButtonProps:{"aria-label":"change date"}})),l.a.createElement(J.a,{margin:"dense",name:"last_meeting_conclusion",label:"Last Meeting Conclusion",id:"last_meeting_conclusion",value:this.state.last_meeting_conclusion,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",name:"special_note",label:"Special Note",id:"special_note",value:this.state.special_note,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:s,margin:"normal",id:"next_followup_date",label:"Next Followup Date",name:"next_followup_date",format:"dd/MM/yyyy",value:this.state.next_followup_date,onChange:this.handleFollowupDateChange,KeyboardButtonProps:{"aria-label":"change date"}})),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Lt.a,{style:s,margin:"normal",id:"next_followup_time",label:"Next Followup Time",value:this.state.next_followup_time,onChange:this.handleFollowupTimeChange,KeyboardButtonProps:{"aria-label":"change time"}})))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"Cancel"),l.a.createElement(Q.a,{onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,null,"Company Name"),l.a.createElement(nt.a,null,"Introducer Name"),l.a.createElement(nt.a,null,"Price"),l.a.createElement(nt.a,null,"View"),l.a.createElement(nt.a,null,"Edit"),l.a.createElement(nt.a,null,"Delete"))),l.a.createElement(lt.a,null,this.state.getAllLead&&this.state.getAllLead.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,null,t.lead_company_name),l.a.createElement(nt.a,null,t.lead_introducer),l.a.createElement(nt.a,null,t.lead_price),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{onClick:function(a){return e.handleClick(t.lead_name,t.lead_company_name,t.lead_introducer,t.lead_address,t.lead_price,t.lead_contact_person,t.lead_contact_email,t.lead_contact_ph,t.next_appoint_date,t.piority,t.last_meeting_date,t.last_meeting_conclusion,t.special_note,t.next_followup_date,t.next_followup_time)}})),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{onClick:function(n){return e.handleClickEdit(t.lead_name,t.lead_company_name,t.lead_introducer,t.lead_address,t.lead_price,t.lead_contact_person,t.lead_contact_email,t.lead_contact_ph,t.next_appoint_date,t.piority,t.last_meeting_date,t.last_meeting_conclusion,t.special_note,t.next_followup_date,t.next_followup_time,t._id,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{onClick:function(n){return e.handleClickDelete(t._id,a)}})))}))))}}]),t}(n.Component),Tt=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{leadEdit:function(e,t){return function(t){console.log("localStorage.getItem('token')"+localStorage.getItem("token")),w.put("lead/"+e.leadid,e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Lead is edited successfully")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}},leadDelete:function(e,t){return function(t){console.log("localStorage.getItem('token')"+localStorage.getItem("token")),w.post("lead/"+e.leadid,e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Lead is added successfully")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Mt),Wt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({lead_name:""}),e.setState({lead_company_name:""}),e.setState({lead_introducer:""}),e.setState({lead_address:""}),e.setState({lead_price:""}),e.setState({lead_contact_person:""}),e.setState({lead_contact_email:""}),e.setState({next_appoint_date:""}),e.setState({appoint_date:new Date}),e.setState({piority:""}),e.setState({last_meeting_date:""}),e.setState({meeting_date:new Date}),e.setState({last_meeting_conclusion:""}),e.setState({special_note:""}),e.setState({next_followup_date:""}),e.setState({followup_date:new Date}),e.setState({next_followup_time:""}),e.setState({followup_time:new Date})},e.state={lead_name:"",lead_company_name:"",lead_introducer:"",lead_address:"",lead_price:"",lead_contact_person:"",lead_contact_email:"",lead_contact_ph:"",next_appoint_date:"",appoint_date:new Date,piority:"",last_meeting_date:"",meeting_date:new Date,last_meeting_conclusion:"",special_note:"",next_followup_date:"",followup_date:new Date,next_followup_time:"",followup_time:new Date,showChild:!0},e.handleAppointDateChange=e.handleAppointDateChange.bind(Object(V.a)(e)),e.handleMeetingDateChange=e.handleMeetingDateChange.bind(Object(V.a)(e)),e.handleFollowupDateChange=e.handleFollowupDateChange.bind(Object(V.a)(e)),e.handleFollowupTimeChange=e.handleFollowupTimeChange.bind(Object(V.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleAppointDateChange",value:function(e){this.setState({appoint_date:e})}},{key:"handleMeetingDateChange",value:function(e){this.setState({meeting_date:e})}},{key:"handleFollowupDateChange",value:function(e){this.setState({followup_date:e})}},{key:"handleFollowupTimeChange",value:function(e){this.setState({followup_time:e})}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&this.setState({errors:e.errors})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={lead_name:this.state.lead_name,lead_company_name:this.state.lead_company_name,lead_introducer:this.state.lead_introducer,lead_address:this.state.lead_address,lead_price:this.state.lead_price,lead_contact_person:this.state.lead_contact_person,lead_contact_email:this.state.lead_contact_email,lead_contact_ph:this.state.lead_contact_ph,next_appoint_date:this.state.appoint_date,piority:this.state.piority,last_meeting_date:this.state.meeting_date,last_meeting_conclusion:this.state.last_meeting_conclusion,special_note:this.state.special_note,next_followup_date:this.state.followup_date,next_followup_time:this.state.followup_time};this.props.leadAdd(t,this.props.history),this.resetField(),this.reloadChild()}},{key:"render",value:function(){var e=this,t=this.state.open,a={width:300,height:50,marginLeft:4,marginRight:4,marginTop:5};return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(L.a,{open:t,onClose:this.handleClose},l.a.createElement(U.a,null,"Modal Pop-up"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"This is an example of modal pop-up"))),l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Lead Management"),l.a.createElement("form",{className:"reg",noValidate:!0},l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,id:"lead_name",label:"Name",name:"lead_name",value:this.state.lead_name,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,id:"lead_company_name",label:"Company Name",name:"lead_company_name",value:this.state.lead_company_name,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"lead_introducer",label:"Introducer",id:"lead_introducer",value:this.state.lead_introducer,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"lead_address",label:"Address",id:"lead_address",value:this.state.lead_address,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"lead_price",label:"Price",id:"lead_price",value:this.state.lead_price,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"lead_contact_person",label:"Contact Person",id:"lead_contact_person",value:this.state.leadlead_contact_person,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"lead_contact_email",label:"Email",type:"email",id:"lead_contact_email",value:this.state.lead_contact_email,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"lead_contact_ph",label:"Contact Number",id:"lead_contact_ph",value:this.state.lead_contact_ph,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:a,margin:"normal",id:"next_appoint_date",label:"Next Appoint Date",name:"next_appoint_date",format:"dd/MM/yyyy",value:this.state.appoint_date,onChange:this.handleAppointDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"piority",label:"Piority",id:"piority",value:this.state.piority,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:a,margin:"normal",id:"last_meeting_date",label:"Last Meeting Date",name:"last_meeting_date",format:"dd/MM/yyyy",value:this.state.meeting_date,onChange:this.handleMeetingDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"last_meeting_conclusion",label:"Last Meeting Conclusion",id:"last_meeting_conclusion",value:this.state.last_meeting_conclusion,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"special_note",label:"Special Note",id:"special_note",value:this.state.special_note,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:a,margin:"normal",id:"next_followup_date",label:"Next Followup Date",name:"next_followup_date",format:"dd/MM/yyyy",value:this.state.followup_date,onChange:this.handleFollowupDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("div",null,l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Lt.a,{style:a,margin:"normal",id:"next_followup_time",label:"Next Followup Time",value:this.state.followup_time,onChange:this.handleFollowupTimeChange,KeyboardButtonProps:{"aria-label":"change time"}})))),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")),l.a.createElement("br",null),l.a.createElement("br",null),this.state.showChild?l.a.createElement(Tt,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),Qt=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{leadAdd:function(e,t){return function(t){w.post("lead",e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Lead is added successfully")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Wt),Jt=a(550),zt=a(278),Gt=a(279),Yt=a(561),Kt=(a(419),a(47)),Ht=a.n(Kt),Xt=null,Zt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a.onChangeHandler=function(e){console.log(e.target.files);var t,n=e.target.files;t=e.target.files[0].name.slice(2+(e.target.files[0].name.lastIndexOf(".")-1>>>0)),a.setState({ext:t}),console.log("File Name : "+e.target.files[0].name+" "+t);var l=new FileReader;l.readAsDataURL(n[0]),l.onload=function(e){console.log("Files --- "+e.target.result.split(",").pop()),Xt={file:e.target.result.split(",").pop()}},a.setState({selectedFile:e.target.files[0],loaded:0})},a.resetField=function(){a.setState({newissue:""})},a.state={getAlltickets:[],childrenData:[],issue_object:[],issue:[],newissue:"",selectedFile:null,delIndex:-1,editIndex:-1,id:"",responseData:"",ext:""},a.handleClick=a.handleClick.bind(Object(V.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchTicket",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"ticket",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log("hello ticket--- "+t.Tickets),e.setState({getAlltickets:t.Tickets})}),console.log("Calling --- End ---  ")}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchTicket()}},{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleClick",value:function(e,t,a,n,l,i){console.log("Tickets --- "+t.children),this.state.childrenData=t.children,console.log("Tickets size --- "+this.state.childrenData.length),this.setState({open:!0,ticketid:e,issue:t.children,response:t.children.response,ticket_primary:n,id:t.children[this.state.childrenData.length-1]._id,responseData:t.children[this.state.childrenData.length-1].response,ticketUnique:l,editIndex:i,issue_object:t.children})}},{key:"handleSubmit",value:function(e){e.preventDefault(),(new FormData).append("file",this.state.selectedFile);var t={_id:this.state.id,ticketid:this.state.ticket_primary,sresponse:this.state.newissue,responseData:this.state.responseData,file:Xt,extension:this.state.ext};this.state.open=!1,this.state.getAlltickets="",this.fetchTicket(),console.log("this.state.response --- "+this.state.id),this.forceUpdate(),this.props.ticketUpdate(t,this.props.history),this.resetField()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=(t.open1,t.setOpen,{cursor:"pointer",color:"blue"}),i={fontWeight:"bold",fontSize:"15px",color:"black"},s={fontSize:"12px"},o=Object(z.a)("",2),r=o[0],c=(o[1],{textAlign:"right"}),d={textAlign:"left"},u={margin:10,color:"#fff",backgroundColor:zt.a[500],width:35,height:35},m={margin:10,color:"#fff",backgroundColor:Gt.a[500],width:35,height:35};return l.a.createElement("div",null,l.a.createElement(L.a,{open:a,onClose:this.handleClose,scroll:r,"aria-labelledby":"scroll-dialog-title"},l.a.createElement(U.a,{id:"scroll-dialog-title"},"Ticket Detail",l.a.createElement(le.a,{style:{float:"right"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,{dividers:"paper"===r},this.state.issue&&this.state.issue.map(function(e,t){return l.a.createElement("div",null,l.a.createElement(T.a,null,e.issue.length>0?l.a.createElement("div",null,l.a.createElement(Jt.a,{style:m},"I"),l.a.createElement(Yt.a,{display:"flex",justifyContent:"flex-start"},l.a.createElement("div",{style:d},e.issue,e.filename.length>0?l.a.createElement("div",{style:{color:"blue"}},l.a.createElement("a",{href:ne.BASE_URL+"uploads/"+e.filename},"file")):""))):""),l.a.createElement(be.a,{variant:"fullWidth"}),l.a.createElement(T.a,null,e.response.length>0?l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(Jt.a,{style:u},"S.A")),l.a.createElement(Yt.a,{display:"flex",justifyContent:"flex-end"},l.a.createElement("div",{style:c},e.response,e.responsefile.length>0?l.a.createElement("div",{style:{color:"blue"}},l.a.createElement("a",{href:ne.BASE_URL+"uploads/"+e.responsefile},"file")):""))):""),l.a.createElement(be.a,{variant:"fullWidth"}))}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("form",{className:"reg",noValidate:!0,encType:"multipart/form-data"},l.a.createElement(J.a,{style:{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5},variant:"outlined",margin:"dense",required:!0,id:"newissue",label:"response",name:"newissue",value:this.state.newissue,autoFocus:!0,onChange:function(t){return e.handleInputChangeValue(t,1)}}),l.a.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler}),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:i},"Issue"),l.a.createElement(nt.a,{style:i},"Details"),l.a.createElement(nt.a,{style:i},"status"),l.a.createElement(nt.a,{style:i},"View"))),l.a.createElement(lt.a,null,this.state.getAlltickets&&this.state.getAlltickets.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.children[0].issue),l.a.createElement(nt.a,{style:s},t.children[0].details),l.a.createElement(nt.a,{style:s},t.status),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:n,onClick:function(n){return e.handleClick(t.ticketId,t,t.children.response,t._id,t.ticketUnique,a)}})))}))))}}]),t}(n.Component),$t=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{ticketUpdate:function(e,t){return function(t){console.log("ticketUpdate---"+JSON.stringify(e)),w.post("ticket-response/",e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Ticket is updated successfully")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Zt),ea=a(20),ta=a(552),aa=a(99),na=a.n(aa),la={menuIndex:"",requisitionIndex:""};function ia(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var sa=[],oa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({subMenu:""})},a.state={submenu:[],showChild:!0,submenus:[{menuname:""}],inputValues:{},dispStatus:!1},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllMenu()}},{key:"fetchAllMenu",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"menu-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.MenuList.length),e.setState({getAllPlan:t.MenuList[la.menuIndex].children}),console.log("All Menus --- "+JSON.stringify(t.MenuList[0].children)),console.log("Menu Index --- "+la.menuIndex);for(var a=0;a<t.MenuList[la.menuIndex].children.length;a++)sa.push(t.MenuList[la.menuIndex].children[a].label),e.state.submenus.push({menuname:t.MenuList[la.menuIndex].children[a].label});e.state.dispStatus=!0,console.log("array"+sa),e.setState({plans:sa}),console.log("Plan Names --- "+e.state.getAllPlan)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"addClick",value:function(){this.setState(function(e){return{submenus:[].concat(Object(ea.a)(e.submenus),[{menuname:""}])}})}},{key:"createUI",value:function(){var e=this;return this.state.submenus.map(function(t,a){return l.a.createElement("div",{key:a},e.state.dispStatus&&a>0?l.a.createElement("div",{style:{paddingLeft:"35px"}},l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"menuname",value:t.menuname||"",label:"Sub Menu Name",onChange:e.handleInputChangeValue.bind(e,a),onBlur:function(t){return e.handleAddValue(t)},autoFocus:!0}),l.a.createElement(le.a,{"aria-label":"delete",color:"secondary",onClick:e.removeClick.bind(e,a)},l.a.createElement(_t.a,null))):"")})}},{key:"removeClick",value:function(e){var t=Object(ea.a)(this.state.submenus);t.splice(e,1),console.log("Del Menu Before --- "+e+" --- "+JSON.stringify(t)),this.setState({submenus:t}),this.state.submenus=t,console.log("Del Menu --- "+e+" --- "+JSON.stringify(this.state.submenus)),this.props.handlerfordata(this.state.submenus)}},{key:"handleInputChangeValue",value:function(e,t){var a=t.target,n=a.name,l=a.value,i=Object(ea.a)(this.state.submenus);i[e]=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ia(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ia(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},i[e],Object(y.a)({},n,l)),this.setState({submenus:i})}},{key:"handleAddValue",value:function(e){this.props.handlerfordata(this.state.submenus)}},{key:"render",value:function(){var e=this.props;e.name,e.onChange;return l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:{textAlign:"center",paddingTop:"2"}}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Submenu \xa0",l.a.createElement(ta.a,{color:"primary",size:"small","aria-label":"add",onClick:this.addClick.bind(this)},l.a.createElement(na.a,null))),this.createUI())}}]),t}(n.Component),ra=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{addMenu:B})(oa),ca=[];function da(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var ua=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.handleClose=function(){a.setState({open:!1,open1:!1})},a.handlerfordata=function(e){console.log("Inside handlerfordata data is"),a.state.subMenu=e,console.log("My Data --- "+a.state.subMenu)},a.state={getAllPlan:[],delIndex:-1,editIndex:-1,menuId:"",_id:"",menuName:"",subMenu:""},a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),console.log("this.state.subMenu --- "+this.state.subMenu.length),this.state.subMenu.length>0)this.state.subMenu.splice(0,1);var a={menuName:this.state.menuName,menuId:this.state.menuId,_id:this.state._id,subMenu:this.state.subMenu};console.log("subMenu --- "+JSON.stringify(this.state.subMenu)),w.post("menus",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?(da(e.data.message),t.fetchAllMenu()):da(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"handleClick",value:function(e,t,a,n){console.log("Value Details --- "+e+" "+t+" "+a+" "+n),this.setState({open:!0,menuName:e,_id:t,menuId:a,editIndex:n}),la.menuIndex=n}},{key:"handleClickDelete",value:function(e,t){console.log("handle delete---"+e),this.setState({open1:!0,menuid:e,delIndex:t})}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var a={menuId:this.state.menuid};this.setState(function(e){return{getAllPlan:e.getAllPlan.filter(function(e,a){return a!==t.state.delIndex})}}),this.props.MenuDelete(a,this.props.history),this.handleClose()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllMenu()}},{key:"fetchAllMenu",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"menu-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.MenuList.length),e.setState({getAllPlan:t.MenuList}),console.log("All Menus --- "+JSON.stringify(t.MenuList));for(var a=0;a<t.MenuList.length;a++)ca.push(t.MenuList[a].menuName),e.setState({id:t.MenuList[a].menuId}),e.setState({menuName:t.MenuList[a].menuName});console.log("array"+ca),e.setState({plans:ca}),console.log("Plan Names --- "+e.state.getAllPlan)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={cursor:"pointer",color:"red"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"},c=this.props;c.name,c.onChange;return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , want to delete subscription?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Menu"),l.a.createElement("form",null,l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"menuName",label:"Menu Name",name:"menuName",value:this.state.menuName,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement("div",null,l.a.createElement(ra,{handlerfordata:this.handlerfordata})),l.a.createElement("br",null),l.a.createElement("br",null))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Menu name"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllPlan&&this.state.getAllPlan.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.label),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t.label,t._id,t.menuId,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickDelete(t._id,a)}})))}))))}}]),t}(n.Component),ma=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{menuEdit:function(e,t){return function(t){w.post("menus",e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Menu is updated successfully")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}},MenuDelete:function(e,t){return function(t){console.log("localStorage.getItem('token')"+localStorage.getItem("token")),w.post("menus/"+e.menuId,e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){P("Menu is Deleted successfully")}else P(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(ua);function ha(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ga=function(e){function t(e){var a;return Object(o.a)(this,t),console.log("Executing---"),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({subMenu:""})},a.state={submenu:[],showChild:!0,submenus:[{menuname:""}],inputValues:{}},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"method",value:function(){this.state.submenus=[{menuname:""}]}},{key:"addClick",value:function(){this.setState(function(e){return{submenus:[].concat(Object(ea.a)(e.submenus),[{menuname:""}])}})}},{key:"createUI",value:function(){var e=this;return this.state.submenus.map(function(t,a){return l.a.createElement("div",{key:a},l.a.createElement("div",{style:{paddingLeft:"35px"}},l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"menuname",value:t.menuname||"",label:"Sub Menu Name",onChange:e.handleInputChangeValue.bind(e,a),onBlur:function(t){return e.handleAddValue(t)},autoFocus:!0}),l.a.createElement(le.a,{"aria-label":"delete",color:"secondary",onClick:e.removeClick.bind(e,a)},l.a.createElement(_t.a,null))))})}},{key:"removeClick",value:function(e){var t=Object(ea.a)(this.state.submenus);t.splice(e,1),this.setState({submenus:t}),this.props.handlerfordata(this.state.submenus)}},{key:"handleInputChangeValue",value:function(e,t){var a=t.target,n=a.name,l=a.value,i=Object(ea.a)(this.state.submenus);i[e]=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ha(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ha(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},i[e],Object(y.a)({},n,l)),this.setState({submenus:i})}},{key:"handleAddValue",value:function(e){this.props.handlerfordata(this.state.submenus)}},{key:"render",value:function(){var e=this.props;e.name,e.onChange;return l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:{textAlign:"center",paddingTop:"2"}}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Submenu \xa0",l.a.createElement(ta.a,{color:"primary",size:"small","aria-label":"add",onClick:this.addClick.bind(this)},l.a.createElement(na.a,null))),this.createUI())}}]),t}(n.Component),pa=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{addMenu:B})(ga),fa=a(216),ya=a(228),ba=[],va=[],Ea=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.state.checked&&a.setState({checked:!a.state.checked}),a.setState({menuName:""}),a.setState({subMenu:""}),a.setState({moduleId:""})},a.handleChange=function(e,t){a.setState({checked:!a.state.checked}),t+=1,"none"==document.getElementById(t).style.display?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"},a.handlerfordata=function(e){console.log("Inside handlerfordata data is"+e),a.state.subMenu=e,console.log("My Data --- "+JSON.stringify(a.state.subMenu))},a.state={menuName:"",subMenu:"",showChild:!0,moduleId:"",checked:!1,getAllModule:[]},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchmodule",value:function(){var e=this;fetch(ne.BASE_URL+"subscription",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllModule:t.subscription});for(var a=0;a<t.subscription.length;a++)ba.push(t.subscription[a].planName),va.push(t.subscription[a].subscriptionId)})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchmodule()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.moduleId)j()("Please select module");else if(""==this.state.menuName)j()("Please Enter menuname.");else{var t={moduleId:this.state.moduleId,menuName:this.state.menuName,subMenu:this.state.subMenu};console.log("Dep Id --- "+JSON.stringify(this.state.subMenu)),this.forceUpdate(),this.props.addMenu(t,this.props.history),this.resetField(),document.getElementById("11112").style.display="none",this.child.method(),this.reloadChild()}}},{key:"handleInputChangeValueDept",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,"::",a),this.setState(Object(y.a)({},t,a));for(var n=0;n<this.state.getAllModule.length;n++)console.log("JSON.stringify(desigNameArray.pop(i) --- "+n+" "+JSON.stringify(ba.pop(n))+" "+a)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("div",{id:"11111"}),l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Add Menu"),l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{style:{paddingBottom:"20px"}},l.a.createElement($e.a,{style:{minWidth:300}},l.a.createElement(fa.a,{htmlFor:"moduleId"},"Deparment"),l.a.createElement(ya.a,{value:this.state.moduleId,onChange:function(t){return e.handleInputChangeValueDept(t)},inputProps:{name:"moduleId",id:"moduleId"}},this.state.getAllModule.map(function(e){return l.a.createElement(se.a,{value:e.subscriptionId},e.planName)})))),l.a.createElement("div",{style:{paddingLeft:"35px"}},l.a.createElement(J.a,{style:{width:300,height:50,marginLeft:2,marginRight:2,marginTop:2},variant:"outlined",margin:"dense",required:!0,id:"menuName",label:"Menu Name",name:"menuName",value:this.state.menuName,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(Ke.a,{checked:this.state.checked,onChange:function(t){return e.handleChange(t,11111)},value:"checkedB",color:"primary",inputProps:{"aria-label":"secondary checkbox"}})),l.a.createElement("br",null),l.a.createElement("div",{id:"11112",style:{display:"none"}},l.a.createElement(pa,{handlerfordata:this.handlerfordata,onRef:function(t){return e.child=t}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),this.state.showChild?l.a.createElement(ma,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),_a=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{addMenu:B})(Ea);N.a.settings={theme:"ios"};var Sa=[],Ca=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){n.setState({open:!1,open1:!1})},n.state=(a={name:"",discount:"",subscriptions:[],getAllPlan:[],plans:[]},Object(y.a)(a,"discount",[]),Object(y.a)(a,"delIndex",-1),Object(y.a)(a,"editIndex",-1),a),n.handleSubmit=n.handleSubmit.bind(Object(V.a)(n)),n.handleDelete=n.handleDelete.bind(Object(V.a)(n)),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n){this.setState({open:!0,discount:e,name:t,planid:a,editIndex:n})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,planid:e,delIndex:t})}},{key:"fetchAllPlans",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"plan",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.plans.length),e.setState({getAllPlan:t.plans});for(var a=0;a<t.plans.length;a++)Sa.push(t.plans[a].planName),e.setState({plans:t.plans[a].name}),e.setState({id:t.plans[a].planId}),e.setState({discount:t.plans[a].discount});console.log("array"+Sa),e.setState({plans:Sa}),console.log("Plan Names --- "+e.state.getAllPlan)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllPlans()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.name)a="Please fill name",N.a.alert({message:a});else{var t={name:this.state.name,discount:this.state.discount,planid:this.state.planid};this.state.getAllPlan[this.state.editIndex].name=this.state.name,this.state.getAllPlan[this.state.editIndex].discount=this.state.discount,this.state.getAllPlan[this.state.editIndex].id=this.state.planid,this.props.planEdit(t,this.props.history),this.handleClose()}var a}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var a={planid:this.state.planid};this.setState(function(e){return{getAllPlan:e.getAllPlan.filter(function(e,a){return a!==t.state.delIndex})}}),this.props.planDelete(a,this.props.history),this.handleClose()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={cursor:"pointer",color:"red"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"};return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , to delete the subscription module?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Plan"),l.a.createElement("form",null,l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"companyname",label:"Plan Name",name:"name",value:this.state.name,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"price",value:this.state.discount,label:"Discount",name:"discount",fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Plan name"),l.a.createElement(nt.a,{style:o},"Discount"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllPlan&&this.state.getAllPlan.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.name),l.a.createElement(nt.a,{style:r},t.discount),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t.discount,t.name,t._id,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickDelete(t._id,a)}})))}))))}}]),t}(n.Component),Ia=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{planDelete:function(e,t){return function(t){w.post("plan/"+e.planid,e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?bt("Plan is deleted successfully"):bt(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}},planEdit:function(e,t){return function(t){console.log("all"+e),console.log("edit id"+e.planid),w.put("plan/"+e.planid,e,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?bt("Plan is edited successfully"):bt(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Ca);N.a.settings={theme:"ios"};var ka=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({plan_name:""}),e.setState({discount:""})},e.state={open:!1,plan_name:"",discount:"",showChild:!0},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""==this.state.name)this.showAlert("Please fill name");else{var a={name:this.state.plan_name,discount:this.state.discount};this.forceUpdate(),w.post("plan-create",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(t.resetField(),console.log(e.data.value),console.log(e.data.message),1==e.data.value){t.showAlert("Plan is added successfully")}else t.showAlert(e.data.message);t.resetField(),t.reloadChild()}).catch(function(e){return console.log(e)})}}},{key:"render",value:function(){var e=this;this.state.open;return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Add Plan"),l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{style:{paddingLeft:"5px",paddingRight:"5px",marginBottom:"10px"}},l.a.createElement($e.a,{style:{minWidth:300}},l.a.createElement(fa.a,{htmlFor:"plan_name"},"Plan Name"),"                               ",l.a.createElement(ya.a,{value:this.state.plan_name,onChange:function(t){return e.handleInputChangeValue(t)},inputProps:{name:"plan_name",id:"plan_name"}},l.a.createElement(se.a,{value:"Monthly"},"Monthly"),l.a.createElement(se.a,{value:"Quarterly"},"Quarterly"),l.a.createElement(se.a,{value:"HalfYearly"},"Half Yearly"),l.a.createElement(se.a,{value:"Yearly"},"Yearly")))),l.a.createElement("div",null,l.a.createElement(J.a,{style:{width:300,height:50,marginLeft:2,marginRight:2,marginTop:2},variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"discount",label:"Discount",name:"discount",type:"number",value:this.state.discount,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),this.state.showChild?l.a.createElement(Ia,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),Aa=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(ka),xa=[],Oa=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state=(a={planName:"",price:"",duedate:"",subscriptions:[],getAllPlan:[],plans:[]},Object(y.a)(a,"price",[]),Object(y.a)(a,"customer",""),Object(y.a)(a,"description",""),a),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchAllPlans",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"midsale-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.midsale.length),e.setState({getAllPlan:t.midsale});for(var a=0;a<t.midsale.length;a++)xa.push(t.midsale[a].description),e.setState({id:t.midsale[a].midsaleId}),e.setState({price:t.midsale[a].description});console.log("array"+xa),e.setState({plans:xa}),console.log("Plan Names --- "+e.state.getAllPlan)}),console.log("Calling --- End ---  ")}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllPlans()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"render",value:function(){var e=this.state,t=(e.open,e.open1,{fontWeight:"bold",fontSize:"15px",color:"black"}),a={fontSize:"12px"},n={width:600,height:150,marginLeft:2,marginRight:2,marginTop:2,resize:"none"};return l.a.createElement("div",null,l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:t},"Sl no"),l.a.createElement(nt.a,{style:t},"Customer"),l.a.createElement(nt.a,{style:t},"Description"))),l.a.createElement(lt.a,null,this.state.getAllPlan&&this.state.getAllPlan.map(function(e,t){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:a},++t),l.a.createElement(nt.a,{style:a},e.customer.companyName),l.a.createElement(nt.a,{style:a},l.a.createElement("textarea",{style:n,variant:"outlined",margin:"normal",required:!0,readOnly:!0,id:"description",placeholder:"Discription",multiline:!0,name:"description",value:e.description})))}))))}}]),t}(n.Component),wa=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Oa),Ra=[],ja=[];N.a.settings={theme:"ios"};var Da=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){console.log("Child call --- "),a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({companyName:""}),a.setState({description:""})},a.state={showChild:!0,customer:"",description:"",companyid:"",companyName:"",getAllCompany:[]},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchCompany",value:function(){var e=this;fetch(ne.BASE_URL+"company",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllCompany:t.company});for(var a=0;a<t.company.length;a++)Ra.push(t.company[a].companyName),ja.push(t.company[a].companyId)})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchCompany()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""==this.state.companyName||null==this.state.companyName)this.showAlert("Please select company");else{var a={customer:this.state.companyName,description:this.state.description};console.log("Customer --- "+this.state.customer),this.forceUpdate(),w.post("midsale-add",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(t.resetField(),console.log(e.data.value),console.log(e.data.message),1==e.data.value){t.showAlert("MidSale is added successfully")}else t.showAlert(e.data.message);t.reloadChild()}).catch(function(e){return console.log(e)})}}},{key:"handleInputChangeValueDept",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,"::",a),this.setState(Object(y.a)({},t,a))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{style:{paddingBottom:"20px"}},l.a.createElement($e.a,{style:{minWidth:300}},l.a.createElement(fa.a,{htmlFor:"companyName"},"Company Name"),l.a.createElement(ya.a,{required:"true",value:this.state.companyName,onChange:function(t){return e.handleInputChangeValueDept(t)},inputProps:{name:"companyName",id:"companyName"}},this.state.getAllCompany.map(function(e){return l.a.createElement(se.a,{value:e._id},e.companyName)})))),l.a.createElement("div",null,l.a.createElement("textarea",{style:{width:500,height:150,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},variant:"outlined",margin:"normal",required:"true",id:"description",placeholder:"Discription",multiline:!0,name:"description",value:this.state.description,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("br",null),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),this.state.showChild?l.a.createElement(wa,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),qa=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Da),Na=[],Pa=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state=(a={description:"",planName:"",price:"",duedate:"",subscriptions:[],getAllPlan:[],plans:[]},Object(y.a)(a,"price",[]),Object(y.a)(a,"delIndex",-1),Object(y.a)(a,"editIndex",-1),a),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchAllPlans",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"publish-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.publish.length),e.setState({getAllPlan:t.publish});for(var a=0;a<t.publish.length;a++)Na.push(t.publish[a].description),e.setState({id:t.publish[a].publishId}),e.setState({description:t.publish[a].description});console.log("array"+Na),e.setState({plans:Na}),console.log("Plan Names --- "+e.state.getAllPlan)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllPlans()}},{key:"render",value:function(){var e=this.state,t=(e.open,e.open1,{fontWeight:"bold",fontSize:"15px",color:"black"}),a={width:600,height:150,marginLeft:2,marginRight:2,marginTop:2,resize:"none"};return l.a.createElement("div",null,l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:t},"Sl no"),l.a.createElement(nt.a,{style:t},"Description"))),l.a.createElement(lt.a,null,this.state.getAllPlan&&this.state.getAllPlan.map(function(e,t){return l.a.createElement(at.a,null,l.a.createElement(nt.a,null,++t),l.a.createElement(nt.a,null,l.a.createElement("textarea",{style:a,variant:"outlined",margin:"normal",required:!0,readOnly:!0,id:"description",placeholder:"Discription",multiline:!0,name:"description",value:e.description})))}))))}}]),t}(n.Component),Ba=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Pa);N.a.settings={theme:"ios"};var Fa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({description:""})},a.state={showChild:!0,description:""},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log("Child calling ------ ")}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={description:this.state.description};this.forceUpdate(),w.post("publish-add",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(t.resetField(),console.log(e.data.value),console.log(e.data.message),1==e.data.value){t.showAlert("Broadcast is publish successfully")}else t.showAlert(e.data.message);t.reloadChild()}).catch(function(e){return console.log(e)})}},{key:"handleInputChangeValueDept",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,"::",a),this.setState(Object(y.a)({},t,a))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Publish Broadcast"),l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",null,l.a.createElement("textarea",{style:{width:500,height:150,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},variant:"outlined",margin:"normal",required:!0,id:"description",placeholder:"Discription",multiline:!0,name:"description",value:this.state.description,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("br",null),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),this.state.showChild?l.a.createElement(Ba,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),Va=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Fa),La=a(553);a(420);N.a.settings={theme:"ios"};var Ua=null,Ma=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({username:localStorage.getItem("userName")}),a.setState({contact:localStorage.getItem("contact")})},a.state={file:"",username:localStorage.getItem("userName"),contact:localStorage.getItem("contact"),ext:"",showChild:!0,disabled:!0,disabled1:!0},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(new FormData).append("file",this.state.file);var a={username:this.state.username,contact:this.state.contact,file:Ua,extension:this.state.ext,superid:localStorage.getItem("id"),profImg:localStorage.getItem("profilepic")};console.log("handle uploading-",a),w.post("superadmin/account/",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log("sa--"+e.data.value),console.log("me---"+JSON.stringify(e.data.superadmins)),1==e.data.value){localStorage.setItem("userName",e.data.superadmins.userName),localStorage.setItem("contact",e.data.superadmins.contact),localStorage.setItem("profilepic",e.data.superadmins.profile),t.resetField();t.showAlert("Profile is updated successfully"),t.forceUpdate(),t.setState({disabled:!0}),t.setState({disabled1:!0})}else t.showAlert(e.data.message);t.reloadChild()}).catch(function(e){return console.log(e)})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"_handleImageChange",value:function(e){var t=this;e.preventDefault();var a,n=new FileReader,l=e.target.files[0];a=e.target.files[0].name.slice(2+(e.target.files[0].name.lastIndexOf(".")-1>>>0)),this.setState({ext:a}),n.onloadend=function(e){t.setState({file:l,imagePreviewUrl:n.result}),console.log("Files --- "+e.target.result),Ua={file:e.target.result.split(",").pop()}},n.readAsDataURL(l)}},{key:"handleGameClik",value:function(){this.setState({disabled:!this.state.disabled})}},{key:"handleGameClik1",value:function(){this.setState({disabled1:!this.state.disabled1})}},{key:"render",value:function(){var e=this,t=this.state.imagePreviewUrl,a=null;if(null!=localStorage.getItem("profilepic")){console.log("ur here");var n="http://localhost:5000/uploads/profile/"+localStorage.getItem("profilepic");a=l.a.createElement("img",{src:n,style:{width:"190px",height:"190px",borderRadius:"100px"}}),t&&(console.log("ur here if else"),a=l.a.createElement("img",{src:t,style:{width:"190px",height:"190px",borderRadius:"100px"}}))}else t?(console.log("ur here if else"),a=l.a.createElement("img",{src:t,style:{width:"190px",height:"190px",borderRadius:"100px"}})):(console.log("ur here else"),a=l.a.createElement("div",{className:"previewText",style:{width:"190px",height:"190px",borderRadius:"100px",padding:"20px"}},"Please select an Image for Preview"));var i={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2},s={cursor:"pointer"};return l.a.createElement("div",{className:"previewComponent"},l.a.createElement("div",{className:"imgPreview"},a),l.a.createElement("form",{encType:"multipart/form-data"},l.a.createElement("input",{className:"fileInput",type:"file",onChange:function(t){return e._handleImageChange(t)},style:{width:"200px"}}),l.a.createElement("div",null,l.a.createElement(J.a,{style:i,variant:"outlined",margin:"dense",required:!0,disabled:this.state.disabled?"disabled":"",id:"username",label:"User Name",name:"username",value:this.state.username,onChange:function(t){return e.handleInputChangeValue(t)},autoFocus:!0}),l.a.createElement("a",{onClick:this.handleGameClik.bind(this)}," ",l.a.createElement(ot.a,{style:s})," ")),l.a.createElement("div",null,l.a.createElement(J.a,{style:i,variant:"outlined",margin:"dense",required:!0,disabled:this.state.disabled1?"disabled":"",id:"contact",label:"Contact Number",name:"contact",value:this.state.contact,onChange:function(t){return e.handleInputChangeValue(t)},autoFocus:!0}),l.a.createElement("a",{onClick:this.handleGameClik1.bind(this)}," ",l.a.createElement(ot.a,{style:s})," ")),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),Ta=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Ma),Wa=a(220),Qa=a.n(Wa),Ja=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null," ",l.a.createElement("b",null,"Welcome!!")," ")}}]),t}(n.Component),za=a(555),Ga=Object(G.a)(function(e){return{grow:{flexGrow:1,display:"flex"},menuButton:{marginRight:e.spacing(2)},title:Object(y.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Y.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Y.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(y.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(y.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,background:"#0099FF"},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,nested:{paddingLeft:e.spacing(4)},icon:{color:"#FFFFFF"}}}),Ya=!1;function Ka(){var e,t=Ga(),a=l.a.useState(null),i=Object(z.a)(a,2),s=i[0],o=i[1],r=l.a.useState(null),c=Object(z.a)(r,2),d=c[0],u=c[1],m=l.a.useState(!1),h=Object(z.a)(m,2),g=h[0],p=h[1],f=l.a.useState(!1),y=Object(z.a)(f,2),b=y[0],v=y[1],E=l.a.useState(0),_=Object(z.a)(E,2),S=_[0],C=_[1],I=Object(n.useState)("dashboard"),k=Object(z.a)(I,2),A=k[0],x=k[1],O=l.a.useState(!1),w=Object(z.a)(O,2),R=(w[0],w[1],localStorage.getItem("role"));console.log("profpic----"+localStorage.getItem("profilepic")),e=""==localStorage.getItem("profilepic")||null==localStorage.getItem("profilepic")?"http://localhost:5000/uploads/profile/avatar.png":"http://localhost:5000/uploads/profile/"+localStorage.getItem("profilepic");var D=Qa()("http://localhost:5000");function q(e,t){console.log("Index --- "+t),C(t),0==t&&x("dashboard"),1==t&&x("company"),2==t&&p(!g),2.1==t&&x("subscription"),2.2==t&&x("leadview"),2.3==t&&x("leadadd"),2.4==t&&x("ticketmanage"),2.6==t&&x("plan"),3==t&&v(!b),3.1==t&&x("publish"),3.2==t&&x("midsales"),5==t&&x("menu")}D.emit("join",{email:localStorage.getItem("email")}),D.on("new_msg",function(e){console.log("heloo socjet--"+e.msg),j()(e.msg)}),"sales"===R&&(Ya=!0);var N=Boolean(s),P=Boolean(d);function B(e){o(e.currentTarget)}function F(){u(null)}var V=l.a.createElement(oe.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:N,onClose:function(){o(null),F()}},l.a.createElement(se.a,{onClick:function(){o(null),u(null),x("profile")}},"Profile"),l.a.createElement(se.a,{onClick:function(){o(null),u(null),x("password")}},"Change Password"),l.a.createElement(La.a,{style:{color:"#000",textDecoration:"none"},href:"/login/superadmin"},l.a.createElement(se.a,{onClick:function(){o(null),u(null),localStorage.clear(),x("logout")}},"Logout"))),L=l.a.createElement(oe.a,{anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:P,onClose:F},l.a.createElement(se.a,null,l.a.createElement(le.a,{"aria-label":"show 4 new mails",color:"inherit"},l.a.createElement(ie.a,{badgeContent:4,color:"secondary"},l.a.createElement(ue.a,null))),l.a.createElement("p",null,"Messages")),l.a.createElement(se.a,null,l.a.createElement(le.a,{"aria-label":"show 11 new notifications",color:"inherit"},l.a.createElement(ie.a,{badgeContent:11,color:"secondary"},l.a.createElement(he.a,null))),l.a.createElement("p",null,"Notifications")),l.a.createElement(se.a,{onClick:B},l.a.createElement(le.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},l.a.createElement(ce.a,null)),l.a.createElement("p",null,"Profile")));return l.a.createElement("div",{className:t.grow},l.a.createElement(K.a,{position:"fixed",className:t.appBar},l.a.createElement(ee.a,null),l.a.createElement(H.a,null,l.a.createElement("img",{src:Z.a,alt:"logo"}),"\xa0\xa0",l.a.createElement(W.a,{className:t.title,variant:"h9"},"v3.0"),l.a.createElement("div",{className:t.grow}),l.a.createElement("div",{className:t.sectionDesktop},l.a.createElement(za.a,{container:!0,justify:"center",alignItems:"center"},l.a.createElement(Jt.a,{alt:"Remy Sharp",src:e,onClick:B}))),l.a.createElement("div",{className:t.sectionMobile},l.a.createElement(le.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit"},l.a.createElement(pe.a,null))))),l.a.createElement(fe.a,{className:t.drawer,variant:"permanent",classes:{paper:t.drawerPaper}},l.a.createElement("div",{className:t.toolbar}),l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:0===S,onClick:function(e){return q(0,0)}},l.a.createElement(Ee.a,null,l.a.createElement(Ae.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Dashboard",style:{color:"#FFFFFF"}}))),Ya?"":l.a.createElement(ye.a,null,l.a.createElement(ve.a,{id:!0,button:!0,selected:1===S,onClick:function(e){return q(0,1)}},l.a.createElement(Ee.a,null,l.a.createElement(Oe.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Company",style:{color:"#FFFFFF"}}))),l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:2===S,onClick:function(e){return q(0,2)}},l.a.createElement(Ee.a,null,l.a.createElement(Re.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"CRM",style:{color:"#FFFFFF"}}),g?l.a.createElement(De.a,{className:t.icon}):l.a.createElement(Ne.a,{className:t.icon})),l.a.createElement(Se.a,{in:g,timeout:"auto",unmountOnExit:!0},l.a.createElement(ye.a,{component:"div",disablePadding:!0},Ya?"":l.a.createElement(ve.a,{button:!0,className:t.nested,selected:2.1===S,onClick:function(e){return q(0,2.1)}},l.a.createElement(Ee.a,null," ",l.a.createElement(Ve.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Subscription Management",style:{color:"#FFFFFF"}})),l.a.createElement(ve.a,{button:!0,className:t.nested,selected:2.2===S,onClick:function(e){return q(0,2.2)}},l.a.createElement(Ee.a,null," ",l.a.createElement(Be.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Lead View",style:{color:"#FFFFFF"}})),Ya?l.a.createElement(ve.a,{button:!0,className:t.nested,selected:2.3===S,onClick:function(e){return q(0,2.3)}},l.a.createElement(Ee.a,null," ",l.a.createElement(Be.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Lead Add/Edit/Delete",style:{color:"#FFFFFF"}})):"",Ya?"":l.a.createElement(ve.a,{button:!0,className:t.nested,selected:2.4===S,onClick:function(e){return q(0,2.4)}},l.a.createElement(Ee.a,null," ",l.a.createElement(Qe.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Ticket Management",style:{color:"#FFFFFF"}})),Ya?"":l.a.createElement(ve.a,{button:!0,className:t.nested,selected:2.6===S,onClick:function(e){return q(0,2.6)}},l.a.createElement(Ee.a,null," ",l.a.createElement(Ue.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Plan",style:{color:"#FFFFFF"}}))))),Ya?"":l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:3===S,onClick:function(e){return q(0,3)}},l.a.createElement(Ee.a,null,l.a.createElement(ze.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Broadcast",style:{color:"#FFFFFF"}}),b?l.a.createElement(De.a,{className:t.icon}):l.a.createElement(Ne.a,{className:t.icon})),l.a.createElement(Se.a,{in:b,timeout:"auto",unmountOnExit:!0},l.a.createElement(ye.a,{component:"div",disablePadding:!0},l.a.createElement(ve.a,{button:!0,className:t.nested,selected:3.1===S,onClick:function(e){return q(0,3.1)}},l.a.createElement(Ee.a,null," ",l.a.createElement(Te.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"All",style:{color:"#FFFFFF"}})),l.a.createElement(ve.a,{button:!0,className:t.nested,selected:3.2===S,onClick:function(e){return q(0,3.2)}},l.a.createElement(Ee.a,null," ",l.a.createElement(Ye.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Admin",style:{color:"#FFFFFF"}}))))),l.a.createElement(be.a,null),l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:4===S,onClick:function(e){return q(0,4)}},l.a.createElement(Ee.a,null,l.a.createElement(Ie.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Reports",style:{color:"#FFFFFF"}}))),Ya?"":l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:5===S,onClick:function(e){return q(0,5)}},l.a.createElement(Ee.a,null,l.a.createElement(Ie.a,{className:t.icon})," "),l.a.createElement(_e.a,{primary:"Menu",style:{color:"#FFFFFF"}})))),l.a.createElement("main",{className:t.content},l.a.createElement("div",{className:t.toolbar}),"company"===A?l.a.createElement(ht,null):"","subscription"===A?l.a.createElement(wt,null):"","leadview"===A?l.a.createElement(Bt,null):"","leadadd"===A&&"sales"===R?l.a.createElement(Qt,null):"","ticketmanage"===A?l.a.createElement($t,null):"","midsales"===A?l.a.createElement(qa,null):"","plan"===A?l.a.createElement(Aa,null):"","menu"===A?l.a.createElement(_a,null):"","password"===A?l.a.createElement(yt,null):"","profile"===A?l.a.createElement(Ta,null):"","publish"===A?l.a.createElement(Va,null):"","dashboard"===A?l.a.createElement(Ja,null):""),L,V)}if(localStorage.jwtToken){O(localStorage.jwtToken);var Ha=k()(localStorage.jwtToken);C.dispatch(F(Ha))}var Xa=!1,Za=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={id:localStorage.getItem("id")},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return null==this.state.id?(console.log("check"),Xa=!1):(console.log("Ok"),Xa=!0),l.a.createElement(m.a,{store:C},l.a.createElement("div",null,Xa?l.a.createElement(Ka,null):l.a.createElement(La.a,{href:"/login/superadmin"},"Yor are Logged Out. Login First")))}}]),t}(n.Component);if(localStorage.jwtToken){O(localStorage.jwtToken);var $a=k()(localStorage.jwtToken);C.dispatch(F($a))}var en=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleClose=function(){e.setState({open:!1})},e.handleClick=function(){e.setState({open:!0})},e.resetField=function(){e.setState({email:""}),e.setState({password:""})},e.state={open:!1,email:"",password:""},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};this.props.loginSuperAdmin(t,this.props.history)}},{key:"render",value:function(){var e=this,t=this.state.open,a={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2};return l.a.createElement(m.a,{store:C},l.a.createElement("div",null,l.a.createElement(ee.a,null),l.a.createElement("div",null,l.a.createElement(ae,null)),l.a.createElement("div",{style:{flexGrow:1,textAlign:"center",marginTop:200}},l.a.createElement(L.a,{open:t,onClose:this.handleClose},l.a.createElement(U.a,null,"Modal Pop-up"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"This is an example of modal pop-up"))),l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Login"),l.a.createElement("form",{className:"reg",noValidate:!0},l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,inputProps:{"padding-top":"0","padding-bottom":"0"},id:"email",type:"email",label:"Email Address",name:"email",value:this.state.email,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"password",value:this.state.password,label:"Password",type:"password",id:"password",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")))))}}]),t}(n.Component),tn=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginSuperAdmin:function(e,t){return function(a){w.post("superadmin",e).then(function(e){if(console.log(e.data.value),console.log(e.data.token),1==e.data.value){O(e.data.token),localStorage.setItem("token",e.data.token),localStorage.setItem("role",e.data.user.role),localStorage.setItem("userName",e.data.user.userName),localStorage.setItem("contact",e.data.user.contact),localStorage.setItem("id",e.data.user._id),localStorage.setItem("email",e.data.user.email),localStorage.setItem("profilepic",e.data.user.profile),console.log("Role --- "+e.data.user.role),console.log("username --- "+e.data.user.userName),console.log("Contact --- "+e.data.user.contact);P("Login Successfull"),t.push("/superadmin/dashboard")}else P(e.data.message)}).catch(function(e){a({type:p,payload:((e||{}).response||{}).data||"Error unexpected"})})}}})(en);function an(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var nn=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).resetField=function(){e.setState({email:""}),e.setState({password:""})},e.state={open:!1,email:"",password:""},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};this.props.loginCompany(t,this.props.history)}},{key:"render",value:function(){var e=this,t={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2};return l.a.createElement(m.a,{store:C},l.a.createElement("div",null,l.a.createElement(ee.a,null),l.a.createElement("div",null,l.a.createElement(ae,null)),l.a.createElement("div",{style:{flexGrow:1,textAlign:"center",marginTop:200}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Login"),l.a.createElement("form",{className:"reg",noValidate:!0},l.a.createElement("div",null,l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:!0,inputProps:{"padding-top":"0","padding-bottom":"0"},id:"email",type:"email",label:"Email Address",name:"email",value:this.state.email,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:!0,name:"password",value:this.state.password,label:"Password",type:"password",id:"password",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")))))}}]),t}(n.Component),ln=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginCompany:function(e,t){return function(a){w.post("admin/login",e).then(function(e){console.log("DATA --- "+JSON.stringify(e.data)),console.log("VALUE --- "+e.data.value),console.log("TOKEN --- "+e.data.token),console.log("menu--"+JSON.stringify(e.data)),1==e.data.value?(O(e.data.token),localStorage.setItem("token",e.data.token),an("Login successfull"),t.push("/dashboard")):an(e.data.message)}).catch(function(e){a({type:p,payload:((e||{}).response||{}).data||"Error unexpected"})})}}})(nn),sn=a(122),on=a(101),rn=a(140),cn=a.n(rn),dn=a(549),un=a(39),mn=a.n(un),hn=a(54),gn=l.a.forwardRef(function(e,t){return l.a.createElement(gt.a,Object.assign({direction:"up",ref:t},e))});function pn(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var fn={width:350},yn=[],bn=[],vn=[],En=[],_n=!0,Sn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1,checkedItem:[]})},a.resetField=function(){a.setState({employee_id:""}),a.setState({firstname:""}),a.setState({lastname:""}),a.setState({joining_date:new Date}),a.setState({department:""}),a.setState({designation:""}),a.setState({mobile:""}),a.setState({blood_group:""}),a.setState({birth_date:new Date}),a.setState({period:""})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={open:!1,open1:!1,employee_id:"",firstname:"",lastname:"",mobile:"",department:"",designation:"",getAllUser:[],getAllUserBySearch:[],getSelectedUserAllMenu:[],userid:"",email:"",blood_group:"",head_sub:"",type:"",employeetype:"",superiorId:"",period:"",editIndex:-1,delIndex:-1,searchItemIndex:-1,getAllModule:[],getAllDesig:[],getAllSuperVisor:[],getAllMenu:[],checkedItem:[],labelWidth:35,labelWidthPref:35,labelWidthDep:75,labelWidthDes:80,labelWidthSup:50,labelWidthEmp:105,labelWidthHS:65},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a.handleSearch=a.handleSearch.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n,l,i,s,o,r,c,d,u,m,h,g,p,f,y){console.log("Dept : ---"+o+" "+r+" --- "+y),this.fetchAllDesig(o),this.setState({open:!0,employee_id:t,prefix:a,firstname:n,lastname:l,mobile:i,blood_group:s,department:o,designation:r,head_sub:c,type:d,employeetype:u,superiorId:m,period:h,email:g,birth_date:p,joining_date:f,editIndex:y,loading:!1}),this.state.editIndex=y,this.fetchSelectedUserMenu()}},{key:"handleClickDelete",value:function(e,t,a){this.setState({open1:!0,userid:e,email:t,delIndex:a})}},{key:"fetchAllMenu",value:function(){var e=this;fetch(ne.BASE_URL+"menu",{method:"GET",headers:{"x-access-db":localStorage.getItem("dbname"),"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllMenu:t.menulist})}).catch(function(e){return console.log(e)})}},{key:"fetchAllDesig",value:function(e){var t=this;console.log("url --- "+ne.BASE_URL+"designsub/"+e),fetch(ne.BASE_URL+"designsub/"+e,{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(e){console.log("Size --- "+e.Designation.length),t.setState({getAllDesig:e.Designation})}).catch(function(e){return console.log(e)})}},{key:"fetchSupervisor",value:function(){var e=this;fetch(ne.BASE_URL+"head-list",{method:"GET",headers:{"x-access-db":localStorage.getItem("dbname"),"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllSuperVisor:t.users}),_n=!1;for(var a=0;a<t.users.length;a++)En.push(t.users[a].employee_id)}).catch(function(e){console.log("ERROR --- "+e),_n=!0,console.log("Value : "+_n)})}},{key:"fetchmodule",value:function(){var e=this;console.log("hhh"+JSON.stringify(localStorage.getItem("subscription")));var t=localStorage.getItem("subscription");fetch(ne.BASE_URL+"subscriptionbyId/"+t,{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllModule:t.subscription});for(var a=0;a<t.subscription.length;a++)vn.push(t.subscription[a]._id),yn.push(t.subscription[a].planName),bn.push(t.subscription[a].subscriptionId)}).catch(function(e){return console.log(e)})}},{key:"handleInputChangeValueDept",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,"::",n),this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getAllModule.length;l++)console.log("JSON.stringify(desigNameArray.pop(i) --- "+l+" "+JSON.stringify(yn.pop(l))+" "+n),JSON.stringify(bn.pop(l))==n&&(console.log("entered"),this.state.id=n);this.fetchAllDesig(n)}},{key:"fetchAllUser",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"userlist",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllUser:t.userlist,getSelectedUserAllMenu:t.userlist,loading:!1})})})}},{key:"fetchSelectedUserMenu",value:function(){console.log("getSelectedUserAllMenu --- "+this.state.editIndex+" --- :"+JSON.stringify(this.state.getSelectedUserAllMenu));for(var e=0;e<this.state.getSelectedUserAllMenu[this.state.editIndex].menuprimary.length;e++)"undefined"!=typeof this.state.getSelectedUserAllMenu[this.state.editIndex].menuprimary[e].submenupri?this.state.checkedItem.push(this.state.getSelectedUserAllMenu[this.state.editIndex].menuprimary[e].menupri+"_"+this.state.getSelectedUserAllMenu[this.state.editIndex].menuprimary[e].submenupri):this.state.checkedItem.push(this.state.getSelectedUserAllMenu[this.state.editIndex].menuprimary[e].menupri);this.setState({checked:this.state.checkedItem}),console.log("Array Items --- "+this.state.checkedItem)}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllUser(),this.fetchmodule(),this.fetchSupervisor(),this.fetchAllMenu()}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var a={userid:this.state.userid,email:this.state.email};this.setState(function(e){return{getAllUser:e.getAllUser.filter(function(e,a){return a!==t.state.delIndex})}}),this.props.userDelete(a,this.props.history),this.handleClose()}},{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n)),13==t&&(document.getElementById(14).style.display=13==t&&"Head"==n?"none":"block"),15==t&&(15==t&&"Contractor"==n?(console.log("Enter into --- "+n),document.getElementById(17).style.display="block"):(console.log("Enter into "+n),document.getElementById(17).style.display="none"))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.department)console.log("I am in handle submit"),pn("Please select Department");else if(""==this.state.designation)pn("Please select Designation");else if(""==this.state.type)pn("Please select Type");else if(""==this.state.employeetype)pn("Please select Employee Type");else if(""==this.state.head_sub)pn("Please select Head or sub");else if("Sub"==this.state.head_sub&&""==this.state.superiorId)pn("Please select superior");else if("Contractor"==this.state.type&&""==this.state.period)pn("Please enter period");else{var t;t=this.state.checked;var a={employee_id:this.state.employee_id,prefix:this.state.prefix,firstname:this.state.firstname,lastname:this.state.lastname,joining_date:this.state.joining_date,department:this.state.department,designation:this.state.designation,mobile:this.state.mobile,blood_group:this.state.blood_group,head_sub:this.state.head_sub,superiorId:this.state.superiorId,status:"active",dbname:localStorage.getItem("dbname"),birth_date:this.state.birth_date,type:this.state.type,employeetype:this.state.employeetype,period:this.state.period,menu_submenu:t,email:this.state.email};console.log("Checked item --- "+t),this.props.userEdit(a,this.props.history),this.handleClose()}}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllUserBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllUserBySearch=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllUser.length;t++)if(this.state.searchBy===this.state.getAllUser[t].employee_id){this.state.searchItemIndex=t,this.state.getAllUserBySearch.push(this.state.getAllUser[t]),e=1,this.forceUpdate();break}if(0==e)for(var a=0;a<this.state.getAllUser.length;a++)this.state.searchBy===this.state.getAllUser[a].firstname&&(this.state.searchItemIndex=a,this.state.getAllUserBySearch.push(this.state.getAllUser[a]),e=1,this.forceUpdate());if(0==e)for(var n=0;n<this.state.getAllUser.length;n++)this.state.searchBy===this.state.getAllUser[n].lastname&&(this.state.searchItemIndex=n,this.state.getAllUserBySearch.push(this.state.getAllUser[n]),e=1,this.forceUpdate());if(0==e)for(var l=0;l<this.state.getAllUser.length;l++)this.state.searchBy===this.state.getAllUser[l].designation.modulename&&(this.state.searchItemIndex=l,this.state.getAllUserBySearch.push(this.state.getAllUser[l]),e=1,this.forceUpdate());if(0==e)for(var i=0;i<this.state.getAllUser.length;i++)this.state.searchBy===this.state.getAllUser[i].designation.designation&&(this.state.searchItemIndex=i,this.state.getAllUserBySearch.push(this.state.getAllUser[i]),e=1,this.forceUpdate())}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={cursor:"pointer",color:"red"},o={width:280,height:50,marginLeft:4,marginRight:4,marginTop:9},r={width:135,height:50,marginTop:1,marginLeft:4,marginRight:4,resize:"none"},c={minWidth:150},d={fontWeight:"bold",fontSize:"15px",color:"black"},u={fontSize:"12px"},m={check:l.a.createElement(hn.b,{className:"rct-icon rct-icon-check"}),uncheck:l.a.createElement(hn.c,{className:"rct-icon rct-icon-uncheck"}),halfCheck:l.a.createElement(hn.g,{className:"rct-icon rct-icon-half-check"}),expandClose:l.a.createElement(hn.d,{className:"rct-icon rct-icon-expand-close"}),expandOpen:l.a.createElement(hn.i,{className:"rct-icon rct-icon-expand-open"}),expandAll:l.a.createElement(hn.a,{className:"rct-icon rct-icon-expand-all"}),collapseAll:l.a.createElement(hn.g,{className:"rct-icon rct-icon-collapse-all"}),parentClose:l.a.createElement(hn.e,{className:"rct-icon rct-icon-parent-close"}),parentOpen:l.a.createElement(hn.f,{className:"rct-icon rct-icon-parent-open"}),leaf:l.a.createElement(hn.h,{className:"rct-icon rct-icon-leaf-close"})};this.state.loading;return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"false"},l.a.createElement("div",{style:{width:800}},l.a.createElement(U.a,{id:"scroll-dialog-title"},"Edit User Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",null,l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement("div",{id:"1"},l.a.createElement(J.a,{style:o,variant:"outlined",margin:"dense",required:!0,id:"employee_id",label:"Employee Id",name:"employee_id",value:this.state.employee_id,InputProps:{disabled:!0}})),l.a.createElement("div",{id:"2",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:c},l.a.createElement(fa.a,{htmlFor:"prefix-simple"},"Prefix"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.prefix,onChange:function(t){return e.handleInputChangeValue(t,2)},labelWidth:this.state.labelWidth,inputProps:{name:"prefix",id:"prefix-simple"}},l.a.createElement(se.a,{value:"Mr"},"Mr."),l.a.createElement(se.a,{value:"Mrs"},"Mrs.")))),l.a.createElement("div",{id:"3"},l.a.createElement(J.a,{style:o,variant:"outlined",margin:"dense",required:!0,id:"firstname",label:"First Name",name:"firstname",value:this.state.firstname,onChange:function(t){return e.handleInputChangeValue(t,3)}})),l.a.createElement("div",{id:"4"},l.a.createElement(J.a,{style:o,variant:"outlined",margin:"dense",required:!0,name:"lastname",label:"Last Name",id:"lastname",value:this.state.lastname,onChange:function(t){return e.handleInputChangeValue(t,4)}})),l.a.createElement("div",{id:"6"},l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:r,margin:"normal",id:"birth_date",label:"Birth Date",name:"birth_date",format:"dd/MM/yyyy",value:this.state.birth_date,onChange:this.handleBirthDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("div",{id:"7"},l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:r,margin:"normal",id:"joining_date",label:"Joining Date",name:"joining_date",format:"dd/MM/yyyy",value:this.state.joining_date,onChange:this.handleJoiningDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("div",{id:"9",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:c},l.a.createElement(fa.a,{htmlFor:"department_name"},"Deparment"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.department,onChange:function(t){return e.handleInputChangeValueDept(t,9)},labelWidth:this.state.labelWidthDep,inputProps:{name:"department",id:"department_name"}},this.state.getAllModule.map(function(e){return l.a.createElement(se.a,{value:e._id},e.planName)})))),l.a.createElement("div",{id:"10",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:c},l.a.createElement(fa.a,{htmlFor:"designation"},"Designation"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.designation,onChange:function(t){return e.handleInputChangeValue(t,10)},labelWidth:this.state.labelWidthDes,inputProps:{name:"designation",id:"designation"}},this.state.getAllDesig.map(function(e){return l.a.createElement(se.a,{value:e._id},e.designation)})))),l.a.createElement("div",{id:"11"},l.a.createElement(J.a,{style:o,variant:"outlined",margin:"dense",required:!0,type:"number",name:"mobile",label:"Mobile Number",id:"mobile",value:this.state.mobile,onChange:function(t){return e.handleInputChangeValue(t,11)}})),l.a.createElement("div",{id:"12"},l.a.createElement(J.a,{style:o,variant:"outlined",margin:"dense",required:!0,name:"blood_group",label:"Blood Group",id:"blood_group",value:this.state.blood_group,onChange:function(t){return e.handleInputChangeValue(t,12)}})),l.a.createElement("div",{id:"13",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:c},l.a.createElement(fa.a,{htmlFor:"head_sub"},"Head/Sub"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.head_sub,onChange:function(t){return e.handleInputChangeValue(t,13)},labelWidth:this.state.labelWidthHS,inputProps:{name:"head_sub",id:"head_sub"}},l.a.createElement(se.a,{value:"Head"},"Head"),l.a.createElement(se.a,{value:"Sub"},"Sub")))),l.a.createElement("div",{id:"14",style:{paddingLeft:"5px",paddingRight:"5px",display:"none"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:c},l.a.createElement(fa.a,{htmlFor:"superiorId"},"Supervisor"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.superiorId,onChange:function(t){return e.handleInputChangeValue(t,14)},labelWidth:this.state.labelWidthSup,inputProps:{name:"superiorId",id:"superiorId"}},_n?"":l.a.createElement("div",null,this.state.getAllSuperVisor.map(function(e){return l.a.createElement(se.a,{value:e.employee_id},e.employee_id)})," "),";"))),l.a.createElement("div",{id:"15",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:c},l.a.createElement(fa.a,{htmlFor:"type"},"Type"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.type,onChange:function(t){return e.handleInputChangeValue(t,15)},labelWidth:this.state.labelWidth,inputProps:{name:"type",id:"type"}},l.a.createElement(se.a,{value:"Employee"},"Employee."),l.a.createElement(se.a,{value:"Contractor"},"Contractor.")))),l.a.createElement("div",{id:"16",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:c},l.a.createElement(fa.a,{htmlFor:"type"},"Employee Type"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.employeetype,onChange:function(t){return e.handleInputChangeValue(t,16)},labelWidth:this.state.labelWidthEmp,inputProps:{name:"employeetype",id:"employeetype"}},l.a.createElement(se.a,{value:"Probation"},"Probation."),l.a.createElement(se.a,{value:"Confirmed"},"Confirmed.")))),l.a.createElement("div",{id:"17",style:{display:"none"}},l.a.createElement(J.a,{style:o,variant:"outlined",margin:"dense",type:"number",name:"period",label:"Period",id:"period",value:this.state.period,onChange:function(t){return e.handleInputChangeValue(t,17)}})),l.a.createElement("div",{style:{marginTop:25}},l.a.createElement(cn.a,{nodes:this.state.getAllMenu,checked:this.state.checked,expanded:this.state.expanded,onCheck:function(t){return e.setState({checked:t})},onExpand:function(t){return e.setState({expanded:t})},icons:m}))))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit")))),l.a.createElement(L.a,{open:n,TransitionComponent:gn,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},l.a.createElement(U.a,{id:"alert-dialog-slide-title"},"Are you sure to delete the user?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:fn,label:"Search by Id/First/Last Name/Dept./Desig.",id:"searchBy",name:"searchBy",value:this.state.searchBy,autoComplete:"off",onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch})))}})),this.state.getAllUserBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:d},"Employee Id"),l.a.createElement(nt.a,{style:d},"Firstname"),l.a.createElement(nt.a,{style:d},"Lastname"),l.a.createElement(nt.a,{style:d},"Mobile"),l.a.createElement(nt.a,{style:d},"Department"),l.a.createElement(nt.a,{style:d},"Designation"),l.a.createElement(nt.a,{style:d},"Edit"),l.a.createElement(nt.a,{style:d},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllUserBySearch.length>0&&this.state.getAllUserBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:u},t.employee_id),l.a.createElement(nt.a,{style:u},t.firstname),l.a.createElement(nt.a,{style:u},t.lastname),l.a.createElement(nt.a,{style:u},t.mobile),l.a.createElement(nt.a,{style:u},t.designation.modulename),l.a.createElement(nt.a,{style:u},t.designation.designation),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(a){return e.handleClick(t._id,t.employee_id,t.prefix,t.firstname,t.lastname,t.mobile,t.blood_group,t.designation.modulePrimary,t.designation._id,t.head_sub,t.type,t.employeetype,t.superiorId,t.period,t.email,t.birth_date,t.joining_date,e.state.searchItemIndex)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(a){return e.handleClickDelete(t._id,t.email,e.state.searchItemIndex)}})))}))):[this.state.getAllUser.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:d},"Employee Id"),l.a.createElement(nt.a,{style:d},"Firstname"),l.a.createElement(nt.a,{style:d},"Lastname"),l.a.createElement(nt.a,{style:d},"Mobile"),l.a.createElement(nt.a,{style:d},"Department"),l.a.createElement(nt.a,{style:d},"Designation"),l.a.createElement(nt.a,{style:d},"Edit"),l.a.createElement(nt.a,{style:d},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllUser.length>0&&this.state.getAllUser.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:u},t.employee_id),l.a.createElement(nt.a,{style:u},t.firstname),l.a.createElement(nt.a,{style:u},t.lastname),l.a.createElement(nt.a,{style:u},t.mobile),l.a.createElement(nt.a,{style:u},t.designation.modulename),l.a.createElement(nt.a,{style:u},t.designation.designation),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t._id,t.employee_id,t.prefix,t.firstname,t.lastname,t.mobile,t.blood_group,t.designation.modulePrimary,t.designation._id,t.head_sub,t.type,t.employeetype,t.superiorId,t.period,t.email,t.birth_date,t.joining_date,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickDelete(t._id,t.email,a)}})))}))):l.a.createElement("h3",null,"No list to be displayed")])}}]),t}(n.Component),Cn=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{userDelete:function(e,t){return function(t){w.post("user-delete",e,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),e.data.value,an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}},userEdit:function(e,t){return function(t){w.post("user-edit",e,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?an("User is edited successfully"):an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Sn);a(207);function In(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var kn=[],An=[],xn=[],On=[],wn=!0,Rn=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).resetField=function(){e.setState({email:""}),e.setState({password:""}),e.setState({employee_id:""}),e.setState({prefix:""}),e.setState({firstname:""}),e.setState({lastname:""}),e.setState({joining_date:new Date}),e.setState({department:""}),e.setState({designation:""}),e.setState({head_sub:""}),e.setState({mobile:""}),e.setState({blood_group:""}),e.setState({period:""}),e.setState({superiorId:""}),e.setState({type:""}),e.setState({employeetype:""}),e.setState({checked:[]}),e.setState({expanded:[]}),e.state.birth_date=new Date,e.state.min_birth_date.setFullYear(e.state.birth_date.getFullYear()-100),e.state.max_birth_date.setFullYear(e.state.birth_date.getFullYear()-13),e.state.birth_date.setFullYear(e.state.birth_date.getFullYear()-14),e.state.max_joining_date=e.state.joining_date,e.state.min_joining_date.setFullYear(e.state.birth_date.getFullYear()+13)},e.state={getAllModule:[],getAllDesig:[],getAllSuperVisor:[],getAllMenu:[],checked:[],expanded:[],email:"",password:"",employee_id:"",prefix:"",firstname:"",lastname:"",joining_date:new Date,min_joining_date:new Date,max_joining_date:new Date,department:"",designation:"",mobile:"",blood_group:"",head_sub:"",superiorId:"",birth_date:new Date,min_birth_date:new Date,max_birth_date:new Date,type:"",employeetype:"",period:"",role:"",status:"",dbname:"",id:"",date:"",month:"",year:"",labelWidth:35,labelWidthPref:35,labelWidthDep:75,labelWidthDes:80,labelWidthSup:50,labelWidthEmp:105,labelWidthHS:65},e.state.min_birth_date.setFullYear(e.state.birth_date.getFullYear()-100),e.state.max_birth_date.setFullYear(e.state.birth_date.getFullYear()-13),e.state.birth_date.setFullYear(e.state.birth_date.getFullYear()-14),e.state.max_joining_date=e.state.joining_date,e.state.min_joining_date.setFullYear(e.state.birth_date.getFullYear()+13),e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e.handleJoiningDateChange=e.handleJoiningDateChange.bind(Object(V.a)(e)),e.handleBirthDateChange=e.handleBirthDateChange.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleErrors",value:function(e){if(!e.ok)throw Error(e.status);return e}},{key:"handleJoiningDateChange",value:function(e){this.setState({joining_date:e})}},{key:"handleBirthDateChange",value:function(e){this.setState({birth_date:e})}},{key:"fetchmodule",value:function(){var e=this;console.log("hhh"+JSON.stringify(localStorage.getItem("subscription")));var t=localStorage.getItem("subscription");fetch(ne.BASE_URL+"subscriptionbyId/"+t,{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllModule:t.subscription}),console.log("All Module --- "+JSON.stringify(t.subscription));for(var a=0;a<t.subscription.length;a++)xn.push(t.subscription[a]._id),kn.push(t.subscription[a].planName),An.push(t.subscription[a].subscriptionId)}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchmodule(),this.fetchAllMenu(),this.fetchSupervisor()}},{key:"handleSubmit",value:function(e){e.preventDefault(),alert("Processing...")}},{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n)),13==t&&(document.getElementById(14).style.display=13==t&&"Head"==n?"none":"block"),15==t&&(15==t&&"Contractor"==n?(console.log("Enter into --- "+n),document.getElementById(17).style.display="block"):(console.log("Enter into "+n),document.getElementById(17).style.display="none"))}},{key:"checkEmail",value:function(e){var t=this,a={email:this.state.email};w.post("user-check",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value||(In(e.data.message),t.setState({email:""}))}).catch(function(e){return console.log(e)})}},{key:"checkMobile",value:function(e){10!=this.state.mobile.length&&In("Please enter valid mobile number with 10 digit.")}},{key:"handleInputChangeValueDept",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,"::",n),this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getAllModule.length;l++)console.log("JSON.stringify(desigNameArray.pop(i) --- "+l+" "+JSON.stringify(kn.pop[l])+" "+n),JSON.stringify(An.pop[l])==n&&(console.log("entered"),this.state.id=n);this.fetchAllDesig(n)}},{key:"fetchAllDesig",value:function(e){var t=this;console.log("url --- "+ne.BASE_URL+"designsub/"+e),fetch(ne.BASE_URL+"designsub/"+e,{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(e){console.log("Size --- "+e.Designation.length),t.setState({getAllDesig:e.Designation})}).catch(function(e){return console.log(e)})}},{key:"fetchSupervisor",value:function(){var e=this;fetch(ne.BASE_URL+"head-list",{method:"GET",headers:{"x-access-db":localStorage.getItem("dbname"),"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllSuperVisor:t.users}),console.log("User Details --- "+JSON.stringify(t.users)),wn=!1;for(var a=0;a<t.users.length;a++)On.push(t.users[a].employee_id)}).catch(function(e){console.log("ERROR --- "+e),wn=!0,console.log("Value : "+wn)})}},{key:"fetchAllMenu",value:function(){var e=this;fetch(ne.BASE_URL+"menu",{method:"GET",headers:{"x-access-db":localStorage.getItem("dbname"),"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllMenu:t.menulist}),console.log("Menu:List --- "+JSON.stringify(t.menulist))}).catch(function(e){return console.log(e)})}},{key:"handleSubmit",value:function(e){var t,a=this;if(e.preventDefault(),t=this.state.checked,""==this.state.department)console.log("I am in handle submit"),In("Please select Department");else if(""==this.state.designation)In("Please select Designation");else if(""==this.state.type)In("Please select Type");else if(""==this.state.employeetype)In("Please select Employee Type");else if(""==this.state.head_sub)In("Please select Head or sub");else if("Sub"==this.state.head_sub&&""==this.state.superiorId)In("Please select superior");else if("Contractor"==this.state.type&&""==this.state.period)In("Please enter period");else if(10!=this.state.mobile.length)In("Please enter valid mobile number with 10 digit.");else if(0==t.length)In("Please select atleast one menu.");else{var n={email:this.state.email,password:this.state.password,employee_id:this.state.employee_id,prefix:this.state.prefix,firstname:this.state.firstname,lastname:this.state.lastname,joining_date:this.state.joining_date,department:this.state.department,designation:this.state.designation,mobile:this.state.mobile,blood_group:this.state.blood_group,head_sub:this.state.head_sub,superiorId:this.state.superiorId,status:"active",dbname:localStorage.getItem("dbname"),birth_date:this.state.birth_date,type:this.state.type,employeetype:this.state.employeetype,period:this.state.period,menu_submenu:t};console.log("userAdd --- "+this.state.email+" "+this.state.joining_date+" "+this.state.birth_date+" "+this.state.department+" "+this.state.designation+" "+this.state.head_sub+" "+this.state.type+" "+this.state.employeetype),console.log("Checked item --- "+t),w.post("add-employee",n,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?(In("New user has been added successfully"),a.fetchSupervisor()):In(e.data.message)}).catch(function(e){}),this.resetField()}}},{key:"render",value:function(){var e=this,t=this.state.open,a={width:280,height:50,marginLeft:4,marginRight:4,marginTop:9},n={width:280,height:50,marginTop:1,marginLeft:4,marginRight:4,resize:"none"},i={minWidth:150},s={check:l.a.createElement(hn.b,{className:"rct-icon rct-icon-check"}),uncheck:l.a.createElement(hn.c,{className:"rct-icon rct-icon-uncheck"}),halfCheck:l.a.createElement(hn.g,{className:"rct-icon rct-icon-half-check"}),expandClose:l.a.createElement(hn.d,{className:"rct-icon rct-icon-expand-close"}),expandOpen:l.a.createElement(hn.i,{className:"rct-icon rct-icon-expand-open"}),expandAll:l.a.createElement(hn.a,{className:"rct-icon rct-icon-expand-all"}),collapseAll:l.a.createElement(hn.g,{className:"rct-icon rct-icon-collapse-all"}),parentClose:l.a.createElement(hn.e,{className:"rct-icon rct-icon-parent-close"}),parentOpen:l.a.createElement(hn.f,{className:"rct-icon rct-icon-parent-open"}),leaf:l.a.createElement(hn.h,{className:"rct-icon rct-icon-leaf-close"})};return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(L.a,{open:t,onClose:this.handleClose},l.a.createElement(U.a,null,"Modal Pop-up"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"This is an example of modal pop-up"))),l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Add New User"),l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.a.createElement("div",{id:"1"},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,id:"employee_id",label:"Employee Id",name:"employee_id",value:this.state.employee_id,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement("div",{id:"2",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:i},l.a.createElement(fa.a,{htmlFor:"prefix-simple"},"Prefix"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.prefix,onChange:function(t){return e.handleInputChangeValue(t,2)},labelWidth:this.state.labelWidth,inputProps:{name:"prefix",id:"prefix-simple"}},l.a.createElement(se.a,{value:"Mr"},"Mr."),l.a.createElement(se.a,{value:"Mrs"},"Mrs.")))),l.a.createElement("div",{id:"3"},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,id:"firstname",label:"First Name",name:"firstname",value:this.state.firstname,onChange:function(t){return e.handleInputChangeValue(t,3)}})),l.a.createElement("div",{id:"4"},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"lastname",label:"Last Name",id:"lastname",value:this.state.lastname,onChange:function(t){return e.handleInputChangeValue(t,4)}})),l.a.createElement("div",{id:"5"},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"email",label:"Email",id:"email",type:"email",value:this.state.email,onChange:function(t){return e.handleInputChangeValue(t,5)},onBlur:function(t){return e.checkEmail(t)}})),l.a.createElement("div",{id:"6"},l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:n,margin:"normal",id:"birth_date",label:"Birth Date",name:"birth_date",format:"dd/MM/yyyy",minDate:this.state.min_birth_date,maxDate:this.state.max_birth_date,value:this.state.birth_date,onChange:this.handleBirthDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("div",{id:"7"},l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:n,margin:"normal",id:"joining_date",label:"Joining Date",name:"joining_date",format:"dd/MM/yyyy",maxDate:this.state.max_joining_date,minDate:this.state.min_joining_date,value:this.state.joining_date,onChange:this.handleJoiningDateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("div",{id:"8"},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,type:"password",name:"password",label:"Password",id:"password",value:this.state.password,onChange:function(t){return e.handleInputChangeValue(t,8)}})),l.a.createElement("div",{id:"9",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:i},l.a.createElement(fa.a,{htmlFor:"department"},"Deparment"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.department,onChange:function(t){return e.handleInputChangeValueDept(t,9)},labelWidth:this.state.labelWidthDep,inputProps:{name:"department",id:"department"}},this.state.getAllModule.length>0&&this.state.getAllModule.map(function(e){return l.a.createElement(se.a,{value:e._id},e.planName)})))),l.a.createElement("div",{id:"10",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:i},l.a.createElement(fa.a,{htmlFor:"designation"},"Designation"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.designation,onChange:function(t){return e.handleInputChangeValue(t,10)},labelWidth:this.state.labelWidthDes,inputProps:{name:"designation",id:"designation"}},this.state.getAllDesig.length>0&&this.state.getAllDesig.map(function(e){return l.a.createElement(se.a,{value:e._id},e.designation)})))),l.a.createElement("div",{id:"11"},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,type:"number",name:"mobile",label:"Mobile Number",id:"mobile",value:this.state.mobile,onChange:function(t){return e.handleInputChangeValue(t,11)},onBlur:function(t){return e.checkMobile(t)}})),l.a.createElement("div",{id:"12"},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:!0,name:"blood_group",label:"Blood Group",id:"blood_group",value:this.state.blood_group,onChange:function(t){return e.handleInputChangeValue(t,12)}})),l.a.createElement("div",{id:"13",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:i},l.a.createElement(fa.a,{htmlFor:"head_sub"},"Head/Sub"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.head_sub,onChange:function(t){return e.handleInputChangeValue(t,13)},labelWidth:this.state.labelWidthHS,inputProps:{name:"head_sub",id:"head_sub"}},l.a.createElement(se.a,{value:"Head"},"Head"),l.a.createElement(se.a,{value:"Sub"},"Sub")))),l.a.createElement("div",{id:"14",style:{paddingLeft:"5px",paddingRight:"5px",display:"none"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:i},l.a.createElement(fa.a,{htmlFor:"superiorId"},"Supervisor"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.superiorId,onChange:function(t){return e.handleInputChangeValue(t,14)},labelWidth:this.state.labelWidthSup,inputProps:{name:"superiorId",id:"superiorId"}},this.state.getAllSuperVisor.length>0&&this.state.getAllSuperVisor.map(function(e){return l.a.createElement(se.a,{value:e._id},e.employee_id)})))),l.a.createElement("div",{id:"15",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:i},l.a.createElement(fa.a,{htmlFor:"type"},"Type"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.type,onChange:function(t){return e.handleInputChangeValue(t,15)},labelWidth:this.state.labelWidth,inputProps:{name:"type",id:"type"}},l.a.createElement(se.a,{value:"Employee"},"Employee."),l.a.createElement(se.a,{value:"Contractor"},"Contractor.")))),l.a.createElement("div",{id:"16",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:{minWidth:200}},l.a.createElement(fa.a,{htmlFor:"type"},"Employee Type"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.employeetype,onChange:function(t){return e.handleInputChangeValue(t,16)},labelWidth:this.state.labelWidthEmp,inputProps:{name:"employeetype",id:"employeetype"}},l.a.createElement(se.a,{value:"Probation"},"Probation."),l.a.createElement(se.a,{value:"Confirmed"},"Confirmed."),l.a.createElement(se.a,{value:"Trainee"},"Trainee.")))),l.a.createElement("div",{id:"17",style:{display:"none"}},l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",type:"number",name:"period",label:"Period",id:"period",value:this.state.period,onChange:function(t){return e.handleInputChangeValue(t,17)}}))),l.a.createElement("div",null,l.a.createElement(cn.a,{nodes:this.state.getAllMenu,checked:this.state.checked,expanded:this.state.expanded,onCheck:function(t){return e.setState({checked:t})},onExpand:function(t){return e.setState({expanded:t})},icons:s}),l.a.createElement(Q.a,{style:{},type:"submit",variant:"contained",color:"primary"},"Submit"))))}}]),t}(n.Component),jn=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{userAdd:function(e,t){return function(t){w.post("add-employee",e,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?an("New user has been added successfully"):an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Rn);N.a.settings={theme:"ios"};var Dn=[],qn=[],Nn={width:350},Pn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={getAlldesignation:[],getAlldesignationBySearch:[],getmodulename:[],getAllModule:[],department:"",designation:"",moduleId:"",modulename:"",delIndex:-1,editIndex:-1,searchItemIndex:-1,shortname:"",searchBy:"",loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a.handleSearch=a.handleSearch.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n,l,i){this.setState({open:!0,designation:e,moduleId:t,modulename:a,desigid:n,shortname:l,editIndex:i})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,desigid:e,delIndex:t})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleInputChangeValueDept",value:function(e,t){console.log("dept--------"+e.target);var a=e?e.target.name:e,n=e?e.target.value:e,l=n.split("_");console.log(a,"::",n),console.log(l),this.setState(Object(y.a)({},a,n)),this.setState({modulename:l[1]}),this.setState({moduleId:l[0]});for(var i=0;i<this.state.getAllModule.length;i++)console.log("JSON.stringify(desigNameArray.pop(i) --- "+i+" "+JSON.stringify(Dn.pop(i))+" "+n),JSON.stringify(qn.pop(i))==n&&(console.log("entered"),this.state.id=n)}},{key:"fetchmodule",value:function(){var e,t=this;console.log("hhh"+JSON.stringify(localStorage.getItem("subscription")));var a=localStorage.getItem("subscription");console.log("subscripti"+a),fetch(ne.BASE_URL+"subscriptionbyId/"+a,(e={data:"planName"},Object(y.a)(e,"data","price"),Object(y.a)(e,"data","subscriptionId"),Object(y.a)(e,"method","GET"),Object(y.a)(e,"headers",{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}),e)).then(function(e){return e.json()}).then(function(e){console.log(e),t.setState({getAllModule:e.subscription});for(var a=0;a<e.subscription.length;a++)Dn.push(e.subscription[a].planName),qn.push(e.subscription[a].subscriptionId)})}},{key:"fetchAllDesignation",value:function(){var e=this;console.log("Calling --- "),this.setState({loading:!0},function(){fetch(ne.BASE_URL+"designation",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log("hello --- "+t.Designation),e.setState({getAlldesignation:t.Designation}),t.Designation.length<=0&&(e.state.loading=!1);for(var a=0;a<t.Designation.length;a++){var n;Dn.push(t.Designation[a].moduleId),console.log("ddd"+Dn),fetch(ne.BASE_URL+"subscriptionbyId/"+Dn,(n={data:"planName"},Object(y.a)(n,"data","price"),Object(y.a)(n,"data","subscriptionId"),Object(y.a)(n,"method","GET"),Object(y.a)(n,"headers",{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}),n)).then(function(e){return e.json()}).then(function(t){console.log("hi --- "+JSON.stringify(t.subscription)),e.setState({getmodulename:t.subscription,loading:!1})})}})}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllDesignation(),this.fetchmodule()}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.moduleId||""==this.state.designation)a="Please Fill required feilds",N.a.alert({message:a});else{console.log("hghd"+this.state.department);this.state.department.split("_");var t={moduleId:this.state.moduleId,modulename:this.state.modulename,designation:this.state.designation,shortname:this.state.shortname,dbname:localStorage.getItem("dbname"),designid:this.state.desigid};console.log("llll"+t),this.state.getAlldesignation[this.state.editIndex].designation=this.state.designation,this.state.getAlldesignation[this.state.editIndex].desigid=this.state.desigid,this.state.getAlldesignation[this.state.editIndex].moduleId=this.state.moduleId,this.state.getAlldesignation[this.state.editIndex].modulename=this.state.modulename,this.state.getAlldesignation[this.state.editIndex].shortname=this.state.shortname,this.props.editDesignation(t,this.props.history),this.handleClose()}var a}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault();var a={desigid:this.state.desigid};this.setState(function(e){return{getAlldesignation:e.getAlldesignation.filter(function(e,a){return a!==t.state.delIndex})}}),this.props.designationDelete(a,this.props.history),this.handleClose()}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAlldesignationBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAlldesignationBySearch=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAlldesignation.length;t++)if(this.state.searchBy===this.state.getAlldesignation[t].designation){this.state.searchItemIndex=t,this.state.getAlldesignationBySearch.push(this.state.getAlldesignation[t]),e=1,this.forceUpdate();break}if(0==e)for(var a=0;a<this.state.getAlldesignation.length;a++)if(this.state.searchBy===this.state.getAlldesignation[a].shortname){this.state.searchItemIndex=a,this.state.getAlldesignationBySearch.push(this.state.getAlldesignation[a]),e=1,this.forceUpdate();break}if(0==e)for(var n=0;n<this.state.getAlldesignation.length;n++)this.state.searchBy===this.state.getAlldesignation[n].modulename&&(this.state.searchItemIndex=n,this.state.getAlldesignationBySearch.push(this.state.getAlldesignation[n]),e=1,this.forceUpdate())}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state),a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={cursor:"pointer",color:"red"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , want to delete subscription?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"primary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , want to delete subscription?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Subscription"),l.a.createElement("form",null,l.a.createElement($e.a,{style:{minWidth:150}},l.a.createElement(fa.a,{htmlFor:"department"},"Deparment"),l.a.createElement(ya.a,{value:this.state.department,onChange:function(t){return e.handleInputChangeValueDept(t,9)},inputProps:{name:"department",id:"department"}},this.state.getAllModule.map(function(e){return l.a.createElement(se.a,{value:e.subscriptionId+"_"+e.planName},e.planName)}))),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"designation",label:"Designation",name:"designation",value:this.state.designation,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"shortname",label:"Short Name",name:"shortname",value:this.state.shortname,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:Nn,label:"Search by Designation/Short Name/Module",id:"searchBy",name:"searchBy",value:this.state.searchBy,autoComplete:"off",onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch})))}})),this.state.getAlldesignationBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Designation"),l.a.createElement(nt.a,{style:o},"Short Name"),l.a.createElement(nt.a,{style:o},"Module Name"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAlldesignationBySearch&&this.state.getAlldesignationBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.designation),l.a.createElement(nt.a,{style:r},t.shortname),l.a.createElement(nt.a,{style:r},t.modulename),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(a){return e.handleClick(t.designation,t.moduleId,t.modulename,t._id,t.shortname,e.state.searchItemIndex)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(a){return e.handleClickDelete(t._id,e.state.searchItemIndex)}})))}))):[this.state.getAlldesignation.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Designation"),l.a.createElement(nt.a,{style:o},"Short Name"),l.a.createElement(nt.a,{style:o},"Module Name"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAlldesignation&&this.state.getAlldesignation.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.designation),l.a.createElement(nt.a,{style:r},t.shortname),l.a.createElement(nt.a,{style:r},t.modulename),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t.designation,t.moduleId,t.modulename,t._id,t.shortname,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickDelete(t._id,a)}})))}))):l.a.createElement("h3",null,"No list to be displayed")])}}]),t}(n.Component),Bn=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{editDesignation:function(e,t){return function(t){console.log("des edit module mod id"+e.moduleId),console.log("des edit module name"+e.modulename),console.log("des edit module desig"+e.designation),console.log("des edit module id"+e.designid);var a=e.designid;w.put("designation/"+a,e,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?an("Designation is edited successfully"):an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}},designationDelete:function(e,t){return function(t){console.log("des----"+e);var a=e.desigid;w.post("designation/"+a,e,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?an("Designation is deleted successfully"):an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Pn);function Fn(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Vn=[],Ln=[],Un=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({department:""}),e.setState({designation:""}),e.setState({shortname:""}),e.setState({head_sub:""})},e.state={designation:"",department:"",getAllModule:[],showChild:!0,shortname:"",head_sub:"",loading:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchmodule",value:function(){var e=this;console.log("hhh"+JSON.stringify(localStorage.getItem("subscription")));var t=localStorage.getItem("subscription");console.log("subscripti"+t),this.setState({loading:!0},function(){var a;fetch(ne.BASE_URL+"subscriptionbyId/"+t,(a={data:"planName"},Object(y.a)(a,"data","price"),Object(y.a)(a,"data","subscriptionId"),Object(y.a)(a,"method","GET"),Object(y.a)(a,"headers",{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}),a)).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllModule:t.subscription,loading:!1});for(var a=0;a<t.subscription.length;a++)Vn.push(t.subscription[a].planName),Ln.push(t.subscription[a].subscriptionId)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchmodule()}},{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleInputChangeValueDept",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,"::",n),this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getAllModule.length;l++)console.log("JSON.stringify(desigNameArray.pop(i) --- "+l+" "+JSON.stringify(Vn.pop(l))+" "+n),JSON.stringify(Ln.pop(l))==n&&(console.log("entered"),this.state.id=n)}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""==this.state.department||""==this.state.designation||""==this.state.shortname||""==this.state.head_sub)Fn("Please Fill required feilds");else{var a={moduleId:this.state.department,designation:this.state.designation,shortname:this.state.shortname,head_sub:this.state.head_sub,dbname:localStorage.getItem("dbname")};console.log("DATA send --- "+JSON.stringify(a)),w.post("designation",a,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?Fn("Designation is added successfully"):Fn(e.data.message),t.reloadChild()}).catch(function(e){return console.log(e)})}this.resetField()}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state.open,{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5}),a={minWidth:150,marginLeft:15};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:a},l.a.createElement(fa.a,{htmlFor:"department"},"Deparment"),l.a.createElement(ya.a,{value:this.state.department,onChange:function(t){return e.handleInputChangeValueDept(t,9)},inputProps:{name:"department",id:"department"}},this.state.getAllModule.map(function(e){return l.a.createElement(se.a,{value:e.subscriptionId},e.planName)}))),l.a.createElement($e.a,{style:a},l.a.createElement(fa.a,{htmlFor:"head_sub"},"Head/Sub"),l.a.createElement(ya.a,{value:this.state.head_sub,onChange:function(t){return e.handleInputChangeValue(t,1)},inputProps:{name:"head_sub",id:"head_sub"}},l.a.createElement(se.a,{value:"Head"},"Head"),l.a.createElement(se.a,{value:"Sub"},"Sub")))),l.a.createElement("br",null),l.a.createElement("div",{id:"2"},l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:!0,id:"designation",label:"Designation",name:"designation",value:this.state.designation,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement("div",{id:"3"},l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:!0,id:"shortname",label:"Short Name",name:"shortname",value:this.state.shortname,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),l.a.createElement("br",null),this.state.showChild?l.a.createElement(Bn,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),Mn=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{designationAdd:function(e,t){return function(t){w.post("designation",e,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?an("Desination is added successfully"):an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Un),Tn=null,Wn={width:350},Qn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a.onChangeHandler=function(e){var t,n=e.target.files;t=e.target.files[0].name.slice(2+(e.target.files[0].name.lastIndexOf(".")-1>>>0)),a.setState({ext:t}),console.log("File Name : "+e.target.files[0].name+" "+t);var l=new FileReader;l.readAsDataURL(n[0]),l.onload=function(e){console.log("Files --- "+e.target.result.split(",").pop()),Tn={file:e.target.result.split(",").pop()}},a.setState({selectedFile:e.target.files[0],loaded:0})},a.resetField=function(){a.setState({newissue:""})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={getAlltickets:[],getAllticketsBySearch:[],issue_object:[],issue:[],newissue:"",selectedFile:null,delIndex:-1,editIndex:-1,searchItemIndex:-1,ext:"",loading:!1},a.handleClick=a.handleClick.bind(Object(V.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleSearch=a.handleSearch.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchTicket",value:function(){var e=this;console.log("Calling --- "),this.setState({loading:!0},function(){fetch(ne.BASE_URL+"ticket",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log("hello ticket--- "+t.Tickets),e.setState({getAlltickets:t.Tickets,loading:!1}),console.log("Details : "+JSON.stringify(t.Tickets))})}),console.log("Calling --- End ---  ")}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchTicket()}},{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleClick",value:function(e,t,a,n,l,i){this.setState({open:!0,ticketid:e,issue:t.children,response:t.children[0].response,ticket_primary:n,ticketUnique:l,editIndex:i,issue_object:t.children})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("file",this.state.selectedFile);var a={issue:this.state.newissue,dbname:localStorage.getItem("dbname"),customer_id:localStorage.getItem("companyid"),file:Tn,ticketUnique:this.state.ticketUnique,ticket_primary:this.state.ticket_primary,extension:this.state.ext};console.log("Data --- "+t),this.forceUpdate(),this.props.ticketUpdate(a,this.props.history),this.resetField()}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllticketsBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllticketsBySearch=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAlltickets.length;t++)this.state.searchBy===this.state.getAlltickets[t].status&&(this.state.searchItemIndex=t,this.state.getAllticketsBySearch.push(this.state.getAlltickets[t]),e=1,this.forceUpdate());if(0==e)for(var a=0;a<this.state.getAlltickets.length;a++)for(var n=this.state.getAlltickets[a].children.length,l=0;l<n;l++)this.state.searchBy===this.state.getAlltickets[a].children[l].issue&&(this.state.searchItemIndex=a,this.state.getAllticketsBySearch.push(this.state.getAlltickets[a]),e=1,this.forceUpdate())}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state),a=t.open,n=(t.open1,t.setOpen,{cursor:"pointer",color:"blue"}),i={fontWeight:"bold",fontSize:"15px",color:"black"},s={fontSize:"12px"},o=Object(z.a)("",2),r=o[0],c=(o[1],{textAlign:"right"}),d={textAlign:"left"},u={margin:10,color:"#fff",align:"left",backgroundColor:zt.a[500]},m={margin:10,color:"#fff",backgroundColor:Gt.a[500]};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:a,onClose:this.handleClose,scroll:r,"aria-labelledby":"scroll-dialog-title"},l.a.createElement(U.a,{id:"scroll-dialog-title"},"Ticket Detail",l.a.createElement(le.a,{style:{float:"right"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,{dividers:"paper"===r},this.state.issue&&this.state.issue.map(function(e,t){return l.a.createElement("div",null,l.a.createElement(T.a,null,e.issue.length>0?l.a.createElement("div",null,l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(Jt.a,{style:m},"I")),l.a.createElement(Yt.a,{display:"flex",justifyContent:"flex-end"},l.a.createElement("div",{style:d},e.issue,e.filename.length>0?l.a.createElement("div",{style:{color:"blue"}},l.a.createElement("a",{href:ne.BASE_URL+"uploads/"+e.filename},"file")):""))):""),l.a.createElement(be.a,{variant:"fullWidth"}),l.a.createElement(T.a,null,e.response.length>0?l.a.createElement("div",null,l.a.createElement(Jt.a,{style:u},"S.A"),l.a.createElement(Yt.a,{display:"flex",justifyContent:"flex-start"},l.a.createElement("div",{style:c},e.response,e.responsefile.length>0?l.a.createElement("div",{style:{color:"blue"}},l.a.createElement("a",{href:ne.BASE_URL+"uploads/"+e.responsefile},"file")):""))):""),l.a.createElement(be.a,{variant:"fullWidth"}))}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("form",{className:"reg",noValidate:!0,encType:"multipart/form-data"},l.a.createElement(J.a,{style:{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5},variant:"outlined",margin:"dense",required:!0,id:"issue",label:"issue",name:"newissue",value:this.state.newissue,autoFocus:!0,onChange:function(t){return e.handleInputChangeValue(t,1)}}),l.a.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler}),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:Wn,label:"Search by Issue/Status",id:"searchBy",name:"searchBy",value:this.state.searchBy,autoComplete:"off",onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch})))}})),this.state.getAllticketsBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:i},"Issue"),l.a.createElement(nt.a,{style:i},"Details"),l.a.createElement(nt.a,{style:i},"status"),l.a.createElement(nt.a,{style:i},"View"))),l.a.createElement(lt.a,null,this.state.getAllticketsBySearch&&this.state.getAllticketsBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.children[0].issue),l.a.createElement(nt.a,{style:s},t.children[0].details),l.a.createElement(nt.a,{style:s},t.status),l.a.createElement(nt.a,{style:s},l.a.createElement(jt.a,{fontSize:"small",style:n,onClick:function(a){return e.handleClick(t.ticketId,t,t.children.response,t._id,t.ticketUnique,e.state.searchItemIndex)}})))}))):[this.state.getAlltickets.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:i},"Issue"),l.a.createElement(nt.a,{style:i},"Details"),l.a.createElement(nt.a,{style:i},"status"),l.a.createElement(nt.a,{style:i},"View"))),l.a.createElement(lt.a,null,this.state.getAlltickets&&this.state.getAlltickets.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.children[0].issue),l.a.createElement(nt.a,{style:s},t.children[0].details),l.a.createElement(nt.a,{style:s},t.status),l.a.createElement(nt.a,{style:s},l.a.createElement(jt.a,{fontSize:"small",style:n,onClick:function(n){return e.handleClick(t.ticketId,t,t.children.response,t._id,t.ticketUnique,a)}})))}))):l.a.createElement("h3",null,"No list to be displayed")])}}]),t}(n.Component),Jn=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{ticketUpdate:function(e,t){return function(t){console.log("ticketUpdate---"+JSON.stringify(e)),w.put("ticket/"+e.ticket_primary,e,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?an("Ticket is updated successfully"):an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Qn),zn=null,Gn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).loadChild=function(){a.setState({childComponent:!1}),setTimeout(function(){a.setState({childComponent:!0})},100),console.log("Reload Child Invoked")},a.onChangeHandler=function(e){var t,n=e.target.files;t=e.target.files[0].name.slice(2+(e.target.files[0].name.lastIndexOf(".")-1>>>0)),a.setState({ext:t}),console.log("File Name : "+e.target.files[0].name+" "+t);var l=new FileReader;l.readAsDataURL(n[0]),l.onload=function(e){console.log("Files --- "+e.target.result.split(",").pop()),zn={file:e.target.result.split(",").pop()}},a.setState({selectedFile:e.target.files[0],loaded:0})},a.resetField=function(){a.setState({issue:""}),a.state.details=""},a.state={issue:"",details:"",childComponent:!0,selectedFile:null,ext:""},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("file",this.state.selectedFile);var a={issue:this.state.issue,details:this.state.details,dbname:localStorage.getItem("dbname"),customer_id:localStorage.getItem("companyid"),file:zn,extension:this.state.ext};console.log("Data --- "+t),this.forceUpdate(),this.props.ticketAdd(a,this.props.history),this.resetField(),this.loadChild()}},{key:"render",value:function(){var e=this;this.state.open;return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit,encType:"multipart/form-data"},l.a.createElement("div",{id:"2"},l.a.createElement(J.a,{style:{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5},variant:"outlined",margin:"dense",required:!0,id:"issue",label:"issue",name:"issue",value:this.state.issue,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement("div",null,l.a.createElement("textarea",{style:{width:300,height:150,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},variant:"outlined",margin:"normal",required:!0,id:"details",placeholder:"Details",multiline:!0,name:"details",value:this.state.details,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",{id:"2"},l.a.createElement("input",{type:"file",name:"file",onChange:this.onChangeHandler})),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),l.a.createElement("br",null),this.state.childComponent?l.a.createElement(Jn,{loadChild:this.loadChild}):null)}}]),t}(n.Component),Yn=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{ticketAdd:function(e,t){return function(t){console.log("ticketAdd---"+e),w.post("ticket",e,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?an("Ticket is added successfully"):an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(Gn),Kn=0,Hn=(n.Component,a(7)),Xn=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={getMenuPermission:JSON.parse(localStorage.getItem("menu")||"[]")},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e){this.setState(function(t){return Object(y.a)({},e,!t[e])})}},{key:"handler",value:function(e){console.log("I am in handler"),console.log("Menu --- "+JSON.stringify(e))}},{key:"render",value:function(){var e=this.props,t=e.classes;e.drawerOpen,e.menuOptions;return l.a.createElement("div",{className:t.list},l.a.createElement(fe.a,{variant:"persistent",anchor:"left",open:!0,classes:{paper:t.list}},l.a.createElement("div",null,l.a.createElement("p",null,"Helo u r here"))))}}]),t}(n.Component),Zn=(Object(Hn.a)({list:{width:250},links:{textDecoration:"none"},menuHeader:{paddingLeft:"30px"}})(Xn),[]),$n=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state=(a={description:"",planName:"",price:"",duedate:"",subscriptions:[],getAllPlan:[],plans:[]},Object(y.a)(a,"price",[]),Object(y.a)(a,"delIndex",-1),Object(y.a)(a,"editIndex",-1),a),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchAllPlans",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"admin-publish-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.publish.length),e.setState({getAllPlan:t.publish});for(var a=0;a<t.publish.length;a++)Zn.push(t.publish[a].description),e.setState({id:t.publish[a].publishId}),e.setState({description:t.publish[a].description});console.log("array"+Zn),e.setState({plans:Zn}),console.log("Plan Names --- "+e.state.getAllPlan)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllPlans()}},{key:"render",value:function(){var e=this.state,t=(e.open,e.open1,{fontWeight:"bold",fontSize:"15px",color:"black"}),a={width:600,height:150,marginLeft:2,marginRight:2,marginTop:2,resize:"none"};return l.a.createElement("div",null,l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:t},"Sl no"),l.a.createElement(nt.a,{style:t},"Description"))),l.a.createElement(lt.a,null,this.state.getAllPlan&&this.state.getAllPlan.map(function(e,t){return l.a.createElement(at.a,null,l.a.createElement(nt.a,null,++t),l.a.createElement(nt.a,null,l.a.createElement("textarea",{style:a,variant:"outlined",margin:"normal",required:!0,readOnly:!0,id:"description",placeholder:"Discription",multiline:!0,name:"description",value:e.description})))}))))}}]),t}(n.Component),el=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})($n);N.a.settings={theme:"ios"};var tl=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({description:""})},a.state={showChild:!0,description:""},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log("Child calling ------ ")}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={description:this.state.description};this.forceUpdate(),w.post("admin-publish-add",a,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(t.resetField(),console.log(e.data.value),console.log(e.data.message),1==e.data.value){t.showAlert("Broadcast is publish successfully")}else t.showAlert(e.data.message);t.reloadChild()}).catch(function(e){return console.log(e)})}},{key:"handleInputChangeValueDept",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,"::",a),this.setState(Object(y.a)({},t,a))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Publish Broadcast"),l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",null,l.a.createElement("textarea",{style:{width:500,height:150,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},variant:"outlined",margin:"normal",required:!0,id:"description",placeholder:"Discription",multiline:!0,name:"description",value:this.state.description,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("br",null),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),this.state.showChild?l.a.createElement(el,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),al=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(tl),nl=a(558),ll=a(560),il=a(559),sl=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleClose=function(){e.setState({open:!1})},e.state={getAllModule:[],values:"",loading:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchmodule",value:function(){var e=this;console.log("hhh"+JSON.stringify(localStorage.getItem("subscription")));var t=localStorage.getItem("subscription");this.setState({loading:!0},function(){var a;fetch(ne.BASE_URL+"subscriptionbyId/"+t,(a={data:"planName"},Object(y.a)(a,"data","price"),Object(y.a)(a,"data","subscriptionId"),Object(y.a)(a,"method","GET"),Object(y.a)(a,"headers",{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}),a)).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.subscription.length),e.setState({loading:!1,getAllModule:t.subscription})})})}},{key:"fetchcompdet",value:function(){var e=this;console.log("hhh"+JSON.stringify(localStorage.getItem("subscription")));localStorage.getItem("subscription");this.setState({loading:!0},function(){var t;fetch(ne.BASE_URL+"compwithsub"+(t={data:"planName"},Object(y.a)(t,"data","price"),Object(y.a)(t,"data","subscriptionId"),Object(y.a)(t,"method","POST"),Object(y.a)(t,"headers",{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}),t)).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.subscription.length),e.setState({loading:!1,getAllModule:t.subscription})})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "+ne.BASE_URL),this.fetchmodule()}},{key:"selectModule",value:function(e){this.setState({open:!0}),alert("Plan name --- "+e)}},{key:"handleSubmit",value:function(e){e.preventDefault(),alert("Processing...")}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"render",value:function(){var e=this,t=(this.state.open,this.state.loading,{minWidth:130,float:"left",marginRight:20,backgroundColor:"#808080"}),a={height:0,paddingTop:"75%",marginTop:"30"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement("div",null,this.state.getAllModule.map(function(n){return l.a.createElement(nl.a,{style:t,onClick:function(t){return e.selectModule(n.planName)}},l.a.createElement(il.a,{style:a,image:ne.BASE_URL+"uploads/subscription/"+n.filename,title:n.planName}),l.a.createElement(ll.a,null,l.a.createElement(W.a,{variant:"h9",component:"h9"},n.planName)))})))}}]),t}(n.Component),ol=l.a.forwardRef(function(e,t){return l.a.createElement(gt.a,Object.assign({direction:"up",ref:t},e))}),rl=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleClose=function(){e.state.open1=!1,e.forceUpdate()},e.resetField=function(){e.setState({email:""}),e.setState({password:""}),e.setState({oldpassword:""}),e.setState({confirmpassword:""})},e.state={email:"",password:"",oldpassword:"",confirmpassword:"",open1:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.state.password===this.state.confirmpassword){var t={email:this.state.email,oldpassword:this.state.oldpassword,password:this.state.password};this.props.changePass(t,this.props.history),this.resetField()}else console.log("Testing --- "),this.state.open1=!0,this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.open,t.open1),n={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2};return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Change Password"),l.a.createElement("form",{className:"reg",noValidate:!0},l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,inputProps:{"padding-top":"0","padding-bottom":"0"},id:"email",type:"email",label:"Email Address",name:"email",value:this.state.email,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,name:"oldpassword",value:this.state.oldpassword,label:"Old Password",type:"password",id:"password",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,name:"password",value:this.state.password,label:"New Password",type:"password",id:"newpassword",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:n,variant:"outlined",margin:"dense",required:!0,name:"confirmpassword",value:this.state.confirmpassword,label:"Confirm Password",type:"password",id:"confirmpassword",onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement(Q.a,{style:{marginTop:3},type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")),l.a.createElement(L.a,{open:a,TransitionComponent:ol,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},l.a.createElement(M.a,null,l.a.createElement(T.a,{id:"alert-dialog-slide-description"},"New Password and Confirm Password is not same.")),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"OK"))))}}]),t}(n.Component),cl=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{changePass:function(e,t){return function(t){w.post("admin-changepass",e,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){an("Password is updated successfully")}else an(e.data.message)}).catch(function(e){t({type:p,payload:e.response.data})})}}})(rl);a(453);N.a.settings={theme:"ios"};var dl=null,ul=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({companyName:localStorage.getItem("companyName")}),a.setState({contact:localStorage.getItem("contact")})},a.state={file:"",adminid:localStorage.getItem("id"),companyName:localStorage.getItem("companyName"),contact:localStorage.getItem("contact"),ext:"",showChild:!0,disabled:!0,disabled1:!0},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(new FormData).append("file",this.state.file);var a={companyName:this.state.companyName,contact:this.state.contact,file:dl,extension:this.state.ext,adminid:this.state.adminid,profImg:localStorage.getItem("profilepic")};console.log("handle uploading-",a),w.post("admin-account/",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(console.log("Response --- "+JSON.stringify(e.data.admins.companyName)),1==e.data.value){localStorage.setItem("companyName",e.data.admins.companyName),localStorage.setItem("contact",e.data.admins.contact),localStorage.setItem("profilepic",e.data.admins.profile),t.resetField();t.showAlert("Profile is updated successfully"),t.forceUpdate(),t.setState({disabled:!0}),t.setState({disabled1:!0})}else t.showAlert(e.data.message);t.reloadChild()}).catch(function(e){return console.log(e)})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"_handleImageChange",value:function(e){var t=this;e.preventDefault();var a,n=new FileReader,l=e.target.files[0];a=e.target.files[0].name.slice(2+(e.target.files[0].name.lastIndexOf(".")-1>>>0)),this.setState({ext:a}),n.onloadend=function(e){t.setState({file:l,imagePreviewUrl:n.result}),console.log("Files --- "+e.target.result),dl={file:e.target.result.split(",").pop()}},n.readAsDataURL(l)}},{key:"handleGameClik",value:function(){this.setState({disabled:!this.state.disabled})}},{key:"handleGameClik1",value:function(){this.setState({disabled1:!this.state.disabled1})}},{key:"render",value:function(){var e=this,t=this.state.imagePreviewUrl,a=null;if(console.log("PICTURE --- "+localStorage.getItem("profilepic")),"img"!=localStorage.getItem("profilepic")){console.log("ur here");var n="http://localhost:5000/uploads/profile/"+localStorage.getItem("profilepic");a=l.a.createElement("img",{src:n,style:{width:"190px",height:"190px",borderRadius:"100px"}}),t&&(console.log("ur here if else"),a=l.a.createElement("img",{src:t,style:{width:"190px",height:"190px",borderRadius:"100px"}}))}else t?(console.log("ur here if else --- else"),a=l.a.createElement("img",{src:t,style:{width:"190px",height:"190px",borderRadius:"100px"}})):(console.log("ur here else"),a=l.a.createElement("div",{className:"previewText",style:{width:"190px",height:"190px",borderRadius:"100px",padding:"20px"}},"Please select an Image for Preview"));var i={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2},s={cursor:"pointer"};return l.a.createElement("div",{className:"previewComponent"},l.a.createElement("div",{className:"imgPreview"},a),l.a.createElement("form",{encType:"multipart/form-data"},l.a.createElement("input",{className:"fileInput",type:"file",onChange:function(t){return e._handleImageChange(t)},style:{width:"200px"}}),l.a.createElement("div",null,l.a.createElement(J.a,{style:i,variant:"outlined",margin:"dense",required:!0,disabled:this.state.disabled?"disabled":"",id:"companyName",label:"Company Name",name:"companyName",value:this.state.companyName,onChange:function(t){return e.handleInputChangeValue(t)},autoFocus:!0}),l.a.createElement("a",{onClick:this.handleGameClik.bind(this)}," ",l.a.createElement(ot.a,{style:s})," ")),l.a.createElement("div",null,l.a.createElement(J.a,{style:i,variant:"outlined",margin:"dense",required:!0,disabled:this.state.disabled1?"disabled":"",id:"contact",label:"Contact Number",name:"contact",value:this.state.contact,onChange:function(t){return e.handleInputChangeValue(t)},autoFocus:!0}),l.a.createElement("a",{onClick:this.handleGameClik1.bind(this)}," ",l.a.createElement(ot.a,{style:s})," ")),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component),ml=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(ul);function hl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function gl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hl(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}N.a.settings={theme:"ios"};var pl={display:"flex",flexWrap:"wrap"},fl={minWidth:220},yl={textAlign:"center",paddingTop:"2"},bl={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},vl={width:520,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},El=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).resetField=function(){e.setState({lineItems:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}]}),e.state.rejectreason=""},e.state={getAllRequisition:[],getAllItem:[],itemName:[],itemId:[],dispStatus:!1,lineItems:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}],comboItems:[{name:"",id:""}],rejectreason:"",labelWidth:85},e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchAllRequisition",value:function(){var e=this,t=localStorage.getItem("id");console.log("requisitor_id --- "+t),fetch(ne.BASE_URL+"requisition-list",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({requisitor_id:t})}).then(function(e){return e.json()}).then(function(t){console.log("Data Comming --- "+JSON.stringify(t)),e.setState({getAllRequisition:t.RequisitionList[la.requisitionIndex].children}),console.log("res.RequisitionList[passvalue.requisitionIndex] --- "+JSON.stringify(t.RequisitionList[la.requisitionIndex]));for(var a=0;a<t.RequisitionList[la.requisitionIndex].children.length;a++)console.log("Value Comming --- "+JSON.stringify(t.RequisitionList[la.requisitionIndex].children)+" --- "+JSON.stringify(t.RequisitionList[la.requisitionIndex].children[a].item_name.name)),e.state.lineItems.push({item_id:t.RequisitionList[la.requisitionIndex].children[a].item_name._id,item_name:t.RequisitionList[la.requisitionIndex].children[a].item_name.name,item_description:t.RequisitionList[la.requisitionIndex].children[a].item_description,purpose:t.RequisitionList[la.requisitionIndex].children[a].purpose,no_of_items:t.RequisitionList[la.requisitionIndex].children[a].no_of_items});e.state.rejectreason=t.RequisitionList[la.requisitionIndex].comment,e.state.dispStatus=!0,console.log("Requisition List --- "+JSON.stringify(e.state.lineItems)+" --- "+la.requisitionIndex)}).catch(function(e){console.log("ERROR --- "+e)})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllRequisition(),this.fetchAllItem()}},{key:"fetchAllItem",value:function(){var e=this;console.log("hhh"+JSON.stringify(localStorage.getItem("subscription")));localStorage.getItem("subscription");fetch(ne.BASE_URL+"stock-list",{method:"GET",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllItem:t.Stock}),console.log("All Item --- "+JSON.stringify(t.Stock));for(var a=0;a<t.Stock.length;a++)e.state.itemName.push(t.Stock[a].name),e.state.itemId.push(t.Stock[a]._id),e.state.comboItems.push({name:t.Stock[a].name,id:t.Stock[a]._id});e.state.comboItems.splice(0,1);console.log("Name Id List --- "+JSON.stringify(e.state.comboItems))}).catch(function(e){return console.log(e)})}},{key:"addItem",value:function(){this.setState(function(e){return{lineItems:[].concat(Object(ea.a)(e.lineItems),[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}])}})}},{key:"removeItem",value:function(e){var t=Object(ea.a)(this.state.lineItems);t.splice(e,1),this.setState({lineItems:t}),this.props.handlerfordata(this.state.lineItems)}},{key:"handleInputChangeValue",value:function(e,t){var a,n=t?t.target.name:t,l=t?t.target.value:t;console.log(n,"::",l),this.setState(Object(y.a)({},n,l));var i=t.target,s=i.name,o=i.value,r=Object(ea.a)(this.state.lineItems);if("item_name"===n){console.log("OK");for(var c=0;c<this.state.itemName.length;c++)if(l===this.state.itemName[c]){a=this.state.itemId[c],console.log("ID --- "+a);var d=a;r[e]=gl({},r[e],Object(y.a)({},"item_id",d)),r[e]=gl({},r[e],Object(y.a)({},s,o)),this.setState({lineItems:r}),console.log("lineItems --- "+JSON.stringify(r));break}}else r[e]=gl({},r[e],Object(y.a)({},s,o)),this.setState({lineItems:r}),console.log("lineItems --- "+JSON.stringify(r))}},{key:"handleInputChangeNumber",value:function(e,t){if(""===t.target.value||/^[0-9\b]+$/.test(t.target.value)){var a=t.target,n=a.name,l=a.value;console.log("Testing ---"+n+":"+l);var i=Object(ea.a)(this.state.lineItems);i[e]=gl({},i[e],Object(y.a)({},n,l)),this.setState({lineItems:i})}}},{key:"handleAddValue",value:function(e){this.props.handlerfordata(this.state.lineItems)}},{key:"createUI",value:function(){var e=this;return this.state.lineItems.map(function(t,a){return l.a.createElement("div",{key:a},e.state.dispStatus&&a>0?l.a.createElement("div",{style:pl},l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:fl},l.a.createElement(fa.a,{htmlFor:"item_name"},"Item Name"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:t.item_name,labelWidth:e.state.labelWidth,onChange:e.handleInputChangeValue.bind(e,a),inputProps:{name:"item_name",id:"item_name"}},e.state.getAllItem.length>0&&e.state.getAllItem.map(function(e){return l.a.createElement(se.a,{value:e.name},e.name)}))),l.a.createElement("div",null,l.a.createElement(J.a,{style:bl,variant:"outlined",margin:"dense",label:"Item Description",required:!0,multiline:!0,rows:1,rowsMax:1,id:"item_description",name:"item_description",value:t.item_description,onChange:e.handleInputChangeValue.bind(e,a),onBlur:function(t){return e.handleAddValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:bl,variant:"outlined",margin:"dense",label:"Purpose",required:!0,multiline:!0,rows:1,rowsMax:1,id:"purpose",name:"purpose",value:t.purpose,onChange:e.handleInputChangeValue.bind(e,a),onBlur:function(t){return e.handleAddValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:bl,variant:"outlined",autoFocus:!0,margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",value:t.no_of_items,onChange:e.handleInputChangeNumber.bind(e,a),onBlur:function(t){return e.handleAddValue(t)}})),l.a.createElement(le.a,{"aria-label":"delete",color:"secondary",onClick:e.removeItem.bind(e,a)},l.a.createElement(_t.a,null))):"")})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:yl}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Edit Requisition \xa0",l.a.createElement(ta.a,{color:"primary",size:"small","aria-label":"add",onClick:this.addItem.bind(this)},l.a.createElement(na.a,null))),l.a.createElement("div",null,l.a.createElement(J.a,{style:vl,variant:"outlined",margin:"dense",label:"Reason of Rejection",required:!0,multiline:!0,rows:3,rowsMax:3,id:"rejectreason",name:"rejectreason",value:this.state.rejectreason,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),this.createUI()))}}]),t}(n.Component);function _l(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Sl={textAlign:"center",paddingTop:"2"},Cl={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},Il={width:350},kl={display:"flex",flexWrap:"wrap"},Al=[],xl="",Ol=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handlerfordata=function(e){console.log("Inside handlerfordata data is"),a.state.lineItems=e,console.log("My Data --- "+a.state.lineItems)},a.handleClose=function(){a.setState({open:!1,open1:!1,open2:!1,lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}]})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={lineItems:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],getAllRequisition:[],getAllRequisitionBySearch:[],getAllRequisitionBySearchItem:[],requisition_id:"",getAllItem:[],itemName:[],itemId:[],dispStatus:!1,delIndex:-1,editIndex:-1,viewIndex:-1,searchBy:"",searchItemIndex:-1,loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a.handleSearch=a.handleSearch.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClickView",value:function(e,t){if(console.log("INDEX --- "+t+" --- +++ "+e),this.setState({open2:!0,requisition_id:e,viewIndex:t}),this.state.getAllRequisitionBySearch.length>0){for(var a=0;a<this.state.getAllRequisition.length;a++)if(this.state.getAllRequisition[a]._id===e){t=a;break}for(var n=0;n<this.state.getAllRequisition[t].children.length;n++)console.log("Value Comming --- "+JSON.stringify(this.state.getAllRequisition[t].children)+" --- "+JSON.stringify(this.state.getAllRequisition[t].children[n].item_name.name)),this.state.lineItemsView.push({item_name:this.state.getAllRequisition[t].children[n].item_name.name,item_description:this.state.getAllRequisition[t].children[n].item_description,purpose:this.state.getAllRequisition[t].children[n].purpose,no_of_items:this.state.getAllRequisition[t].children[n].no_of_items})}else for(var l=0;l<this.state.getAllRequisition[t].children.length;l++)console.log("Value Comming --- "+JSON.stringify(this.state.getAllRequisition[t].children)+" --- "+JSON.stringify(this.state.getAllRequisition[t].children[l].item_name.name)),this.state.lineItemsView.push({item_name:this.state.getAllRequisition[t].children[l].item_name.name,item_description:this.state.getAllRequisition[t].children[l].item_description,purpose:this.state.getAllRequisition[t].children[l].purpose,no_of_items:this.state.getAllRequisition[t].children[l].no_of_items});this.state.lineItemsView.splice(0,1);this.state.dispStatus=!0}},{key:"handleClick",value:function(e,t){if(console.log("INDEX --- "+t),this.setState({open:!0,requisition_id:e,editIndex:t}),this.state.getAllRequisitionBySearch.length>0){for(var a=0;a<this.state.getAllRequisition.length;a++)if(this.state.getAllRequisition[a]._id===e){la.requisitionIndex=a;break}}else la.requisitionIndex=t}},{key:"handleClickDelete",value:function(e,t){console.log("requisition_id --- "+e),this.setState({open1:!0,delIndex:t}),this.state.requisition_id=e,console.log("requisition_id --- "+this.state.requisition_id)}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllRequisitionBySearch=[],this.forceUpdate())}},{key:"fetchAllRequisition",value:function(){var e=this,t=localStorage.getItem("id");this.setState({loading:!0},function(){fetch(ne.BASE_URL+"requisition-list",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({requisitor_id:t})}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllRequisition:t.RequisitionList,loading:!1});for(var a=0;a<t.RequisitionList.length;a++)Al.push(JSON.stringify(t.RequisitionList[a].status));console.log("Requisition List --- "+JSON.stringify(t.RequisitionList[0].status.length))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllRequisition()}},{key:"createUI",value:function(){if(this.state.lineItemsView.length>0)return this.state.lineItemsView.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{style:kl},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(J.a,{style:Cl,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:e.item_name,InputProps:{disabled:!0}}))),l.a.createElement("div",null,l.a.createElement(J.a,{style:Cl,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:e.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Cl,variant:"outlined",margin:"dense",label:"Item Description",required:!0,multiline:!0,rows:1,rowsMax:1,id:"item_description",name:"item_description",value:e.item_description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Cl,variant:"outlined",margin:"dense",label:"Purpose",required:!0,multiline:!0,rows:1,rowsMax:1,id:"purpose",name:"purpose",value:e.purpose,InputProps:{disabled:!0}}))))})}},{key:"handleSubmit",value:function(e,t){var a=this;t.preventDefault();var n,l=0,i=this.state.lineItems.splice(0,1);console.log("Line Items --- "+JSON.stringify(i)),"301"===e&&(n="pending"),"302"===e&&(n="submitted");var s={requisitionid:this.state.requisition_id,requisition:this.state.lineItems,status:n};console.log("Request --- "+JSON.stringify(s));for(var o=0;o<this.state.lineItems.length;o++){if(0==this.state.lineItems[o].item_name.length||0==this.state.lineItems[o].item_description.length||0==this.state.lineItems[o].purpose.length||0==this.state.lineItems[o].no_of_items.length){l=1,_l("All fields are mandatory");break}if(0==this.state.lineItems[o].no_of_items){l=1,_l("No of items must be greater than 0");break}}0==l&&w.post("requisition-update",s,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){_l("Requisition is updated successfully"),a.props.handlerfordata(a.state.lineItems)}else _l(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),console.log("this.state.requisition_id --- "+this.state.requisition_id),this.setState(function(e){return{getAllRequisition:e.getAllRequisition.filter(function(e,a){return a!==t.state.delIndex})}}),fetch(ne.BASE_URL+"requisition-delete",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({requesitionid:this.state.requisition_id})}).then(function(e){return e.json()}).then(function(e){console.log("DATA --- "+e+" --- "+e.value),console.log(e.message),1==e.value?_l("Requisition is deleted successfully"):_l(e.message)}).catch(function(e){}),this.handleClose()}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllRequisitionBySearch=[],this.state.getAllRequisitionBySearchItem=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllRequisition.length;t++)if(this.state.searchBy===this.state.getAllRequisition[t].requisition_no){this.state.searchItemIndex=t,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[t]),this.forceUpdate(),e=1;break}if(0==e)for(var a=0;a<this.state.getAllRequisition.length;a++){var n=this.state.getAllRequisition[a].children.length;this.state.getAllRequisitionBySearchItem=[];for(var l=0;l<n;l++)this.state.getAllRequisitionBySearchItem.push(this.state.getAllRequisition[a].children[l]),console.log("this.state.getAllRequisitionBySearchItem --- "+JSON.stringify(this.state.getAllRequisitionBySearchItem[l].item_name.name+" --- "+this.state.searchBy)),this.state.getAllRequisitionBySearchItem[l].item_name.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=a,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[a]),this.forceUpdate(),console.log("Fine --- "))}}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state),a=t.open,n=t.open1,i=t.open2,s={cursor:"pointer",color:"blue"},o={cursor:"pointer",color:"red"},r={fontWeight:"bold",fontSize:"15px",color:"black"},c={fontSize:"12px"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , want to delete subscription?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"false"},l.a.createElement(M.a,null,l.a.createElement("div",{style:{width:1e3}},l.a.createElement(El,{handlerfordata:this.handlerfordata})),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{onClick:function(t){return e.handleSubmit("301",t)},color:"primary"},"Save and Exit"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:function(t){return e.handleSubmit("302",t)},color:"primary"},"Submit"))),l.a.createElement(L.a,{open:i,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(M.a,null,l.a.createElement(T.a,null,"View Requisition Details"),l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:Sl}},this.createUI())),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Ok"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:Il,label:"Search by Requisition No. or Item Name",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch})))}})),this.state.getAllRequisitionBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},"Requisition No."),l.a.createElement(nt.a,{style:r},"Item name"),l.a.createElement(nt.a,{style:r},"Quantity"),l.a.createElement(nt.a,{style:r},"Status"),l.a.createElement(nt.a,{style:r},"View"),l.a.createElement(nt.a,{style:r},"Edit"),l.a.createElement(nt.a,{style:r},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllRequisitionBySearch.length>0&&this.state.getAllRequisitionBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:c},t.requisition_no),l.a.createElement(nt.a,{style:c},e.state.getAllRequisitionBySearch[a].children&&e.state.getAllRequisitionBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:c},e.state.getAllRequisitionBySearch[a].children&&e.state.getAllRequisitionBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:c},(t.status.replace(/"/g,""),"forwarded"===t.status.replace(/"/g,"")?"In-Progress":t.status)),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:s,onClick:function(a){return e.handleClickView(t._id,e.state.searchItemIndex)}})),l.a.createElement(nt.a,{style:c},(xl=t.status.replace(/"/g,""),"pending"===(xl=t.status.replace(/"/g,""))||"rejected"===xl?l.a.createElement(ot.a,{fontSize:"small",style:s,onClick:function(a){return e.handleClick(t._id,e.state.searchItemIndex)}}):"")),l.a.createElement(nt.a,{style:c},(xl=t.status.replace(/"/g,""),"pending"===(xl=t.status.replace(/"/g,""))||"rejected"===xl?l.a.createElement(_t.a,{fontSize:"small",style:o,onClick:function(a){return e.handleClickDelete(t._id,e.state.searchItemIndex)}}):"")))}))):[this.state.getAllRequisition.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},"Requisition No."),l.a.createElement(nt.a,{style:r},"Item name"),l.a.createElement(nt.a,{style:r},"Quantity"),l.a.createElement(nt.a,{style:r},"Status"),l.a.createElement(nt.a,{style:r},"View"),l.a.createElement(nt.a,{style:r},"Edit"),l.a.createElement(nt.a,{style:r},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllRequisition.length>0&&this.state.getAllRequisition.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:c},t.requisition_no),l.a.createElement(nt.a,{style:c},e.state.getAllRequisition[a].children&&e.state.getAllRequisition[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:c},e.state.getAllRequisition[a].children&&e.state.getAllRequisition[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:c},(t.status.replace(/"/g,""),"forwarded"===t.status.replace(/"/g,"")?"In-Progress":t.status)),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickView(t._id,a)}})),l.a.createElement(nt.a,{style:c},(xl=t.status.replace(/"/g,""),"pending"===(xl=t.status.replace(/"/g,""))||"rejected"===xl?l.a.createElement(ot.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClick(t._id,a)}}):"")),l.a.createElement(nt.a,{style:c},(xl=t.status.replace(/"/g,""),"pending"===(xl=t.status.replace(/"/g,""))||"rejected"===xl?l.a.createElement(_t.a,{fontSize:"small",style:o,onClick:function(n){return e.handleClickDelete(t._id,a)}}):"")))}))):l.a.createElement("h3",null,"No requisition list to be displayed")])}}]),t}(n.Component),wl=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Ol);function Rl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function jl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Rl(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Dl(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var ql={display:"flex",flexWrap:"wrap"},Nl={textAlign:"center",paddingTop:"2"},Pl={width:220,height:50,marginLeft:4,marginRight:4,marginTop:7,resize:"none"},Bl={width:135,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},Fl={minWidth:220},Vl=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).reloadChild=function(){a.setState({showChild:!1}),setTimeout(function(){a.setState({showChild:!0})},100),console.log("Reload Child Invoked")},a.resetField=function(){a.setState({lineItems:[{item_name:"",item_description:"",purpose:"",no_of_items:""}]}),a.setState({needed_by_date:new Date}),a.state.min_needed_by_date.setFullYear(a.state.needed_by_date.getFullYear())},a.handlerfordata=function(e){console.log("Inside handlerfordata data is from grand parent"),a.state.lineItems=e,console.log("My Data --- "+JSON.stringify(a.state.lineItems)),a.reloadChild(),a.resetField(),a.forceUpdate()},a.state={content:"Something",showChild:!0,lineItems:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],getAllItem:[],needed_by_date:new Date,min_needed_by_date:new Date,labelWidth:85},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleNeededbydateChange=a.handleNeededbydateChange.bind(Object(V.a)(a)),a.state.min_needed_by_date.setFullYear(a.state.needed_by_date.getFullYear()),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllItem()}},{key:"fetchAllItem",value:function(){var e=this;console.log("hhh"+JSON.stringify(localStorage.getItem("subscription")));localStorage.getItem("subscription");fetch(ne.BASE_URL+"stock-list",{method:"GET",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllItem:t.Stock}),console.log("All Item --- "+JSON.stringify(t.Stock))}).catch(function(e){return console.log(e)})}},{key:"addItem",value:function(){this.setState(function(e){return{lineItems:[].concat(Object(ea.a)(e.lineItems),[{item_name:"",item_description:"",purpose:"",no_of_items:""}])}})}},{key:"removeItem",value:function(e){var t=Object(ea.a)(this.state.lineItems);t.splice(e,1),this.setState({lineItems:t})}},{key:"handleInputChangeValue",value:function(e,t){var a=t?t.target.name:t,n=t?t.target.value:t;console.log(a,"::",n),this.setState(Object(y.a)({},a,n));var l=t.target,i=l.name,s=l.value,o=Object(ea.a)(this.state.lineItems);o[e]=jl({},o[e],Object(y.a)({},i,s)),this.setState({lineItems:o}),console.log("Value to send --- "+JSON.stringify(this.state.lineItems))}},{key:"handleInputChangeNumber",value:function(e,t){if(""===t.target.value||/^[0-9\b]+$/.test(t.target.value)){var a=t.target,n=a.name,l=a.value;console.log("Testing ---"+n+":"+l);var i=Object(ea.a)(this.state.lineItems);i[e]=jl({},i[e],Object(y.a)({},n,l)),this.setState({lineItems:i}),console.log("Value to send --- "+JSON.stringify(this.state.lineItems))}}},{key:"handleNeededbydateChange",value:function(e){this.setState({needed_by_date:e})}},{key:"handleSubmit",value:function(e,t){var a=this;t.preventDefault();var n,l=0;console.log("Clicked --- button --- "+e),"201"===e&&(n="pending"),"202"===e&&(n="submitted");var i={requisitor:localStorage.getItem("id"),employee_id:localStorage.getItem("emp_id"),status:n,requisition:this.state.lineItems,needed_by_date:this.state.needed_by_date};console.log("Line Items --- "+JSON.stringify(i)+" --- "+JSON.stringify(this.state.lineItems)+" --- "+JSON.stringify(this.state.lineItems.length));for(var s=0;s<this.state.lineItems.length;s++)if(0==this.state.lineItems[s].item_name.length||0==this.state.lineItems[s].item_description.length||0==this.state.lineItems[s].purpose.length||0==this.state.lineItems[s].no_of_items.length){l=1,Dl("All fields are mandatory");break}0==l&&w.post("purchase-requisition",i,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){Dl("Requisition is added successfully")}else Dl(e.data.message);a.reloadChild()}).catch(function(e){return console.log(e)}),this.resetField()}},{key:"createUI",value:function(){var e=this;if(this.state.lineItems.length>0)return this.state.lineItems.map(function(t,a){return l.a.createElement("div",{key:a},l.a.createElement("div",{style:ql},l.a.createElement("div",null,l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:Fl},l.a.createElement(fa.a,{htmlFor:"item_name"},"Item Name"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},labelId:"demo-simple-select-outlined-label",value:t.item_name,onChange:e.handleInputChangeValue.bind(e,a),labelWidth:e.state.labelWidth,inputProps:{name:"item_name",id:"item_name"}},e.state.getAllItem.length>0&&e.state.getAllItem.map(function(e){return l.a.createElement(se.a,{value:e._id},e.name)})))),l.a.createElement("div",{id:"11"},l.a.createElement(J.a,{style:Pl,variant:"outlined",margin:"dense",label:"Item Description",required:!0,multiline:!0,rows:1,rowsMax:1,id:"item_description",name:"item_description",value:t.item_description,onChange:e.handleInputChangeValue.bind(e,a)})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Pl,variant:"outlined",margin:"dense",label:"Purpose",required:!0,multiline:!0,rows:1,rowsMax:1,id:"purpose",name:"purpose",value:t.purpose,onChange:e.handleInputChangeValue.bind(e,a)})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Pl,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:t.no_of_items,onChange:e.handleInputChangeNumber.bind(e,a)})),l.a.createElement(le.a,{"aria-label":"delete",color:"secondary",onClick:e.removeItem.bind(e,a)},l.a.createElement(_t.a,null))))})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:Nl}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Requisition Form \xa0",l.a.createElement(ta.a,{color:"primary",size:"small","aria-label":"add",onClick:this.addItem.bind(this)},l.a.createElement(na.a,null))),l.a.createElement("br",null),l.a.createElement("br",null),this.createUI(),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:Bl,margin:"normal",id:"needed_by_date",label:"Needed by date",name:"needed_by_date",format:"dd/MM/yyyy",minDate:this.state.min_needed_by_date,value:this.state.needed_by_date,onChange:this.handleNeededbydateChange,KeyboardButtonProps:{"aria-label":"change date"}})),"\xa0\xa0\xa0\xa0\xa0\xa0",l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary",onClick:function(t){return e.handleSubmit("201",t)}},"Save and Exit"),"\xa0\xa0\xa0",l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary",onClick:function(t){return e.handleSubmit("202",t)}},"Submit"))),l.a.createElement("br",null)," ",l.a.createElement("br",null),this.state.showChild?l.a.createElement(wl,{reloadChild:this.reloadChild,handlerfordata:this.handlerfordata}):null)}}]),t}(n.Component);function Ll(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Ul={display:"flex",flexWrap:"wrap"},Ml={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},Tl={width:350},Wl=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleClose=function(){e.setState({open:!1,open1:!1,lineItems:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],comment:""})},e._handleKeyDown=function(t){"Enter"===t.key&&e.searchItemDisplay()},e.state={getAllRequisition:[],getAllRequisitionBySearch:[],getAllRequisitionBySearchReqNo:[],getAllRequisitionBySearchStatus:[],getAllRequisitionData:[],getRequisitionStatus:[],requisition_id:"",viewIndex:-1,searchItemIndex:-1,subId:"",open:!1,open1:!1,dispStatus:!1,lineItems:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],comment:"",clickStatus:"",loading:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e.proceedAccept=e.proceedAccept.bind(Object(V.a)(e)),e.proceedReject=e.proceedReject.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t){console.log("INDEX --- "+t),this.setState({open:!0,requisition_id:e,viewIndex:t}),this.fetchRequisitionDetails(e)}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllRequisitionBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllRequisitionBySearch=[],this.state.getAllRequisitionBySearchReqNo=[],this.state.getAllRequisitionBySearchStatus=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllRequisition.length;t++)if(this.state.searchBy===this.state.getAllRequisition[t].user_name){this.state.searchItemIndex=t,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[t]),this.forceUpdate(),e=1;break}if(0==e)for(var a=0;a<this.state.getAllRequisition.length;a++){var n=this.state.getAllRequisition[a].requisition_datas.length;this.state.getAllRequisitionBySearchReqNo=[];for(var l=0;l<n;l++)if(this.state.getAllRequisitionBySearchReqNo.push(this.state.getAllRequisition[a].requisition_datas[l]),console.log("this.state.getAllRequisitionBySearchItem --- "+JSON.stringify(this.state.getAllRequisitionBySearchReqNo[l].requisition_no+" --- "+this.state.searchBy)),this.state.getAllRequisitionBySearchReqNo[l].requisition_no===this.state.searchBy){console.log("True ---"),this.state.searchItemIndex=a,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[a]),this.forceUpdate(),e=1;break}}if(0==e)for(var i=0;i<this.state.getAllRequisition.length;i++){var s=this.state.getAllRequisition[i].requisition_datas.length;this.state.getAllRequisitionBySearchStatus=[];for(var o=0;o<s;o++)this.state.getAllRequisitionBySearchStatus.push(this.state.getAllRequisition[i].requisition_datas[o]),console.log("this.state.getAllRequisitionBySearchItem --- "+JSON.stringify(this.state.getAllRequisitionBySearchStatus[o].status+" --- "+this.state.searchBy)),"forwarded"===this.state.getAllRequisitionBySearchStatus[o].status&&(this.state.getAllRequisitionBySearchStatus[o].status="In-Progress"),this.state.getAllRequisitionBySearchStatus[o].status===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=i,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[i]),this.forceUpdate(),e=1,console.log("Fine --- "))}}},{key:"fetchAllRequisition",value:function(){var e=this,t=localStorage.getItem("id");this.setState({loading:!0},function(){fetch(ne.BASE_URL+"subordinatewise-requisition-list",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({myId:t})}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllRequisition:t.list,loading:!1}),console.log("getAllRequisition --- "+JSON.stringify(t.list))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"fetchRequisitionDetails",value:function(e){var t=this;this.state.lineItems.splice(0,1);this.setState({loading:!0},function(){fetch(ne.BASE_URL+"requisitionByid",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({requisitionId:e})}).then(function(e){return e.json()}).then(function(e){console.log(e),t.setState({getAllRequisitionData:e.data.children,getRequisitionStatus:e.data,loading:!1}),console.log("getAllRequisition --- "+JSON.stringify(e.data.children));for(var a=0;a<t.state.getAllRequisitionData.length;a++)t.state.lineItems.push({item_name:t.state.getAllRequisitionData[a].item_name.name,item_description:t.state.getAllRequisitionData[a].item_description,purpose:t.state.getAllRequisitionData[a].purpose,no_of_items:t.state.getAllRequisitionData[a].no_of_items}),console.log("LineItems --- "+JSON.stringify(t.state.lineItems)),t.forceUpdate();t.state.dispStatus=!0}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllRequisition()}},{key:"proceedAccept",value:function(e,t){var a=this;console.log("Clicked"),this.state.clickStatus=t,console.log("this.state.clickStatus --- "+this.state.clickStatus),this.setState({open:!1}),this.state.open=!1,e.preventDefault();var n={requisitionid:this.state.requisition_id,approval:this.state.clickStatus,comment:"",approved_by:localStorage.getItem("id")};console.log("Request --- "+JSON.stringify(n)),w.post("requsition-approval",n,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){Ll("Requisition is approved"),a.fetchAllRequisition(),a.state.getRequisitionStatus.status="approved",a.forceUpdate()}else Ll(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"proceedReject",value:function(e,t){console.log("Clicked"),this.state.clickStatus=t,console.log("this.state.clickStatus --- "+this.state.clickStatus),this.setState({open:!1,open1:!0}),this.state.open=!1,this.state.open1=!0}},{key:"handleSubmit",value:function(e,t){var a=this;console.log("Clicked Button --- "+t),e.preventDefault();var n={requisitionid:this.state.requisition_id,approval:this.state.clickStatus,comment:this.state.comment,approved_by:localStorage.getItem("id")};console.log("Request --- "+JSON.stringify(n)),w.post("requsition-approval",n,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){if("approved"===a.state.clickStatus){Ll("Requisition is approved"),a.fetchAllRequisition(),a.state.getRequisitionStatus.status="approved"}if("rejected"===a.state.clickStatus){Ll("Requisition is rejected"),a.fetchAllRequisition(),a.state.getRequisitionStatus.status="rejected"}a.forceUpdate()}else Ll(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"createUI",value:function(){if(console.log("Executing"),this.state.lineItems.length>0)return console.log("Executing if --- "+this.state.lineItems.length),this.state.lineItems.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{style:Ul},l.a.createElement("div",null,l.a.createElement(J.a,{style:Ml,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:e.item_name,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ml,variant:"outlined",margin:"dense",type:"tel",name:"no_of_items",label:"No. Of Items",value:e.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ml,variant:"outlined",margin:"dense",label:"Item Description",multiline:!0,rows:1,rowsMax:1,name:"item_description",value:e.item_description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ml,variant:"outlined",margin:"dense",label:"Purpose",multiline:!0,rows:1,rowsMax:1,name:"purpose",value:e.purpose,InputProps:{disabled:!0}}))))})}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state),a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={fontWeight:"bold",fontSize:"15px",color:"black"},o={fontSize:"12px",verticalAlign:"top"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:a,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Requisition Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",null,this.createUI())),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),this.state.viewIndex>=0&&"submitted"===this.state.getRequisitionStatus.status?l.a.createElement("div",null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:function(t){return e.proceedAccept(t,"approved")},color:"primary"},"Accept"),l.a.createElement(Q.a,{onClick:function(t){return e.proceedReject(t,"rejected")},color:"primary"},"Reject")):"")),l.a.createElement(L.a,{open:n,"aria-labelledby":"form-dialog-title-text"},l.a.createElement(U.a,{id:"form-dialog-title-text"},"Note "),l.a.createElement(M.a,null,l.a.createElement("div",null,l.a.createElement("textarea",{style:Ml,variant:"outlined",margin:"normal",placeholder:"Comment",multiline:!0,name:"comment",value:this.state.comment,onChange:this.handleInputChangeValue.bind(this)}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:function(t){return e.handleSubmit(t,"ok")},color:"primary"},"Ok"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:Tl,label:"Search by Requisitor/Requisition no./Status",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllRequisitionBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},"Name"),l.a.createElement(nt.a,{style:s},"Email"),l.a.createElement(nt.a,{style:s},"Requisition No."),l.a.createElement(nt.a,{style:s},"Status"))),l.a.createElement(lt.a,null,this.state.getAllRequisitionBySearch.length>0&&this.state.getAllRequisitionBySearch.map(function(t,a){return e.state.getAllRequisitionBySearch[a].requisition_datas.length>0?l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},t.user_name),l.a.createElement(nt.a,{style:o},t.user_email),l.a.createElement(nt.a,{style:o},e.state.getAllRequisitionBySearch[a].requisition_datas&&e.state.getAllRequisitionBySearch[a].requisition_datas.map(function(t,a){return l.a.createElement("p",{style:i,onClick:function(a){return e.handleClick(t.requesitionid,e.state.searchItemIndex)}}," ",t.requisition_no," ")})),l.a.createElement(nt.a,{style:o},e.state.getAllRequisitionBySearch[a].requisition_datas&&e.state.getAllRequisitionBySearch[a].requisition_datas.map(function(e,t){return l.a.createElement("p",null," ","forwarded"===e.status?"In-Progress":e.status," ")}))):""}))):[this.state.getAllRequisition.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},"Name"),l.a.createElement(nt.a,{style:s},"Email"),l.a.createElement(nt.a,{style:s},"Requisition No."),l.a.createElement(nt.a,{style:s},"Status"))),l.a.createElement(lt.a,null,this.state.getAllRequisition.length>0&&this.state.getAllRequisition.map(function(t,a){return e.state.getAllRequisition[a].requisition_datas.length>0?l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},t.user_name),l.a.createElement(nt.a,{style:o},t.user_email),l.a.createElement(nt.a,{style:o},e.state.getAllRequisition[a].requisition_datas&&e.state.getAllRequisition[a].requisition_datas.map(function(t,a){return l.a.createElement("p",{style:i,onClick:function(n){return e.handleClick(t.requesitionid,a)}}," ",t.requisition_no," ")})),l.a.createElement(nt.a,{style:o},e.state.getAllRequisition[a].requisition_datas&&e.state.getAllRequisition[a].requisition_datas.map(function(e,t){return l.a.createElement("p",null," ","forwarded"===e.status?"In-Progress":e.status," ")}))):""}))):l.a.createElement("h3",null,"No requisition list to be displayed")])}}]),t}(n.Component),Ql=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Wl),Jl=a(46),zl=a.n(Jl);function Gl(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Yl(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gl(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gl(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Kl(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Hl={display:"flex",flexWrap:"wrap"},Xl={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},Zl={width:350},$l=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).handleClose=function(){e.setState({open:!1,comment:"",lineItems:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}]})},e._handleKeyDown=function(t){"Enter"===t.key&&e.searchItemDisplay()},e.state={lineItems:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}],getAllRequisition:[],getAllRequisitionBySearch:[],getAllRequisitionBySearchItem:[],requisition_id:"",requisition_user_id:"",delIndex:-1,editIndex:-1,searchItemIndex:-1,open:!1,dispStatus:!1,comment:"",pref_req:"",fn_req:"",ln_req:"",date_req:"",pref_appr:"",fn_appr:"",ln_appr:"",date_appr:"",loading:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n,l,i,s,o,r,c,d,u){zl.a.locale("en"),s=zl()(s).format("DD/MM/YYYY"),d=zl()(d).format("DD/MM/YYYY"),this.setState({open:!0,requisition_id:e,requisition_user_id:t,comment:a,editIndex:u,pref_req:n,fn_req:l,ln_req:i,date_req:s,pref_appr:o,fn_appr:r,ln_appr:c,date_appr:d});for(var m=0;m<this.state.getAllRequisition[u].children.length;m++)this.state.lineItems.push({item_id:this.state.getAllRequisition[u].children[m].item_name._id,item_name:this.state.getAllRequisition[u].children[m].item_name.name,item_description:this.state.getAllRequisition[u].children[m].item_description,purpose:this.state.getAllRequisition[u].children[m].purpose,no_of_items:this.state.getAllRequisition[u].children[m].no_of_items});this.state.dispStatus=!0}},{key:"handleInputChangeValue",value:function(e,t){var a=t?t.target.name:t,n=t?t.target.value:t;console.log(a,":",n),this.setState(Object(y.a)({},a,n));var l=t.target,i=l.name,s=l.value,o=Object(ea.a)(this.state.lineItems);o[e]=Yl({},o[e],Object(y.a)({},i,s)),this.setState({lineItems:o}),console.log("Value to send --- "+this.state.lineItems)}},{key:"handleInputChangeNumber",value:function(e,t){if(""===t.target.value||/^[0-9\b]+$/.test(t.target.value)){var a=t.target,n=a.name,l=a.value;console.log("Testing ---"+n+":"+l);var i=Object(ea.a)(this.state.lineItems);i[e]=Yl({},i[e],Object(y.a)({},n,l)),this.setState({lineItems:i}),console.log("Value to send --- "+this.state.lineItems)}}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllRequisitionBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllRequisitionBySearch=[],this.state.getAllRequisitionBySearchItem=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllRequisition.length;t++)if(this.state.searchBy===this.state.getAllRequisition[t].requisition_no){this.state.searchItemIndex=t,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[t]),this.forceUpdate(),e=1;break}if(0==e)for(var a=0;a<this.state.getAllRequisition.length;a++)"forwarded"===this.state.getAllRequisition[a].status&&(this.state.getAllRequisition[a].status="In-Progress"),this.state.searchBy===this.state.getAllRequisition[a].status&&(this.state.searchItemIndex=a,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[a]),this.forceUpdate(),e=1,console.log("Fine"));if(0==e)for(var n=0;n<this.state.getAllRequisition.length;n++){var l=this.state.getAllRequisition[n].children.length;this.state.getAllRequisitionBySearchItem=[];for(var i=0;i<l;i++)this.state.getAllRequisitionBySearchItem.push(this.state.getAllRequisition[n].children[i]),console.log("this.state.getAllRequisitionBySearchItem --- "+JSON.stringify(this.state.getAllRequisitionBySearchItem[i].item_name.name+" --- "+this.state.searchBy)),this.state.getAllRequisitionBySearchItem[i].item_name.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=n,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[n]),this.forceUpdate(),e=1,console.log("Fine --- "))}}},{key:"fetchAllRequisition",value:function(){var e=this;localStorage.getItem("id");this.setState({loading:!0},function(){fetch(ne.BASE_URL+"requisition-purchasehead-list",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllRequisition:t.RequisitionList,loading:!1}),console.log("Value Name Item --- "+JSON.stringify(e.state.getAllRequisition))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllRequisition()}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=0,n=this.state.lineItems.splice(0,1);console.log("Line Items --- "+JSON.stringify(n));var l={approval:"forwarded",requisitionid:this.state.requisition_id,requisition:this.state.lineItems,requisitor_id:this.state.requisition_user_id};console.log("Request --- "+JSON.stringify(l));for(var i=0;i<this.state.lineItems.length;i++){if(0==this.state.lineItems[i].item_name.length||0==this.state.lineItems[i].item_description.length||0==this.state.lineItems[i].purpose.length||0==this.state.lineItems[i].no_of_items.length){a=1,Kl("All fields are mandatory");break}if(parseInt(this.state.lineItems[i].no_of_items)<=0){a=1,Kl("Item number must be greaterthan 0");break}}0==a&&w.post("requisition-forward",l,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){Kl("Requisition forwarded to  inventory"),t.state.getAllRequisition[t.state.editIndex].status="forwarded",t.forceUpdate()}else Kl(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"createUI",value:function(){var e=this;return this.state.lineItems.map(function(t,a){return l.a.createElement("div",{key:a},e.state.dispStatus&&a>0?l.a.createElement("div",{style:Hl},l.a.createElement("div",{style:{display:"none"}},l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",name:"item_id",label:"item_id",value:t.item_id,InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:t.item_name,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",type:"tel",name:"no_of_items",label:"No. Of Items",value:t.no_of_items,onChange:e.handleInputChangeNumber.bind(e,a)})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",label:"Item Description",multiline:!0,rows:1,rowsMax:1,name:"item_description",value:t.item_description,onChange:e.handleInputChangeValue.bind(e,a)})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",label:"Purpose",multiline:!0,rows:1,rowsMax:1,name:"purpose",value:t.purpose,onChange:e.handleInputChangeValue.bind(e,a)}))):"")})}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state),a=t.open,n=(t.open1,{cursor:"pointer",color:"blue"}),i={fontWeight:"bold",fontSize:"15px",color:"black"},s={fontSize:"12px"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Approved Requisition Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",null,this.createUI(),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",name:"requisitorname",label:"Requisitor Name",value:this.state.pref_req+" "+this.state.fn_req+" "+this.state.ln_req,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",name:"requisitiondate",label:"Requisition Date",value:this.state.date_req,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",name:"approvedby",label:"Approved By",value:this.state.pref_appr+" "+this.state.fn_appr+" "+this.state.ln_appr,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Xl,variant:"outlined",margin:"dense",name:"approveddate",label:"Approved Date",value:this.state.date_appr,InputProps:{disabled:!0}})))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Forward"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:Zl,label:"Search by Requisition no./Item/Status",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllRequisitionBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:i},"Requisition No."),l.a.createElement(nt.a,{style:i},"Item name"),l.a.createElement(nt.a,{style:i},"Quantity"),l.a.createElement(nt.a,{style:i},"Status"),l.a.createElement(nt.a,{style:i},"Edit"))),l.a.createElement(lt.a,null,this.state.getAllRequisitionBySearch.length>0&&this.state.getAllRequisitionBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.requisition_no),l.a.createElement(nt.a,{style:s},e.state.getAllRequisitionBySearch[a].children&&e.state.getAllRequisitionBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:s},e.state.getAllRequisitionBySearch[a].children&&e.state.getAllRequisitionBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:s},(t.status.replace(/"/g,""),"forwarded"===t.status.replace(/"/g,"")?"In-Progress":t.status)),l.a.createElement(nt.a,{style:s},(t.status.replace(/"/g,""),"approved"===t.status.replace(/"/g,"")?l.a.createElement(ot.a,{fontSize:"small",style:n,onClick:function(a){return e.handleClick(t._id,t.requisitor,t.comment,t.requisitor.prefix,t.requisitor.firstname,t.requisitor.lastname,t.createdAt,t.approved_by.prefix,t.approved_by.firstname,t.approved_by.lastname,t.approved_date,e.state.searchItemIndex)}}):"")))}))):[this.state.getAllRequisition.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:i},"Requisition No."),l.a.createElement(nt.a,{style:i},"Item name"),l.a.createElement(nt.a,{style:i},"Quantity"),l.a.createElement(nt.a,{style:i},"Status"),l.a.createElement(nt.a,{style:i},"Edit"))),l.a.createElement(lt.a,null,this.state.getAllRequisition.length>0&&this.state.getAllRequisition.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.requisition_no),l.a.createElement(nt.a,{style:s},e.state.getAllRequisition[a].children&&e.state.getAllRequisition[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:s},e.state.getAllRequisition[a].children&&e.state.getAllRequisition[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:s},(t.status.replace(/"/g,""),"forwarded"===t.status.replace(/"/g,"")?"In-Progress":t.status)),l.a.createElement(nt.a,{style:s},(t.status.replace(/"/g,""),"approved"===t.status.replace(/"/g,"")?l.a.createElement(ot.a,{fontSize:"small",style:n,onClick:function(n){return e.handleClick(t._id,t.requisitor,t.comment,t.requisitor.prefix,t.requisitor.firstname,t.requisitor.lastname,t.createdAt,t.approved_by.prefix,t.approved_by.firstname,t.approved_by.lastname,t.approved_date,a)}}):"")))}))):""])}}]),t}(n.Component),ei=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})($l);N.a.settings={theme:"ios"};var ti=[];function ai(e){N.a.alert({message:e})}var ni=[],li={width:350},ii=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){n.setState({open:!1,open1:!1,open2:!1,open3:!1,open4:!1})},n.handleCloseGRN=function(){n.setState({open4:!1})},n._handleKeyDown=function(e){"Enter"===e.key&&n.searchItemDisplay()},n._handleKeyDownSKU=function(e){"Enter"===e.key&&n.searchItemDisplaySKU()},n.state=(a={name:"",stock:"",stockStore:"",getAllStock:[],getAllStockBySearch:[],getSKUBySearch:[],getGRNBySearch:[],searchBy:"",searchBySKU:"",getStockById:[],stocks:[],unit:"",stock_type:"",lower_limit:"",upper_limit:"",expiry_date:"",getAllunit:[],delIndex:-1,editIndex:-1,searchItemIndex:-1,getAllVendor:[],vendorname:"",grn:"",labelWidthDep:90},Object(y.a)(a,"expiry_date",new Date),Object(y.a)(a,"max_expiry_date",new Date),Object(y.a)(a,"entry_date",new Date),Object(y.a)(a,"max_entry_date",new Date),Object(y.a)(a,"grnid",""),Object(y.a)(a,"vendorid",""),Object(y.a)(a,"itemid",""),Object(y.a)(a,"no_of_materials",""),Object(y.a)(a,"unit",""),Object(y.a)(a,"stock_type",""),Object(y.a)(a,"vendornamebystockid",""),Object(y.a)(a,"entrydatebystockid",""),Object(y.a)(a,"expirydatebystockid",""),Object(y.a)(a,"grnbystockid",""),Object(y.a)(a,"loading",!1),a),n.state.entry_date=new Date,n.state.expiry_date=new Date,n.state.max_entry_date=n.state.entry_date,n.state.min_expiry_date=n.state.expiry_date,n.handleSearchSKU=n.handleSearchSKU.bind(Object(V.a)(n)),n.handleSearch=n.handleSearch.bind(Object(V.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(V.a)(n)),n.handleProceed=n.handleProceed.bind(Object(V.a)(n)),n.handleDelete=n.handleDelete.bind(Object(V.a)(n)),n.handleEntrydateChange=n.handleEntrydateChange.bind(Object(V.a)(n)),n.handleExpirydateChange=n.handleExpirydateChange.bind(Object(V.a)(n)),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n,l,i,s,o,r){this.setState({open:!0,stock:e,stockStore:e,name:t,unit:a,stockid:n,stock_type:l,lower_limit:i,upper_limit:s,expiry_date:o,editIndex:r}),console.log("Stock Id --- "+n)}},{key:"handleClickGRN",value:function(e,t){this.setState({open3:!0,stockid:e,editIndex:t}),console.log("sid --- "+e),this.state.stockid=e,this.fetchStockById()}},{key:"handleClickGRNEdit",value:function(e,t,a,n,l,i){this.setState({open4:!0,grnid:e,itemid:t,no_of_materials:a,unit:n,stock_type:l,editIndex:i}),this.state.vendornamebystockid=this.state.getStockById[i].vendorid,this.state.entrydatebystockid=zl()(this.state.getStockById[i].entry_date).format("DD/MM/YYYY"),this.state.expirydatebystockid=zl()(this.state.getStockById[i].expiry_date).format("DD/MM/YYYY"),this.state.grnbystockid=this.state.getStockById[i].GRN}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,stockid:e,delIndex:t})}},{key:"fetchAllStock",value:function(){var e=this;console.log("Calling --- "),this.setState({loading:!0},function(){fetch(ne.BASE_URL+"stock-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.Stock.length),e.setState({getAllStock:t.Stock,loading:!1}),console.log("Stock Item --- "+JSON.stringify(t.Stock));for(var a=0;a<t.Stock.length;a++)ni.push(t.Stock[a].planName),e.setState({plans:t.Stock[a].name}),e.setState({id:t.Stock[a].planId}),e.setState({stock:t.Stock[a].stock}),e.setState({unit:t.Stock[a].unit.name}),e.setState({stock_type:t.Stock[a].stock_type}),e.setState({lower_limit:t.Stock[a].lower_limit}),e.setState({upper_limit:t.Stock[a].upper_limit}),e.setState({expiry_date:t.Stock[a].expiry_date});console.log("---"+e.state.unit),console.log("--test-"+e.state.stock),console.log("array"+ni),e.setState({stocks:ni}),console.log("Plan Names --- "+JSON.stringify(e.state.getAllStock))})}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"fetchAllVendor",value:function(){var e=this;fetch(ne.BASE_URL+"vendor-list",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllVendor:t.Vendor}),console.log("Requisition Details --- "+JSON.stringify(t.Vendor))}).catch(function(e){console.log("ERROR --- "+e)})}},{key:"fetchStockById",value:function(){var e=this;zl.a.locale("en"),this.setState({loading:!0},function(){fetch(ne.BASE_URL+"GRN-list",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({stockId:e.state.stockid})}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getStockById:t.list,loading:!1}),console.log("Stock Details By Id --- "+JSON.stringify(t.list)+" --- "+e.state.stockid)}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllStock(),this.fetchUnit(),this.fetchAllVendor()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllStockBySearch=[],this.forceUpdate())}},{key:"handleInputChangeSearchSKUValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getSKUBySearch=[],this.state.getGRNBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllStockBySearch=[],console.log("Search Calling --- "+this.state.searchBy);for(var e=0;e<this.state.getAllStock.length;e++)if(this.state.searchBy===this.state.getAllStock[e].name){this.state.searchItemIndex=e,this.state.getAllStockBySearch.push(this.state.getAllStock[e]),this.forceUpdate();break}}},{key:"handleSearchSKU",value:function(e){e.preventDefault(),this.searchItemDisplaySKU()}},{key:"searchItemDisplaySKU",value:function(){this.state.getSKUBySearch=[];var e=0;console.log("Search Calling --- "+this.state.searchBySKU);for(var t=0;t<this.state.getStockById.length;t++)if(this.state.searchBySKU===this.state.getStockById[t].SKU){this.state.searchItemIndex=t,this.state.getSKUBySearch.push(this.state.getStockById[t]),this.forceUpdate(),e=1;break}if(0==e)for(var a=0;a<this.state.getStockById.length;a++)if(this.state.searchBySKU===this.state.getStockById[a].GRN_number){this.state.searchItemIndex=a,this.state.getSKUBySearch.push(this.state.getStockById[a]),this.forceUpdate(),e=1;break}}},{key:"handleInputChangeValueQOH",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),parseInt(this.state.stockStore)<parseInt(a)?(console.log("Executing ---"),document.getElementById("p1").style.display="block",document.getElementById("s1").style.display="none",this.state.stockStore=a-this.state.stockStore):(console.log("Executing Else ---"),document.getElementById("p1").style.display="none",document.getElementById("s1").style.display="block"),this.setState(Object(y.a)({},t,a))}},{key:"handleProceed",value:function(e){this.setState({open2:!0})}},{key:"handleSubmit",value:function(e,t){var a=this;if(e.preventDefault(),""==this.state.name)ai("Please fill name");else{if("edit"===t){var n={name:this.state.name,stock:this.state.stock,unit:this.state.unit,stockid:this.state.stockid,stock_type:this.state.stock_type,lower_limit:this.state.lower_limit,upper_limit:this.state.upper_limit};console.log("edit --- "+JSON.stringify(n)),w.post("stock-update",n,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){a.showAlert("Stock is updates successfully"),a.fetchAllStock()}else a.showAlert(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}if("submit"===t){var l={name:this.state.name,stock:this.state.stock,unit:this.state.unit,stockid:this.state.stockid,stock_type:this.state.stock_type,lower_limit:this.state.lower_limit,upper_limit:this.state.upper_limit,no_of_materials:this.state.stockStore,expiry_date:this.state.expiry_date,entry_date:this.state.entry_date,GRN:this.state.grn,vendorid:this.state.vendorname};console.log("submit --- "+JSON.stringify(l)),w.post("stock-update",l,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){a.showAlert("Stock is updates successfully"),a.fetchAllStock()}else a.showAlert(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}if("skip"===t){var i={name:this.state.name,stock:this.state.stock,unit:this.state.unit,stockid:this.state.stockid,stock_type:this.state.stock_type,lower_limit:this.state.lower_limit,upper_limit:this.state.upper_limit,no_of_materials:this.state.stockStore,expiry_date:"",entry_date:"",GRN:"skip",vendorid:""};console.log("Skip --- "+JSON.stringify(i)),w.post("stock-update",i,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){a.showAlert("Stock is updates successfully"),a.fetchAllStock()}else a.showAlert(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}}}},{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleInputChangeValueUnit",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,"::",n),this.setState(Object(y.a)({},a,n))}},{key:"fetchUnit",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"unit-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllunit:t.Unit});for(var a=0;a<t.Unit.length;a++)ti.push(t.Unit[a].name),e.setState({unitname:t.Unit[a].name}),e.setState({shortname:t.Unit[a].shortname});console.log("array"+ti),e.setState({stocks:ti}),console.log("Plan Names --- "+e.state.getAllunit)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"handleEntrydateChange",value:function(e){this.setState({entry_date:e})}},{key:"handleExpirydateChange",value:function(e){this.setState({expiry_date:e})}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),console.log("this.state.stockid --- "+this.state.stockid),this.setState(function(e){return{getAllStock:e.getAllStock.filter(function(e,a){return a!==t.state.delIndex})}}),fetch(ne.BASE_URL+"stock-delete",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({stockid:this.state.stockid})}).then(function(e){return e.json()}).then(function(e){console.log("DATA --- "+e+" --- "+e.value),console.log(e.message),1==e.value?ai("Stock is deleted successfully"):ai(e.message)}).catch(function(e){}),this.handleClose()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i=t.open2,s=t.open3,o=t.open4,r=(this.state.loading,{cursor:"pointer",color:"blue"}),c={cursor:"pointer",color:"red"},d={fontWeight:"bold",fontSize:"15px",color:"black"},u={fontSize:"12px"},m={fontWeight:"bold",fontSize:"12px",color:"green"},h={minWidth:300},g={width:135,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},p={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , to delete the Stock?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Plan"),l.a.createElement("form",null,l.a.createElement(J.a,{margin:"dense",id:"name",label:"Item Name",name:"name",value:this.state.name,fullWidth:!0,InputProps:{disabled:!0}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"stock",value:this.state.stock,label:"QOH",name:"stock",fullWidth:!0,onChange:function(t){return e.handleInputChangeValueQOH(t)}}),l.a.createElement(J.a,{margin:"dense",id:"lower_limit",value:this.state.lower_limit,label:"Lower Limit",name:"lower_limit",fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{margin:"dense",id:"upper_limit",value:this.state.upper_limit,label:"Upper Limit",name:"upper_limit",fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement($e.a,{style:h},l.a.createElement(fa.a,{htmlFor:"unit"},"Unit"),l.a.createElement(ya.a,{value:this.state.unit,onChange:function(t){return e.handleInputChangeValueUnit(t,9)},inputProps:{name:"unit",id:"unit"}},this.state.getAllunit.map(function(e){return l.a.createElement(se.a,{value:e._id},e.name)}))),l.a.createElement($e.a,{style:h},l.a.createElement(fa.a,{htmlFor:"unit"},"Stock Type"),l.a.createElement(ya.a,{value:this.state.stock_type,onChange:function(t){return e.handleInputChangeValueUnit(t,9)},inputProps:{name:"stock_type",id:"stock_type"}},l.a.createElement(se.a,{value:"RM"},"Raw Materials"),l.a.createElement(se.a,{value:"FG"},"Finished Goods"))))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{id:"p1",style:{fontWeight:"bold",display:"none"},onClick:this.handleProceed,color:"primary"},"Proceed"),l.a.createElement(Q.a,{id:"s1",style:{fontWeight:"bold",display:"block"},onClick:function(t){return e.handleSubmit(t,"edit")},color:"primary"},"Submit"))),l.a.createElement(L.a,{open:i,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Edit GRN"),l.a.createElement(M.a,null,l.a.createElement("div",{style:{width:300,height:300}},l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:h},l.a.createElement(fa.a,{htmlFor:"vendorname"},"Vendor Name"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.vendorname,onChange:function(t){return e.handleInputChangeValue(t)},labelWidth:this.state.labelWidthDep,inputProps:{name:"vendorname",id:"vendorname"}},this.state.getAllVendor.length>0&&this.state.getAllVendor.map(function(e){return l.a.createElement(se.a,{value:e._id},e.name)})))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:g,margin:"normal",id:"entry_date",label:"Entry Date",name:"entry_date",format:"dd/MM/yyyy",maxDate:this.state.max_entry_date,value:this.state.entry_date,onChange:this.handleEntrydateChange,KeyboardButtonProps:{"aria-label":"change date"}})),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:g,margin:"normal",id:"expiry_date",label:"Expiry Date",name:"expiry_date",format:"dd/MM/yyyy",minDate:this.state.expiry_date,value:this.state.expiry_date,onChange:this.handleExpirydateChange,KeyboardButtonProps:{"aria-label":"change date"}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:p,variant:"outlined",margin:"dense",label:"GRN",required:!0,multiline:!0,rows:4,rowsMax:4,id:"grn",name:"grn",value:this.state.grn,onChange:this.handleInputChangeValue.bind(this)}))))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:function(t){return e.handleSubmit(t,"submit")},color:"primary"},"Submit"))),l.a.createElement(L.a,{open:s,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:"false"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Edit GRN",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("div",{style:{width:800,height:700}},l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:li,label:"Search by SKU or GRN No.",id:"searchBySKU",name:"searchBySKU",value:this.state.searchBySKU,onChange:this.handleInputChangeSearchSKUValue.bind(this),onKeyDown:this._handleKeyDownSKU,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearchSKU})))}})),this.state.getSKUBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:d},"Item Name"),l.a.createElement(nt.a,{style:d},"Quantity"),l.a.createElement(nt.a,{style:d},"QOM"),l.a.createElement(nt.a,{style:d},"GRN No."),l.a.createElement(nt.a,{style:d},"SKU"),l.a.createElement(nt.a,{style:d},"View GRN"))),l.a.createElement(lt.a,null,this.state.getSKUBySearch&&this.state.getSKUBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:u},t.item.name),l.a.createElement(nt.a,{style:u},t.no_of_materials),l.a.createElement(nt.a,{style:u},t.unit.name),l.a.createElement(nt.a,{style:u},t.GRN_number),l.a.createElement(nt.a,{style:u},t.SKU),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:r,onClick:function(a){return e.handleClickGRNEdit(t._id,t.item._id,t.no_of_materials,t.item.unit,t.item.stock_type,e.state.searchItemIndex)}})))}))):l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:d},"Item Name"),l.a.createElement(nt.a,{style:d},"Quantity"),l.a.createElement(nt.a,{style:d},"QOM"),l.a.createElement(nt.a,{style:d},"GRN No."),l.a.createElement(nt.a,{style:d},"SKU"),l.a.createElement(nt.a,{style:d},"View GRN"))),l.a.createElement(lt.a,null,this.state.getStockById&&this.state.getStockById.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:u},t.item.name),l.a.createElement(nt.a,{style:u},t.no_of_materials),l.a.createElement(nt.a,{style:u},t.unit.name),l.a.createElement(nt.a,{style:u},t.GRN_number),l.a.createElement(nt.a,{style:u},t.SKU),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:r,onClick:function(n){return e.handleClickGRNEdit(t._id,t.item._id,t.no_of_materials,t.item.unit,t.item.stock_type,a)}})))})))))),l.a.createElement(L.a,{open:o,onClose:this.handleCloseGRN,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Edit GRN"),l.a.createElement(M.a,null,l.a.createElement("div",{style:{width:300,height:300}},l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(J.a,{style:p,variant:"outlined",margin:"dense",name:"vendorname",label:"Vendor Name",value:this.state.vendornamebystockid,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:p,variant:"outlined",margin:"dense",name:"entry_date",label:"Entry Date",value:this.state.entrydatebystockid,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:p,variant:"outlined",margin:"dense",name:"expiry_date",label:"Expiry Date",value:this.state.expirydatebystockid,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:p,variant:"outlined",margin:"dense",label:"GRN",required:!0,multiline:!0,rows:4,rowsMax:4,id:"grn",name:"grn",value:this.state.grnbystockid,InputProps:{disabled:!0}}))))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleCloseGRN,color:"primary"},"Close"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:li,label:"Search by Item Name",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch})))}})),this.state.getAllStockBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:d},"Item Name"),l.a.createElement(nt.a,{style:d},"QOH"),l.a.createElement(nt.a,{style:d},"QOM"),l.a.createElement(nt.a,{style:d},"Upper Limit"),l.a.createElement(nt.a,{style:d},"Lower Limit"),l.a.createElement(nt.a,{style:d},"Edit Item"),l.a.createElement(nt.a,{style:d},"View GRN"),l.a.createElement(nt.a,{style:d},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllStockBySearch&&this.state.getAllStockBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:u},t.name),parseInt(t.upper_limit)<parseInt(t.stock)||parseInt(t.lower_limit)>parseInt(t.stock)?l.a.createElement(nt.a,{style:m},t.stock):l.a.createElement(nt.a,{style:u},t.stock),l.a.createElement(nt.a,{style:u},t.unit.name),l.a.createElement(nt.a,{style:u},t.upper_limit),l.a.createElement(nt.a,{style:u},t.lower_limit),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:r,onClick:function(a){return e.handleClick(t.stock,t.name,t.unit._id,t._id,t.stock_type,t.lower_limit,t.upper_limit,t.expiry_date,e.state.searchItemIndex)}})),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:r,onClick:function(a){return e.handleClickGRN(t._id,e.state.searchItemIndex)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:c,onClick:function(a){return e.handleClickDelete(t._id,e.state.searchItemIndex)}})))}))):l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:d},"Item Name"),l.a.createElement(nt.a,{style:d},"QOH"),l.a.createElement(nt.a,{style:d},"QOM"),l.a.createElement(nt.a,{style:d},"Upper Limit"),l.a.createElement(nt.a,{style:d},"Lower Limit"),l.a.createElement(nt.a,{style:d},"Edit Item"),l.a.createElement(nt.a,{style:d},"View GRN"),l.a.createElement(nt.a,{style:d},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllStock&&this.state.getAllStock.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:u},t.name),parseInt(t.upper_limit)<parseInt(t.stock)||parseInt(t.lower_limit)>parseInt(t.stock)?l.a.createElement(nt.a,{style:m},t.stock):l.a.createElement(nt.a,{style:u},t.stock),l.a.createElement(nt.a,{style:u},t.unit.name),l.a.createElement(nt.a,{style:u},t.upper_limit),l.a.createElement(nt.a,{style:u},t.lower_limit),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:r,onClick:function(n){return e.handleClick(t.stock,t.name,t.unit._id,t._id,t.stock_type,t.lower_limit,t.upper_limit,t.expiry_date,a)}})),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:r,onClick:function(n){return e.handleClickGRN(t._id,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:c,onClick:function(n){return e.handleClickDelete(t._id,a)}})))}))))}}]),t}(n.Component),si=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{})(ii),oi=a(454);N.a.settings={theme:"ios"};var ri=[],ci=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100)},e.resetField=function(){e.setState({name:""}),e.setState({stock:""}),e.setState({stock_type:""}),e.setState({lower_limit:""}),e.setState({upper_limit:""}),e.setState({expiry_date:new Date}),e.setState({min_expiry_date:e.state.entry_date}),e.setState({entry_date:new Date}),e.setState({max_entry_date:e.state.entry_date}),e.state.grn="",e.state.vendorname=""},e.handleClose=function(){e.setState({open:!1}),e.state.expiry_date=new Date,e.state.min_expiry_date=new Date,e.state.entry_date=new Date,e.state.max_entry_date=e.state.entry_date},e.state={open:!1,name:"",stock:"",stock_type:"",lower_limit:"",upper_limit:"",expiry_date:new Date,max_expiry_date:new Date,entry_date:new Date,max_entry_date:new Date,showChild:!0,unit:"",getAllunit:[],getAllVendor:[],vendorname:"",grn:"",labelWidthDep:90,getAllStock:[],stockItem:[],loading:!1},e.state.entry_date=new Date,e.state.expiry_date=new Date,e.state.max_entry_date=e.state.entry_date,e.state.min_expiry_date=e.state.expiry_date,e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e.handleExpirydateChange=e.handleExpirydateChange.bind(Object(V.a)(e)),e.handleEntrydateChange=e.handleEntrydateChange.bind(Object(V.a)(e)),e.handleProceed=e.handleProceed.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleBlur",value:function(e){for(var t=0;t<this.state.stockItem.length;t++)if(oi.equals(this.state.stockItem[t],this.state.name)){this.state.name="",this.showAlert("Item already exists , please edit item"),this.forceUpdate();break}}},{key:"handleExpirydateChange",value:function(e){this.setState({expiry_date:e})}},{key:"handleEntrydateChange",value:function(e){this.setState({entry_date:e})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchUnit(),this.fetchAllVendor(),this.fetchAllStock()}},{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleProceed",value:function(e){e.preventDefault(),this.state.name.length<=0||this.state.stock.length<=0||this.state.unit.length<=0||this.state.stock_type.length<=0||this.state.lower_limit.length<=0||this.state.upper_limit.length<=0?this.showAlert("All fields are mandatory"):(this.setState({open:!0}),this.state.open=!0)}},{key:"handleSubmit",value:function(e,t){var a=this;if(e.preventDefault(),this.state.open=!1,"submit"===t)if(this.state.vendorname.length<=0||this.state.grn.length<=0)this.showAlert("All fields are mandatory");else{var n={name:this.state.name,stock:this.state.stock,unit:this.state.unit,stock_type:this.state.stock_type,lower_limit:this.state.lower_limit,upper_limit:this.state.upper_limit,expiry_date:this.state.expiry_date,entry_date:this.state.entry_date,GRN:this.state.grn,vendorid:this.state.vendorname};this.forceUpdate(),console.log("Stock Value : --- "+JSON.stringify(n)),w.post("stock",n,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(a.resetField(),console.log(e.data.value),console.log(e.data.message),1==e.data.value){a.showAlert("Stock is added successfully")}else a.showAlert(e.data.message);a.resetField(),a.reloadChild()}).catch(function(e){return console.log(e)})}this.handleClose(),this.resetField()}},{key:"fetchAllStock",value:function(){var e=this;console.log("Calling --- Loader "),this.setState({loading:!0},function(){fetch(ne.BASE_URL+"stock-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.Stock.length),e.setState({getAllStock:t.Stock,loading:!1}),console.log("Stock Item --- "+JSON.stringify(t.Stock));for(var a=0;a<t.Stock.length;a++)e.state.stockItem.push(t.Stock[a].name)})})}},{key:"fetchUnit",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"unit-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllunit:t.Unit});for(var a=0;a<t.Unit.length;a++)ri.push(t.Unit[a].name),e.setState({unitname:t.Unit[a].name}),e.setState({shortname:t.Unit[a].shortname});console.log("array"+ri),e.setState({stocks:ri}),console.log("Plan Names --- "+e.state.getAllunit)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"fetchAllVendor",value:function(){var e=this;localStorage.getItem("id");fetch(ne.BASE_URL+"vendor-list",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllVendor:t.Vendor}),console.log("Requisition Details --- "+JSON.stringify(t.Vendor))}).catch(function(e){console.log("ERROR --- "+e)})}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state.open),a={width:300,height:50,marginLeft:2,marginRight:2,marginTop:2},n={minWidth:300},i={width:135,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:t,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Enter GRN Details"),l.a.createElement(M.a,null,l.a.createElement("div",{style:{width:300,height:300}},l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement($e.a,{variant:"outlined",margin:"dense",style:n},l.a.createElement(fa.a,{htmlFor:"vendorname"},"Vendor Name"),l.a.createElement(ya.a,{style:{height:"40px",minHeight:"40px",marginLeft:4,marginRight:4},value:this.state.vendorname,onChange:function(t){return e.handleInputChangeValue(t)},labelWidth:this.state.labelWidthDep,inputProps:{name:"vendorname",id:"vendorname"}},this.state.getAllVendor.length>0&&this.state.getAllVendor.map(function(e){return l.a.createElement(se.a,{value:e._id},e.name)})))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:i,margin:"normal",id:"entry_date",label:"Entry Date",name:"entry_date",format:"dd/MM/yyyy",maxDate:this.state.max_entry_date,value:this.state.entry_date,onChange:this.handleEntrydateChange,KeyboardButtonProps:{"aria-label":"change date"}})),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:i,margin:"normal",id:"expiry_date",label:"Expiry Date",name:"expiry_date",format:"dd/MM/yyyy",minDate:this.state.expiry_date,value:this.state.expiry_date,onChange:this.handleExpirydateChange,KeyboardButtonProps:{"aria-label":"change date"}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",label:"GRN",required:!0,multiline:!0,rows:4,rowsMax:4,id:"grn",name:"grn",value:this.state.grn,onChange:this.handleInputChangeValue.bind(this)}))))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:function(t){return e.handleSubmit(t,"submit")},color:"primary"},"Submit"))),l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Add Stock"),l.a.createElement("form",{className:"reg"},l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"name",label:"Item Name",name:"name",value:this.state.name,onChange:function(t){return e.handleInputChangeValue(t)},onBlur:function(t){return e.handleBlur(t)}}),l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"stock",label:"QOH",name:"stock",type:"tel",value:this.state.stock,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"lower_limit",label:"Lower Limit",name:"lower_limit",type:"tel",value:this.state.lower_limit,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{style:a,variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"upper_limit",label:"Upper Limit",name:"upper_limit",type:"tel",value:this.state.upper_limit,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",{style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:n},l.a.createElement(fa.a,{htmlFor:"unit"},"Unit"),l.a.createElement(ya.a,{value:this.state.unit,onChange:function(t){return e.handleInputChangeValue(t)},inputProps:{name:"unit",id:"unit"}},this.state.getAllunit.map(function(e){return l.a.createElement(se.a,{value:e._id},e.name)})))),l.a.createElement("br",null),l.a.createElement("div",{style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:n},l.a.createElement(fa.a,{htmlFor:"unit"},"Stock Type"),l.a.createElement(ya.a,{value:this.state.stock_type,onChange:function(t){return e.handleInputChangeValue(t)},inputProps:{name:"stock_type",id:"stock_type"}},l.a.createElement(se.a,{value:"RM"},"Raw Materials"),l.a.createElement(se.a,{value:"FG"},"Finished Goods")))),l.a.createElement("br",null),l.a.createElement(Q.a,{variant:"contained",color:"primary",onClick:this.handleProceed},"Proceed")),l.a.createElement("br",null),l.a.createElement("br",null),this.state.showChild?l.a.createElement(si,{reloadChild:this.reloadChild}):null))}}]),t}(n.Component),di=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(ci);function ui(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var mi=[],hi=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a.state={getAllunit:[],name:"",shortname:"",units:[],delIndex:-1,editIndex:-1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n){this.setState({open:!0,name:e,shortname:t,unitid:a,editIndex:n})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,unitid:e,delIndex:t})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"fetchUnit",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"unit-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllunit:t.Unit});for(var a=0;a<t.Unit.length;a++)mi.push(t.Unit[a].name),e.setState({name:t.Unit[a].name}),e.setState({shortname:t.Unit[a].shortname});console.log("array"+mi),e.setState({stocks:mi}),console.log("Plan Names --- "+e.state.getAllunit)}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.name)ui("Please fill name");else{var t={name:this.state.name,shortname:this.state.shortname,unitid:this.state.unitid};this.state.getAllunit[this.state.editIndex].name=this.state.name,this.state.getAllunit[this.state.editIndex].shortname=this.state.shortname,this.state.getAllunit[this.state.editIndex].id=this.state.unitid,w.post("unit-update",t,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){ui("Unit is updates successfully")}else ui(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),this.setState(function(e){return{getAllunit:e.getAllunit.filter(function(e,a){return a!==t.state.delIndex})}}),fetch(ne.BASE_URL+"unit-delete",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({unitid:this.state.unitid})}).then(function(e){return e.json()}).then(function(e){console.log("DATA --- "+e+" --- "+e.value),console.log(e.message),1==e.value?ui("Unit is deleted successfully"):ui(e.message)}).catch(function(e){}),this.handleClose()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchUnit()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={cursor:"pointer",color:"red"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"};return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , to delete the unit?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Plan"),l.a.createElement("form",null,l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"name",label:"Unit Name",name:"name",value:this.state.name,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"shortname",value:this.state.shortname,label:"Shortname",name:"shortname",fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Name"),l.a.createElement(nt.a,{style:o},"Short Name"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllunit&&this.state.getAllunit.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.name),l.a.createElement(nt.a,{style:r},t.shortname),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t.name,t.shortname,t._id,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickDelete(t._id,a)}})))}))))}}]),t}(n.Component),gi=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(hi);function pi(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var fi=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({name:""}),e.setState({shortname:""})},e.state={name:"",shortname:"",showChild:!0},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""==this.state.name||""==this.state.shortname)pi("Please Fill required feilds");else{var a={name:this.state.name,shortname:this.state.shortname,dbname:localStorage.getItem("dbname")};console.log("DATA send --- "+JSON.stringify(a)),w.post("unit",a,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?pi("Unit is added successfully"):pi(e.data.message),t.reloadChild()}).catch(function(e){return console.log(e)})}this.resetField()}},{key:"render",value:function(){var e=this,t=(this.state.open,{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5});return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement("div",{id:"2"},l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:!0,id:"name",label:"Unit Name",name:"name",value:this.state.name,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement("div",{id:"3"},l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:!0,id:"shortname",label:"Short Name",name:"shortname",value:this.state.shortname,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary"},"Submit"),l.a.createElement("br",null),l.a.createElement("br",null),this.state.showChild?l.a.createElement(gi,{reloadChild:this.reloadChild}):null)))}}]),t}(n.Component),yi=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(fi),bi=a(324);function vi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ei(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var _i={display:"flex",flexWrap:"wrap"},Si={textAlign:"center",paddingTop:"2"},Ci={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},Ii={width:360,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},ki={width:350},Ai=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open2:!1,open1:!1,open3:!1,comment:"",lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}],selected_vendor:[],values:[]})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.onChangeCheckbox=function(e){var t=!a.state.checked;a.setState({checked:t,values:t?a.state.options:a.state.values}),console.log("Values --- "+JSON.stringify(a.state.values))},a.onChange=function(e){var t=e.length===a.state.options.length;a.setState({checked:!!t,values:e})},a.state={lineItems:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],getAllRequisition:[],getAllRequisitionBySearch:[],getAllRequisitionBySearchItem:[],getAllVendor:[],requisition_id:"",assignIndex:"",requisition_user_id:"",delIndex:-1,editIndex:-1,viewIndex:-1,searchItemIndex:-1,open:!1,open1:!1,dispStatus:!1,comment:"",getRFQRequisition:[],rfqIndex:-1,dispStatusRFQ:!1,amount:0,RFQhead:"",description:"",venderName:"",venderEmail:"",venderAddress:"",location:"",shipByDate:new Date,needByDate:new Date,minshipByDate:new Date,minneedByDate:new Date,total:0,vendor_list:"",vendor_name:[],vendor_id:[],selected_vendor:[],value:["coconut"],checked:!1,values:[],options:[{label:"",value:""}],items:[],loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleChange=a.handleChange.bind(Object(V.a)(a)),a.handleNeededbydateChange=a.handleNeededbydateChange.bind(Object(V.a)(a)),a.state.minshipByDate.setFullYear(a.state.shipByDate.getFullYear()),a.state.minneedByDate.setFullYear(a.state.shipByDate.getFullYear()),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){this.setState({value:Array.from(e.target.selectedOptions,function(e){return e.value})})}},{key:"handleClickView",value:function(e,t,a){this.setState({open2:!0,requisition_id:e,comment:t,viewIndex:a});for(var n=0;n<this.state.getAllRequisition[a].children.length;n++)console.log("Value Comming --- "+JSON.stringify(this.state.getAllRequisition[a].children)+" --- "+JSON.stringify(this.state.getAllRequisition[a].children[n].item_name.name)),this.state.lineItemsView.push({item_name:this.state.getAllRequisition[a].children[n].item_name.name,item_description:this.state.getAllRequisition[a].children[n].item_description,purpose:this.state.getAllRequisition[a].children[n].purpose,no_of_items:this.state.getAllRequisition[a].children[n].no_of_items});this.state.lineItemsView.splice(0,1)}},{key:"handleClick",value:function(e,t,a){this.setState({open:!0,requisition_id:e,requisition_user_id:t,editIndex:a});for(var n=0;n<this.state.getAllRequisition[a].children.length;n++)this.state.lineItems.push({item_name:this.state.getAllRequisition[a].children[n].item_name.name,item_description:this.state.getAllRequisition[a].children[n].item_description,purpose:this.state.getAllRequisition[a].children[n].purpose,no_of_items:this.state.getAllRequisition[a].children[n].no_of_items});this.state.dispStatus=!0}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllRequisitionBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllRequisitionBySearch=[],this.state.getAllRequisitionBySearchItem=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllRequisition.length;t++)if(this.state.searchBy===this.state.getAllRequisition[t].requisition_no){this.state.searchItemIndex=t,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[t]),this.forceUpdate(),e=1;break}if(0==e)for(var a=0;a<this.state.getAllRequisition.length;a++){var n=this.state.getAllRequisition[a].children.length;this.state.getAllRequisitionBySearchItem=[];for(var l=0;l<n;l++)this.state.getAllRequisitionBySearchItem.push(this.state.getAllRequisition[a].children[l]),this.state.getAllRequisitionBySearchItem[l].item_name.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=a,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[a]),this.forceUpdate(),e=1,console.log("Fine --- "))}}},{key:"fetchAllRequisition",value:function(){var e=this;localStorage.getItem("id");this.setState({loading:!0},function(){fetch(ne.BASE_URL+"requisition-list-inventory",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllRequisition:t.RequisitionList,getRFQRequisition:t.RequisitionList,loading:!1}),console.log("Requisition Details --- "+JSON.stringify(t.RequisitionList)),console.log("Value Name Item --- "+JSON.stringify(e.state.getAllRequisition[0].children[0].item_name.name))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"fetchAllVendor",value:function(){var e=this;localStorage.getItem("id");fetch(ne.BASE_URL+"vendor-list",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllVendor:t.Vendor}),console.log("Requisition Details --- "+JSON.stringify(t.Vendor));for(var a=0;a<e.state.getAllVendor.length;a++)e.state.options.push({label:e.state.getAllVendor[a].name,value:e.state.getAllVendor[a]._id});e.state.options.splice(0,1)}).catch(function(e){console.log("ERROR --- "+e)})}},{key:"fetchExpireDetailsByProduct",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"batch",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({items:e.state.items})}).then(function(e){return e.json()}).then(function(t){console.log("DATA --- "+JSON.stringify(t)+" --- "+JSON.stringify(t.value)),1==t.value?e.setState({loading:!1}):Ei("Something went wrong.")}).catch(function(e){})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllRequisition(),this.fetchAllVendor()}},{key:"assignReq",value:function(e,t,a,n){var l;this.state.open3=!0,this.state.items=[],l=this.state.getAllRequisition[a].children.length,console.log("childSize --- "+l);for(var i=0;i<l;i++)this.state.items.push(this.state.getAllRequisition[a].children[i].item_name._id);console.log("Items --- "+JSON.stringify(this.state.items)),this.fetchExpireDetailsByProduct(),n.preventDefault()}},{key:"assignRFQ",value:function(e,t,a,n){this.state.lineItemsRFQView.splice(0,1);if(n.preventDefault(),"RFQ"===t){this.setState({open1:!0,requisition_id:e,rfqIndex:a}),console.log("Test value --- "+JSON.stringify(this.state.getRFQRequisition[a]));for(var l=0;l<this.state.getRFQRequisition[a].rfq_process_data.length;l++)this.state.lineItemsRFQView.push({item_id:this.state.getRFQRequisition[a].rfq_process_data[l].item_name._id,item_name:this.state.getRFQRequisition[a].rfq_process_data[l].item_name.name,item_description:this.state.getRFQRequisition[a].rfq_process_data[l].item_description,purpose:this.state.getRFQRequisition[a].rfq_process_data[l].purpose,no_of_items:parseInt(this.state.getRFQRequisition[a].rfq_process_data[l].no_of_items)-parseInt(this.state.getRFQRequisition[a].rfq_process_data[l].item_name.stock)}),this.forceUpdate();this.state.dispStatusRFQ=!0}}},{key:"handleInputChangeValue",value:function(e,t){if(""===t.target.value||/^[0-9\b]+$/.test(t.target.value)){var a=t?t.target.name:t,n=t?t.target.value:t;console.log(a,":",n),this.setState(Object(y.a)({},a,n));var l=t.target,i=l.name,s=l.value,o=Object(ea.a)(this.state.lineItemsRFQView);o[e]=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?vi(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):vi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},o[e],Object(y.a)({},i,s)),this.setState({lineItemsRFQView:o})}}},{key:"handleInputChangeValueNewField",value:function(e,t){var a=t?t.target.name:t,n=t?t.target.value:t;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleInputChangeValueNewFieldMain",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleInputChangeValueRate",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleNeededbydateChange",value:function(e){this.setState({shipByDate:e}),this.setState({needByDate:e})}},{key:"createUI",value:function(){if(this.state.lineItemsView.length>0)return this.state.lineItemsView.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{style:_i},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(J.a,{style:Ci,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:e.item_name,InputProps:{disabled:!0}}))),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ci,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:e.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ci,variant:"outlined",margin:"dense",label:"Item Description",required:!0,multiline:!0,rows:1,rowsMax:1,id:"item_description",name:"item_description",value:e.item_description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ci,variant:"outlined",margin:"dense",label:"Purpose",required:!0,multiline:!0,rows:1,rowsMax:1,id:"purpose",name:"purpose",value:e.purpose,InputProps:{disabled:!0}}))))})}},{key:"createUIRFQ",value:function(){var e=this;if(console.log("lineItemsRFQView --- "+this.state.lineItemsRFQView.length+" --- "+JSON.stringify(this.state.lineItemsRFQView)),this.state.lineItemsRFQView.length>0)return this.state.lineItemsRFQView.map(function(t,a){return l.a.createElement("div",{key:a},l.a.createElement("div",{style:_i},l.a.createElement("div",null,l.a.createElement(J.a,{style:Ci,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:t.item_name,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ci,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:t.no_of_items,onChange:e.handleInputChangeValue.bind(e,a)}))))})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();for(var a=0;a<this.state.values.length;a++)this.state.selected_vendor.push(this.state.values[a].value);var n={rfq_head:this.state.RFQhead,rfq_description:this.state.description,need_by_date:this.state.needByDate,purchaseid:this.state.requisition_id,ship_to_location:this.state.location,requisition:this.state.lineItemsRFQView,vendor:this.state.selected_vendor};console.log("Values Send --- "+JSON.stringify(n)),w.post("rfq",n,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){Ei("RFQ is send successfully"),t.fetchAllRequisition()}else Ei(e.data.message)}).catch(function(e){return console.log(e)}),this.state.selected_vendor=[],this.handleClose()}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state),a=(t.open,t.open1),n=t.open2,i=t.open3,s={cursor:"pointer",color:"blue"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title1",maxWidth:"false"},l.a.createElement("div",{style:{width:700}},l.a.createElement(U.a,{id:"scroll-dialog-title"},"RFQ FORM",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"RFQhead",label:"Head",id:"RFQhead",fullWidth:!0,value:this.state.RFQhead,onChange:this.handleInputChangeValueNewFieldMain.bind(this)})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"description",label:"Description",id:"description",multiline:!0,rows:5,rowsMax:5,fullWidth:!0,value:this.state.description,onChange:this.handleInputChangeValueNewFieldMain.bind(this)})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),this.createUIRFQ(),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ii,variant:"outlined",margin:"dense",required:!0,name:"location",label:"Ship To Location",id:"location",value:this.state.location,onChange:this.handleInputChangeValueNewFieldMain.bind(this)})),l.a.createElement("div",null,l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:Ci,margin:"dense",id:"needByDate",label:"Need By Date",name:"needByDate",format:"dd/MM/yyyy",minDate:this.state.minneedByDate,value:this.state.needByDate,onChange:this.handleNeededbydateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement($e.a,{style:{minWidth:250}},l.a.createElement("div",null,l.a.createElement("input",{onChange:this.onChangeCheckbox,type:"checkbox",id:"selectAll",value:"selectAll",checked:this.state.checked}),l.a.createElement("label",{for:"selectAll"},"Select all"),l.a.createElement(bi.a,{menuPlacement:"top",isMulti:!0,onChange:this.onChange,options:this.state.options,value:this.state.values,placeholder:"Select Vendor"})))))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Send")))),l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"scroll-dialog-title"},"View Requisition Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:Si}},this.createUI(),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ci,variant:"outlined",margin:"dense",label:"Comment",multiline:!0,rows:1,rowsMax:1,name:"comment",value:this.state.comment,InputProps:{disabled:!0}})))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Ok"))),l.a.createElement(L.a,{open:i,onClose:this.handleClose,"aria-labelledby":"form-dialog-title1",maxWidth:"false"},l.a.createElement("div",{style:{width:700}},l.a.createElement(U.a,{id:"scroll-dialog-title"},"Batch Details With Item",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",null,this.createUIRFQ())),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Assign")))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:ki,label:"Search by Requisition no./Item Name",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllRequisitionBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Requisition Id"),l.a.createElement(nt.a,{style:o},"Requisition No."),l.a.createElement(nt.a,{style:o},"Item name"),l.a.createElement(nt.a,{style:o},"Requisitor Need By "),l.a.createElement(nt.a,{style:o},"Quantity"),l.a.createElement(nt.a,{style:o},"In Stock"),l.a.createElement(nt.a,{style:o},"View"),l.a.createElement(nt.a,{style:o},"Action"))),l.a.createElement(lt.a,null,this.state.getAllRequisitionBySearch.length>0&&this.state.getAllRequisitionBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.requisitionId),l.a.createElement(nt.a,{style:r},t.requisition_no),l.a.createElement(nt.a,{style:r},e.state.getAllRequisitionBySearch[a].children&&e.state.getAllRequisitionBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:r},zl()(t.needed_by_date).format("DD/MM/YYYY")),l.a.createElement(nt.a,{style:r},e.state.getAllRequisitionBySearch[a].children&&e.state.getAllRequisitionBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:r},e.state.getAllRequisitionBySearch[a].children&&e.state.getAllRequisitionBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.stock," ")})),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:s,onClick:function(a){return e.handleClickView(t._id,t.comment,e.state.searchItemIndex)}})),"wait"!=t.action?"Assign"===t.action?l.a.createElement(nt.a,{style:s,onClick:function(a){return e.assignReq(t.requisition_id,t.action,e.state.searchItemIndex,a)}},t.action):l.a.createElement(nt.a,{style:s,onClick:function(a){return e.assignRFQ(t._id,t.action,e.state.searchItemIndex,a)}},t.action):l.a.createElement(nt.a,null))}))):[this.state.getAllRequisition.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Requisition Id"),l.a.createElement(nt.a,{style:o},"Requisition No."),l.a.createElement(nt.a,{style:o},"Item name"),l.a.createElement(nt.a,{style:o},"Requisitor Need By "),l.a.createElement(nt.a,{style:o},"Quantity"),l.a.createElement(nt.a,{style:o},"In Stock"),l.a.createElement(nt.a,{style:o},"View"),l.a.createElement(nt.a,{style:o},"Action"))),l.a.createElement(lt.a,null,this.state.getAllRequisition.length>0&&this.state.getAllRequisition.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.requisitionId),l.a.createElement(nt.a,{style:r},t.requisition_no),l.a.createElement(nt.a,{style:r},e.state.getAllRequisition[a].children&&e.state.getAllRequisition[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:r},zl()(t.needed_by_date).format("DD/MM/YYYY")),l.a.createElement(nt.a,{style:r},e.state.getAllRequisition[a].children&&e.state.getAllRequisition[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:r},e.state.getAllRequisition[a].children&&e.state.getAllRequisition[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.stock," ")})),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickView(t._id,t.comment,a)}})),"wait"!=t.action?"Assign"===t.action?l.a.createElement(nt.a,{style:s,onClick:function(n){return e.assignReq(t.requisition_id,t.action,a,n)}},t.action):l.a.createElement(nt.a,{style:s,onClick:function(n){return e.assignRFQ(t._id,t.action,a,n)}},t.action):l.a.createElement(nt.a,null))}))):l.a.createElement("h3",null,"No requisition list to be displayed")])}}]),t}(n.Component),xi=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Ai);N.a.settings={theme:"ios"};var Oi={display:"flex",flexWrap:"wrap"},wi={textAlign:"center",paddingTop:"2"},Ri={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},ji={width:350},Di=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open2:!1,comment:"",lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}]})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={lineItems:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],getAllRequisition:[],getAllRequisitionBySearch:[],getAllRequisitionBySearchItem:[],requisition_id:"",assignIndex:"",requisition_user_id:"",delIndex:-1,editIndex:-1,viewIndex:-1,searchItemIndex:-1,open:!1,dispStatus:!1,comment:"",loading:!1},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClickView",value:function(e,t,a){this.setState({open2:!0,requisition_id:e,comment:t,viewIndex:a});for(var n=0;n<this.state.getAllRequisition[a].children.length;n++)console.log("Value Comming --- "+JSON.stringify(this.state.getAllRequisition[a].children)+" --- "+JSON.stringify(this.state.getAllRequisition[a].children[n].item_name.name)),this.state.lineItemsView.push({item_name:this.state.getAllRequisition[a].children[n].item_name.name,item_description:this.state.getAllRequisition[a].children[n].item_description,purpose:this.state.getAllRequisition[a].children[n].purpose,no_of_items:this.state.getAllRequisition[a].children[n].no_of_items});this.state.lineItemsView.splice(0,1)}},{key:"handleClick",value:function(e,t,a){this.setState({open:!0,requisition_id:e,requisition_user_id:t,editIndex:a});for(var n=0;n<this.state.getAllRequisition[a].children.length;n++)this.state.lineItems.push({item_name:this.state.getAllRequisition[a].children[n].item_name.name,item_description:this.state.getAllRequisition[a].children[n].item_description,purpose:this.state.getAllRequisition[a].children[n].purpose,no_of_items:this.state.getAllRequisition[a].children[n].no_of_items});this.state.dispStatus=!0}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllRequisitionBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllRequisitionBySearch=[],this.state.getAllRequisitionBySearchItem=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllRequisition.length;t++)if(this.state.searchBy===this.state.getAllRequisition[t].requisition_no){this.state.searchItemIndex=t,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[t]),this.forceUpdate(),e=1;break}if(0==e)for(var a=0;a<this.state.getAllRequisition.length;a++){var n=this.state.getAllRequisition[a].children.length;this.state.getAllRequisitionBySearchItem=[];for(var l=0;l<n;l++)this.state.getAllRequisitionBySearchItem.push(this.state.getAllRequisition[a].children[l]),console.log("this.state.getAllRequisitionBySearchItem --- "+JSON.stringify(this.state.getAllRequisitionBySearchItem[l].item_name.name+" --- "+this.state.searchBy)),this.state.getAllRequisitionBySearchItem[l].item_name.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=a,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[a]),this.forceUpdate(),e=1,console.log("Fine --- "))}}},{key:"fetchAllRequisition",value:function(){var e=this;localStorage.getItem("id");this.setState({loading:!0},function(){fetch(ne.BASE_URL+"completed-requisition-list",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllRequisition:t.RequisitionList,loading:!1}),console.log("Requisition Details --- "+JSON.stringify(t.RequisitionList)),console.log("Value Name Item --- "+JSON.stringify(e.state.getAllRequisition[0].children[0].item_name.name))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllRequisition()}},{key:"createUI",value:function(){if(this.state.lineItemsView.length>0)return this.state.lineItemsView.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{style:Oi},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(J.a,{style:Ri,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:e.item_name,InputProps:{disabled:!0}}))),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ri,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:e.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ri,variant:"outlined",margin:"dense",label:"Item Description",required:!0,multiline:!0,rows:1,rowsMax:1,id:"item_description",name:"item_description",value:e.item_description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ri,variant:"outlined",margin:"dense",label:"Purpose",required:!0,multiline:!0,rows:1,rowsMax:1,id:"purpose",name:"purpose",value:e.purpose,InputProps:{disabled:!0}}))))})}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state.open2),a={cursor:"pointer",color:"blue"},n={fontWeight:"bold",fontSize:"15px",color:"black"},i={fontSize:"12px"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:t,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"scroll-dialog-title"},"View Requisition Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:wi}},this.createUI(),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:Ri,variant:"outlined",margin:"dense",label:"Comment",multiline:!0,rows:1,rowsMax:1,name:"comment",value:this.state.comment,InputProps:{disabled:!0}})))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"Ok"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:ji,label:"Search by Requisition no./Item Name",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllRequisitionBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:n},"Requisition No."),l.a.createElement(nt.a,{style:n},"Item name"),l.a.createElement(nt.a,{style:n},"Quantity"),l.a.createElement(nt.a,{style:n},"Status"),l.a.createElement(nt.a,{style:n},"In Stock"),l.a.createElement(nt.a,{style:n},"View"))),l.a.createElement(lt.a,null,this.state.getAllRequisitionBySearch.length>0&&this.state.getAllRequisitionBySearch.map(function(t,n){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:i},t.requisition_no),l.a.createElement(nt.a,{style:i},e.state.getAllRequisitionBySearch[n].children&&e.state.getAllRequisitionBySearch[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:i},e.state.getAllRequisitionBySearch[n].children&&e.state.getAllRequisitionBySearch[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:i},t.status),l.a.createElement(nt.a,null,e.state.getAllRequisitionBySearch[n].children&&e.state.getAllRequisitionBySearch[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.stock," ")})),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:a,onClick:function(a){return e.handleClickView(t._id,t.comment,e.state.searchItemIndex)}})))}))):[this.state.getAllRequisition.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:n},"Requisition No."),l.a.createElement(nt.a,{style:n},"Item name"),l.a.createElement(nt.a,{style:n},"Quantity"),l.a.createElement(nt.a,{style:n},"Status"),l.a.createElement(nt.a,{style:n},"In Stock"),l.a.createElement(nt.a,{style:n},"View"))),l.a.createElement(lt.a,null,this.state.getAllRequisition.length>0&&this.state.getAllRequisition.map(function(t,n){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:i},t.requisition_no),l.a.createElement(nt.a,{style:i},e.state.getAllRequisition[n].children&&e.state.getAllRequisition[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:i},e.state.getAllRequisition[n].children&&e.state.getAllRequisition[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:i},t.status),l.a.createElement(nt.a,null,e.state.getAllRequisition[n].children&&e.state.getAllRequisition[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.stock," ")})),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:a,onClick:function(a){return e.handleClickView(t._id,t.comment,n)}})))}))):l.a.createElement("h3",null,"No requisition list to be displayed")])}}]),t}(n.Component),qi=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Di);N.a.settings={theme:"ios"};var Ni={display:"flex",flexWrap:"wrap"},Pi={textAlign:"center",paddingTop:"2"},Bi={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},Fi={width:350},Vi=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open2:!1,comment:"",lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}]})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={lineItems:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],getAllRequisition:[],getAllRequisitionBySearch:[],getAllRequisitionBySearchItem:[],requisition_id:"",assignIndex:"",requisition_user_id:"",delIndex:-1,editIndex:-1,viewIndex:-1,searchItemIndex:-1,open:!1,dispStatus:!1,comment:"",loading:!1},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClickView",value:function(e,t,a){this.setState({open2:!0,requisition_id:e,comment:t,viewIndex:a});for(var n=0;n<this.state.getAllRequisition[a].children.length;n++)console.log("Value Comming --- "+JSON.stringify(this.state.getAllRequisition[a].children)+" --- "+JSON.stringify(this.state.getAllRequisition[a].children[n].item_name.name)),this.state.lineItemsView.push({item_name:this.state.getAllRequisition[a].children[n].item_name.name,item_description:this.state.getAllRequisition[a].children[n].item_description,purpose:this.state.getAllRequisition[a].children[n].purpose,no_of_items:this.state.getAllRequisition[a].children[n].no_of_items});this.state.lineItemsView.splice(0,1)}},{key:"handleClick",value:function(e,t,a){this.setState({open:!0,requisition_id:e,requisition_user_id:t,editIndex:a});for(var n=0;n<this.state.getAllRequisition[a].children.length;n++)this.state.lineItems.push({item_name:this.state.getAllRequisition[a].children[n].item_name.name,item_description:this.state.getAllRequisition[a].children[n].item_description,purpose:this.state.getAllRequisition[a].children[n].purpose,no_of_items:this.state.getAllRequisition[a].children[n].no_of_items});this.state.dispStatus=!0}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllRequisitionBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllRequisitionBySearch=[],this.state.getAllRequisitionBySearchItem=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllRequisition.length;t++)if(this.state.searchBy===this.state.getAllRequisition[t].requisition_no){this.state.searchItemIndex=t,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[t]),this.forceUpdate(),e=1;break}if(0==e)for(var a=0;a<this.state.getAllRequisition.length;a++)"rfq"===this.state.getAllRequisition[a].status&&(this.state.getAllRequisition[a].status="Send for Quotation"),this.state.searchBy===this.state.getAllRequisition[a].status&&(this.state.searchItemIndex=a,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[a]),this.forceUpdate(),e=1,console.log("Fine"));if(0==e)for(var n=0;n<this.state.getAllRequisition.length;n++){var l=this.state.getAllRequisition[n].children.length;this.state.getAllRequisitionBySearchItem=[];for(var i=0;i<l;i++)this.state.getAllRequisitionBySearchItem.push(this.state.getAllRequisition[n].children[i]),this.state.getAllRequisitionBySearchItem[i].item_name.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=n,this.state.getAllRequisitionBySearch.push(this.state.getAllRequisition[n]),this.forceUpdate(),e=1,console.log("Fine --- "))}}},{key:"fetchAllRFQProcessingRequisition",value:function(){var e=this;localStorage.getItem("id");this.setState({loading:!0},function(){fetch(ne.BASE_URL+"rfq",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllRequisition:t.RFQRequisitionList,loading:!1}),console.log("Requisition Details --- "+JSON.stringify(t.RFQRequisitionList)),console.log("Value Name Item --- "+JSON.stringify(e.state.getAllRequisition[0].children[0].item_name.name))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllRFQProcessingRequisition()}},{key:"createUI",value:function(){if(this.state.lineItemsView.length>0)return this.state.lineItemsView.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{style:Ni},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(J.a,{style:Bi,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:e.item_name,InputProps:{disabled:!0}}))),l.a.createElement("div",null,l.a.createElement(J.a,{style:Bi,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:e.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Bi,variant:"outlined",margin:"dense",label:"Item Description",required:!0,multiline:!0,rows:1,rowsMax:1,id:"item_description",name:"item_description",value:e.item_description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Bi,variant:"outlined",margin:"dense",label:"Purpose",required:!0,multiline:!0,rows:1,rowsMax:1,id:"purpose",name:"purpose",value:e.purpose,InputProps:{disabled:!0}}))))})}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state.open2),a={cursor:"pointer",color:"blue"},n={fontWeight:"bold",fontSize:"15px",color:"black"},i={fontWeight:"bold",fontSize:"15px",color:"black",textAlign:"center"},s={fontSize:"12px"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:t,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"scroll-dialog-title"},"View Requisition Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:Pi}},this.createUI(),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:Bi,variant:"outlined",margin:"dense",label:"Comment",multiline:!0,rows:1,rowsMax:1,name:"comment",value:this.state.comment,InputProps:{disabled:!0}})))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"primary"},"Ok"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:Fi,label:"Search by Requisition no./Item Name",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllRequisitionBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:n},"Requisition No."),l.a.createElement(nt.a,{style:n},"Item name"),l.a.createElement(nt.a,{style:i},"Required Quantity"),l.a.createElement(nt.a,{style:n},"Status"),l.a.createElement(nt.a,{style:n},"In Stock"),l.a.createElement(nt.a,{style:n},"View"))),l.a.createElement(lt.a,null,this.state.getAllRequisitionBySearch.length>0&&this.state.getAllRequisitionBySearch.map(function(t,n){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.requisition_no),l.a.createElement(nt.a,{style:s},e.state.getAllRequisitionBySearch[n].children&&e.state.getAllRequisitionBySearch[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:{textAlign:"center"}},e.state.getAllRequisitionBySearch[n].children&&e.state.getAllRequisitionBySearch[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:s},(t.status.replace(/"/g,""),"rfq"===t.status.replace(/"/g,"")?"Send for Quotation":t.status)),l.a.createElement(nt.a,{style:s},e.state.getAllRequisitionBySearch[n].children&&e.state.getAllRequisitionBySearch[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.stock," ")})),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:a,onClick:function(a){return e.handleClickView(t._id,t.comment,e.state.searchItemIndex)}})))}))):[this.state.getAllRequisition.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:n},"Requisition No."),l.a.createElement(nt.a,{style:n},"Item name"),l.a.createElement(nt.a,{style:i},"Required Quantity"),l.a.createElement(nt.a,{style:n},"Status"),l.a.createElement(nt.a,{style:n},"In Stock"),l.a.createElement(nt.a,{style:n},"View"))),l.a.createElement(lt.a,null,this.state.getAllRequisition.length>0&&this.state.getAllRequisition.map(function(t,n){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.requisition_no),l.a.createElement(nt.a,{style:s},e.state.getAllRequisition[n].children&&e.state.getAllRequisition[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:{textAlign:"center"}},e.state.getAllRequisition[n].children&&e.state.getAllRequisition[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:s},(t.status.replace(/"/g,""),"rfq"===t.status.replace(/"/g,"")?"Send for Quotation":t.status)),l.a.createElement(nt.a,{style:s},e.state.getAllRequisition[n].children&&e.state.getAllRequisition[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.stock," ")})),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:a,onClick:function(a){return e.handleClickView(t._id,t.comment,n)}})))}))):l.a.createElement("h3",null,"No requisition list to be displayed")])}}]),t}(n.Component),Li=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Vi);function Ui(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Mi={width:350},Ti=[],Wi=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={name:"",address:"",phone:"",email:"",getAllVendor:[],getAllVendorBySearch:[],vendors:[],delIndex:-1,editIndex:-1,searchItemIndex:-1,loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n,l,i){this.setState({open:!0,name:e,address:t,phone:a,email:n,vendorid:l,editIndex:i})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,vendorid:e,delIndex:t})}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllVendorBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllVendorBySearch=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllVendor.length;t++)this.state.searchBy===this.state.getAllVendor[t].name&&(this.state.searchItemIndex=t,this.state.getAllVendorBySearch.push(this.state.getAllVendor[t]),this.forceUpdate(),e=1,console.log("Fine"));if(0==e)for(var a=0;a<this.state.getAllVendor.length;a++)if(this.state.searchBy===this.state.getAllVendor[a].email){this.state.searchItemIndex=a,this.state.getAllVendorBySearch.push(this.state.getAllVendor[a]),this.forceUpdate(),e=1;break}}},{key:"fetchAllVendor",value:function(){var e=this;console.log("Calling --- "),this.setState({loading:!0},function(){fetch(ne.BASE_URL+"vendor-list",{method:"GET",headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log("Size --- "+t.Vendor.length),e.setState({getAllVendor:t.Vendor,loading:!1}),console.log("getAllVendor --- "+JSON.stringify(e.state.getAllVendor));for(var a=0;a<t.Vendor.length;a++)Ti.push(t.Vendor[a].name),e.setState({name:t.Vendor[a].name}),e.setState({id:t.Vendor[a]._id}),e.setState({address:t.Vendor[a].address}),e.setState({email:t.Vendor[a].email}),e.setState({phone:t.Vendor[a].phone});e.setState({vendors:Ti})})}),this.forceUpdate()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllVendor()}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""==this.state.name)Ui("Please fill name");else{var a={name:this.state.name,address:this.state.address,phone:this.state.phone,email:this.state.email,vendorid:this.state.vendorid};this.state.getAllVendor[this.state.editIndex].name=this.state.name,this.state.getAllVendor[this.state.editIndex].address=this.state.address,this.state.getAllVendor[this.state.editIndex].phone=this.state.phone,this.state.getAllVendor[this.state.editIndex].email=this.state.email,this.state.getAllVendor[this.state.editIndex].id=this.state.vendorid,w.post("vendor-update",a,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){t.showAlert("Vendor is updates successfully")}else t.showAlert(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}}},{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),this.setState(function(e){return{fetchAllVendor:e.getAllVendor.filter(function(e,a){return a!==t.state.delIndex})}}),fetch(ne.BASE_URL+"vendor-delete",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({vendorid:this.state.vendorid})}).then(function(e){return e.json()}).then(function(e){console.log("DATA --- "+e+" --- "+e.value),console.log(e.message),1==e.value?Ui("Vendor is deleted successfully"):Ui(e.message)}).catch(function(e){}),this.handleClose(),this.fetchAllVendor()}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state),a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={cursor:"pointer",color:"red"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},'"Are sure , to delete the Stock?"'),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Vendor"),l.a.createElement("form",null,l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"name",label:"Item Name",name:"name",value:this.state.name,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"address",value:this.state.address,label:"Address",name:"address",multiline:!0,rows:1,rowsMax:1,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"phone",value:this.state.phone,label:"Phone",name:"phone",type:"tel",fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"email",value:this.state.email,label:"Email",name:"email",type:"email",fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:Mi,label:"Search by Name/Email",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllVendorBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Vendor Name"),l.a.createElement(nt.a,{style:o},"Vendor Address"),l.a.createElement(nt.a,{style:o},"Phone Number"),l.a.createElement(nt.a,{style:o},"Email"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllVendorBySearch&&this.state.getAllVendorBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.name),l.a.createElement(nt.a,{style:r},t.address),l.a.createElement(nt.a,{style:r},t.phone),l.a.createElement(nt.a,{style:r},t.email),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(a){return e.handleClick(t.name,t.address,t.phone,t.email,t._id,e.state.searchItemIndex)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(a){return e.handleClickDelete(t._id,e.state.searchItemIndex)}})))}))):[this.state.getAllVendor.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Vendor Name"),l.a.createElement(nt.a,{style:o},"Vendor Address"),l.a.createElement(nt.a,{style:o},"Phone Number"),l.a.createElement(nt.a,{style:o},"Email"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllVendor&&this.state.getAllVendor.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.name),l.a.createElement(nt.a,{style:r},t.address),l.a.createElement(nt.a,{style:r},t.phone),l.a.createElement(nt.a,{style:r},t.email),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t.name,t.address,t.phone,t.email,t._id,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickDelete(t._id,a)}})))}))):l.a.createElement("h3",null,"No list to be displayed")])}}]),t}(n.Component),Qi=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}},{})(Wi);N.a.settings={theme:"ios"};var Ji=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({name:""}),e.setState({address:""}),e.setState({phone:""}),e.setState({email:""})},e.state={open:!1,name:"",address:"",phone:"",email:"",showChild:!0},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a))}},{key:"showAlert",value:function(e){N.a.alert({message:e})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),""==this.state.name)this.showAlert("Please fill name");else{var a={name:this.state.name,address:this.state.address,phone:this.state.phone,email:this.state.email};this.forceUpdate(),w.post("vendor",a,{headers:{"x-access-token":localStorage.getItem("token"),"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(t.resetField(),console.log(e.data.value),console.log(e.data.message),1==e.data.value){t.showAlert("Vendor is added successfully")}else t.showAlert(e.data.message);t.resetField(),t.reloadChild()}).catch(function(e){return console.log(e)})}}},{key:"handleInputChangeValueUnit",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,"::",n),this.setState(Object(y.a)({},a,n))}},{key:"render",value:function(){var e=this,t=(this.state.open,{width:300,height:50,marginLeft:2,marginRight:2,marginTop:2});return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement(W.a,{variant:"h5",gutterBottom:!0,paragraph:!0},"Add Vendor"),l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",null,l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"name",label:"Vendor Name",name:"name",value:this.state.name,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"address",label:"Address",name:"address",multiline:!0,rows:1,rowsMax:1,value:this.state.address,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"phone",label:"Phone",name:"phone",type:"tel",value:this.state.phone,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:"true",inputProps:{"padding-top":"0","padding-bottom":"0"},id:"email",label:"Email Id",name:"email",type:"email",value:this.state.email,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement("br",null),l.a.createElement(Q.a,{type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null)," ",l.a.createElement("br",null),this.state.showChild?l.a.createElement(Qi,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),zi=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Ji);function Gi(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Yi(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Gi(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gi(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ki(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Hi={display:"flex",flexWrap:"wrap"},Xi={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},Zi={width:135,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},$i={width:220,height:80,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},es=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){n.setState({lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}],selected_vendor:[],total:0,total_amount:0,discount:0,cgst_tax:0,sgst_tax:0,igst_tax:0,unit_price:0})},n.state=(a={lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:""}],getAllRequisition:[],amount:0,unit_price:0,RFQhead:"",description:"",venderName:"",venderEmail:"",venderAddress:"",location:"",shipByDate:new Date,needByDate:new Date,minshipByDate:new Date,minneedByDate:new Date,total:0,total_amount:0,discount:0,cgst_tax:0,sgst_tax:0,igst_tax:0,vendor_list:"",vendor_name:[],vendor_id:[],selected_vendor:[],value:["coconut"],message:"",lastSegment:"",getAllRequisitionValue:[],getAllVendorDetails:[]},Object(y.a)(a,"needByDate",""),Object(y.a)(a,"req_id",""),Object(y.a)(a,"pur_id",""),Object(y.a)(a,"ven_id",""),Object(y.a)(a,"val_amount",[]),Object(y.a)(a,"loading",!1),Object(y.a)(a,"submitted",!1),a),n.handleSubmit=n.handleSubmit.bind(Object(V.a)(n)),n.handleChange=n.handleChange.bind(Object(V.a)(n)),n.handleNeededbydateChange=n.handleNeededbydateChange.bind(Object(V.a)(n)),n.handleShipdbydateChange=n.handleShipdbydateChange.bind(Object(V.a)(n)),n.state.minshipByDate.setFullYear(n.state.shipByDate.getFullYear()),n.state.minneedByDate.setFullYear(n.state.shipByDate.getFullYear()),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){this.setState({value:Array.from(e.target.selectedOptions,function(e){return e.value})})}},{key:"fetchRFQDetails",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"rfq-vendor",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({encrypt:e.state.lastSegment})}).then(function(e){return e.json()}).then(function(t){if(console.log("DATA --- "+JSON.stringify(t)+" --- "+JSON.stringify(t.value)),1==t.value){e.setState({message:t.message,getAllRequisition:t.requisition_value,getAllRequisitionValue:t.requisition_value,getAllVendorDetails:t.vendor_details,loading:!1}),console.log("res.message --- "+JSON.stringify(t.message)+" --- "+t.message.length),console.log("res.requisition_value.rfq_head --- "+JSON.stringify(t.requisition_value.rfq_head)),e.state.req_id=t.requisition_value.requisition_id._id,e.state.pur_id=t.requisition_value._id,e.state.ven_id=t.vendor_details._id,e.state.RFQhead=t.requisition_value.rfq_head,e.state.description=t.requisition_value.rfq_description,e.state.venderName=t.vendor_details.name,e.state.venderEmail=t.vendor_details.email,e.state.venderAddress=t.vendor_details.address,e.state.location=t.requisition_value.ship_to_location,zl.a.locale("en"),e.state.needByDate=zl()(t.requisition_value.need_by_date).format("DD/MM/YYYY");for(var a=0;a<e.state.getAllRequisition.children.length;a++)console.log("Value Comming --- "+JSON.stringify(e.state.getAllRequisition.children)+" --- "+JSON.stringify(e.state.getAllRequisition.children[a].item_name.name)),e.state.lineItemsRFQView.push({item_id:e.state.getAllRequisition.children[a].item_name._id,item_name:e.state.getAllRequisition.children[a].item_name.name,item_description:e.state.getAllRequisition.children[a].item_description,purpose:e.state.getAllRequisition.children[a].purpose,no_of_items:e.state.getAllRequisition.children[a].no_of_items});e.state.lineItemsRFQView.splice(0,1);e.forceUpdate()}else Ki("Something went wrong.")}).catch(function(e){})})}},{key:"componentDidMount",value:function(){var e=window.location.href.split("/");this.state.lastSegment=e.pop()||e.pop(),console.log("lastSegment --- "+this.state.lastSegment),console.log("Child calling ------ "),this.fetchRFQDetails()}},{key:"handleInputChangeValue",value:function(e,t){if(""===t.target.value||/^[0-9\b]+$/.test(t.target.value)){var a=t?t.target.name:t,n=t?t.target.value:t;console.log(a,":",n),this.setState(Object(y.a)({},a,n));var l=t.target,i=l.name,s=l.value,o=Object(ea.a)(this.state.lineItemsRFQView);o[e]=Yi({},o[e],Object(y.a)({},i,s)),this.state.amount=parseFloat(o[e].no_of_items)*parseFloat(n),console.log("Test Val --- "+this.state.amount),o[e]=Yi({},o[e],Object(y.a)({},"amount",this.state.amount)),this.setState({lineItemsRFQView:o});var r=Object(ea.a)(this.state.val_amount);r[e]=Yi({},r[e],Object(y.a)({},"amount",this.state.amount)),this.setState({val_amount:r});for(var c=0,d=0;d<r.length;d++)console.log("Price --- "+JSON.stringify(r[d])),c+=parseFloat(r[d].amount),console.log("Price Amount --- "+c);this.state.total_amount=parseFloat(c);var u=this.state.total_amount;isNaN(u)?this.state.total=0:(u-=u*parseFloat(this.state.discount/100),console.log("total_amt ---after discount ---- "+u),u+=u*parseFloat(this.state.cgst_tax/100),console.log("total_amt ---after cgst ---- "+u),u+=u*parseFloat(this.state.sgst_tax/100),console.log("total_amt ---after sgst ---- "+u),u+=u*parseFloat(this.state.igst_tax/100),console.log("total_amt ---after igst ---- "+u),this.state.total=parseFloat(u))}}},{key:"handleDiscountChangeValue",value:function(e){if(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a));var n=this.state.total_amount;isNaN(parseFloat(a))?(a=0,n-=n*parseFloat(parseFloat(a)/100),n+=n*parseFloat(this.state.cgst_tax/100),n+=n*parseFloat(this.state.sgst_tax/100),n+=n*parseFloat(this.state.igst_tax/100),this.state.total=parseFloat(n)):(n-=n*parseFloat(parseFloat(a)/100),n+=n*parseFloat(this.state.cgst_tax/100),n+=n*parseFloat(this.state.sgst_tax/100),n+=n*parseFloat(this.state.igst_tax/100),this.state.total=parseFloat(n))}}},{key:"handleInputChangeCGSTTax",value:function(e){if(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a));var n=this.state.total_amount;isNaN(parseFloat(a))?(a=0,n-=n*parseFloat(parseFloat(this.state.discount)/100),n+=n*parseFloat(parseFloat(a)/100),n+=n*parseFloat(parseFloat(this.state.sgst_tax)/100),n+=n*parseFloat(parseFloat(this.state.igst_tax)/100),this.state.total=parseFloat(n)):(n-=n*parseFloat(parseFloat(this.state.discount)/100),n+=n*parseFloat(parseFloat(a)/100),n+=n*parseFloat(parseFloat(this.state.sgst_tax)/100),n+=n*parseFloat(parseFloat(this.state.igst_tax)/100),this.state.total=parseFloat(n))}}},{key:"handleInputChangeSGSTTax",value:function(e){if(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a));var n=this.state.total_amount;isNaN(parseFloat(a))?(a=0,n-=n*parseFloat(parseFloat(this.state.discount)/100),n+=n*parseFloat(parseFloat(this.state.cgst_tax)/100),n+=n*parseFloat(parseFloat(a)/100),n+=n*parseFloat(parseFloat(this.state.igst_tax)/100),this.state.total=parseFloat(n)):(n-=n*parseFloat(parseFloat(this.state.discount)/100),n+=n*parseFloat(parseFloat(this.state.cgst_tax)/100),n+=n*parseFloat(parseFloat(a)/100),n+=n*parseFloat(parseFloat(this.state.igst_tax)/100),this.state.total=parseFloat(n))}}},{key:"handleInputChangeIGSTTax",value:function(e){if(""===e.target.value||/^[0-9\b]+$/.test(e.target.value)){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a));var n=this.state.total_amount;isNaN(parseFloat(a))?(a=0,n-=n*parseFloat(parseFloat(this.state.discount)/100),n+=n*parseFloat(parseFloat(this.state.cgst_tax)/100),n+=n*parseFloat(parseFloat(this.state.sgst_tax)/100),n+=n*parseFloat(parseFloat(a)/100),this.state.total=parseFloat(n)):(n-=n*parseFloat(parseFloat(this.state.discount)/100),n+=n*parseFloat(parseFloat(this.state.cgst_tax)/100),n+=n*parseFloat(parseFloat(this.state.sgst_tax)/100),n+=n*parseFloat(parseFloat(a)/100),this.state.total=parseFloat(n))}}},{key:"handleNeededbydateChange",value:function(e){this.setState({needByDate:e})}},{key:"handleShipdbydateChange",value:function(e){this.setState({shipByDate:e})}},{key:"createUIRFQ",value:function(){var e=this;if(this.state.lineItemsRFQView.length>0)return this.state.lineItemsRFQView.map(function(t,a){return l.a.createElement("div",{key:a},l.a.createElement("div",{style:Hi},l.a.createElement("div",{style:{border:"2px solid blue",display:"flex",flexWrap:"wrap",padding:"20px"}},l.a.createElement("div",null,l.a.createElement(J.a,{style:Xi,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:t.item_name,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xi,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:t.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xi,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"unit_price",label:"Price Per Unit (\u20b9)",id:"unit_price",value:0==e.state.submitted?t.unit_price:"",onChange:e.handleInputChangeValue.bind(e,a)})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xi,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"amount",label:"Amount (\u20b9)",id:"amount",value:isNaN(parseFloat(t.unit_price))?0:parseFloat(t.no_of_items)*parseFloat(t.unit_price),InputProps:{disabled:!0}})))))})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.submitted=!0;var t={requisition_id:this.state.req_id,purchase_id:this.state.pur_id,vendor_id:this.state.ven_id,total_price:this.state.total,tax:this.state.tax,discount:this.state.discount,cgst_tax:this.state.cgst_tax,sgst_tax:this.state.sgst_tax,igst_tax:this.state.igst_tax,price_valid:this.state.shipByDate,children:this.state.lineItemsRFQView};console.log("Values Send --- "+JSON.stringify(t)),w.post("rfq-vendor-submission",t,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){Ki("Quotation is submitted successfully"),document.getElementById("btnSub").style.display="none"}else Ki(e.data.message)}).catch(function(e){return console.log("Test --- "+e)}),this.handleClose()}},{key:"render",value:function(){this.state.loading;var e=this.state;e.open,e.open1,e.open2;return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,!this.state.message.length>0?l.a.createElement("form",{autocomplete:"off"},l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"RFQhead",label:"Head",id:"RFQhead",fullWidth:!0,value:this.state.RFQhead,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"description",label:"Description",id:"description",multiline:!0,rows:5,rowsMax:5,fullWidth:!0,value:this.state.description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderName",label:"Vender Name",id:"venderName",fullWidth:!0,value:this.state.venderName,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderEmail",label:"Vender Email",id:"venderEmail",fullWidth:!0,value:this.state.venderEmail,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderAddress",label:"Vender Address",id:"venderAddress",multiline:!0,rows:1,rowsMax:1,fullWidth:!0,value:this.state.venderAddress,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),this.createUIRFQ(),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:$i,variant:"outlined",margin:"dense",required:!0,name:"location",label:"Ship To Location",id:"location",value:this.state.location,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:$i,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"cgst_tax",label:"CGST (%)",id:"cgst_tax",value:this.state.cgst_tax,onChange:this.handleInputChangeCGSTTax.bind(this)}),l.a.createElement(J.a,{style:$i,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"sgst_tax",label:"SGST (%)",id:"sgst_tax",value:this.state.sgst_tax,onChange:this.handleInputChangeSGSTTax.bind(this)}),l.a.createElement(J.a,{style:$i,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"igst_tax",label:"IGST (%)",id:"igst_tax",value:this.state.igst_tax,onChange:this.handleInputChangeIGSTTax.bind(this)}),l.a.createElement(J.a,{style:$i,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"discount",label:"Discount (%)",id:"discount",value:this.state.discount,onChange:this.handleDiscountChangeValue.bind(this)}),l.a.createElement(J.a,{style:$i,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"total",label:"Total Amount (\u20b9)",id:"total",value:this.state.total,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Xi,variant:"outlined",margin:"dense",required:!0,name:"needByDate",label:"Need By Date",id:"needByDate",value:this.state.needByDate,InputProps:{disabled:!0}}),l.a.createElement(Ft.b,{utils:vt.a},l.a.createElement(Vt.a,{style:Zi,margin:"dense",id:"shipByDate",label:"Ship By Date",name:"shipByDate",format:"dd/MM/yyyy",minDate:this.state.minshipByDate,value:this.state.shipByDate,onChange:this.handleShipdbydateChange,KeyboardButtonProps:{"aria-label":"change date"}}))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(Q.a,{style:{marginLeft:"150px",marginRight:"50px"},type:"submit",variant:"contained",color:"secondary",onClick:this.handleClose},"Cancel"),"\xa0\xa0\xa0",l.a.createElement(Q.a,{id:"btnSub",type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Send"))):l.a.createElement("h1",null,this.state.message))}}]),t}(n.Component),ts=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(es);function as(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var ns={display:"flex",flexWrap:"wrap"},ls={textAlign:"center",paddingTop:"2"},is={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},ss={width:220,height:80,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},os={width:350},rs={marginLeft:"100px",marginRight:"50px",textTransform:"none"},cs=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){var e;a.setState({open2:!1,comment:"",lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsRFQView:[(e={item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:"",unit_price:""},Object(y.a)(e,"unit_price",""),Object(y.a)(e,"amount",""),e)]})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:"",unit_price:"",amount:""}],getAllSubmittedList:[],getAllSubmittedListBySearch:[],getAllSubmittedListBySearchItem:[],requisition_id:"",assignIndex:"",requisition_user_id:"",delIndex:-1,editIndex:-1,viewIndex:-1,searchItemIndex:-1,open:!1,dispStatus:!1,comment:"",RFQhead:"",description:"",venderName:"",venderEmail:"",venderAddress:"",location:"",shipByDate:new Date,needByDate:new Date,minshipByDate:new Date,minneedByDate:new Date,total:0,discount:0,cgst_tax:0,sgst_tax:0,igst_tax:0,status:"",loading:!1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleRevised=a.handleRevised.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleRevised",value:function(e){e.preventDefault();var t={rfq_id:this.state.requisition_id};console.log("Values Send --- "+JSON.stringify(t)),w.post("revised-rfq",t,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?(as(e.data.message),document.getElementById("btnSub").style.display="none",document.getElementById("btnRev").style.display="none"):as(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={rfq_id:this.state.requisition_id};console.log("Values Send --- "+JSON.stringify(t)),w.post("request-approval",t,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),e.data.value,as(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"handleClickView",value:function(e,t){console.log("INDEX --- "+t),this.setState({open2:!0,requisition_id:e,viewIndex:t}),this.state.requisition_id=e,console.log("this.state.requisition_id --- "+this.state.requisition_id),this.fetchProposalDetailsById()}},{key:"fetchProposalDetailsById",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"vendor-rfq-detail",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({rfq_id:e.state.requisition_id})}).then(function(e){return e.json()}).then(function(t){if(console.log("DATA --- "+JSON.stringify(t)+" --- "+JSON.stringify(t.value)),1==t.value){e.setState({getAllRequisition:t.list,loading:!1}),e.state.RFQhead=t.list.purchase_id.rfq_head,console.log("this.state.RFQhead --- "+e.state.RFQhead),e.state.description=t.list.purchase_id.rfq_description,e.state.venderName=t.list.vendor_id.name,e.state.venderEmail=t.list.vendor_id.email,e.state.venderAddress=t.list.vendor_id.address,e.state.location=t.list.purchase_id.ship_to_location,e.state.discount=t.list.Discount,e.state.cgst_tax=t.list.cgst_tax,e.state.sgst_tax=t.list.sgst_tax,e.state.igst_tax=t.list.igst_tax,e.state.total=t.list.total_price,e.state.status=t.list.status,zl.a.locale("en"),e.state.needByDate=zl()(t.list.requisition_id.needed_by_date).format("DD/MM/YYYY"),e.state.shipByDate=zl()(t.list.price_valid).format("DD/MM/YYYY");for(var a=0;a<e.state.getAllRequisition.children.length;a++)console.log("Value Comming --- "+JSON.stringify(e.state.getAllRequisition.children)+" --- "+JSON.stringify(e.state.getAllRequisition.children[a].item_name.name)),e.state.lineItemsRFQView.push({item_id:e.state.getAllRequisition.children[a]._id,item_name:e.state.getAllRequisition.children[a].item_name.name,item_description:e.state.getAllRequisition.children[a].item_description,purpose:e.state.getAllRequisition.children[a].purpose,no_of_items:e.state.getAllRequisition.children[a].no_of_items,unit_price:e.state.getAllRequisition.children[a].unit_price,amount:e.state.getAllRequisition.children[a].vendor_price});e.state.lineItemsRFQView.splice(0,1);e.forceUpdate()}else as("Something went wrong.")}).catch(function(e){})})}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllSubmittedListBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllSubmittedListBySearch=[],this.state.getAllSubmittedListBySearchItem=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllSubmittedList.length;t++)if(this.state.searchBy===this.state.getAllSubmittedList[t].requisition_no){this.state.searchItemIndex=t,this.state.getAllSubmittedListBySearch.push(this.state.getAllSubmittedList[t]),this.forceUpdate(),e=1;break}if(0==e)for(var a=0;a<this.state.getAllSubmittedList.length;a++)if(this.state.searchBy===this.state.getAllSubmittedList[a].rfq_no){this.state.searchItemIndex=a,this.state.getAllSubmittedListBySearch.push(this.state.getAllSubmittedList[a]),this.forceUpdate(),e=1;break}if(0==e)for(var n=0;n<this.state.getAllSubmittedList.length;n++){var l=this.state.getAllSubmittedList[n].item_name.length;this.state.getAllSubmittedListBySearchItem=[];for(var i=0;i<l;i++)this.state.getAllSubmittedListBySearchItem.push(this.state.getAllSubmittedList[n].item_name[i]),this.state.getAllSubmittedListBySearchItem[i].item_name.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=n,this.state.getAllSubmittedListBySearch.push(this.state.getAllSubmittedList[n]),this.forceUpdate(),e=1,console.log("Fine --- "))}if(0==e)for(var s=0;s<this.state.getAllSubmittedList.length;s++){var o=this.state.getAllSubmittedList[s].vendor.length;this.state.getAllSubmittedListBySearchItem=[];for(var r=0;r<o;r++)this.state.getAllSubmittedListBySearchItem.push(this.state.getAllSubmittedList[s].vendor[r]),this.state.getAllSubmittedListBySearchItem[r].vendor_id.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=s,this.state.getAllSubmittedListBySearch.push(this.state.getAllSubmittedList[s]),this.forceUpdate(),e=1,console.log("Fine --- "))}}},{key:"fetchAllSubmittedList",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"rfq-vendor-submitted-list",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllSubmittedList:t.list,loading:!1}),console.log("getAllSubmittedList --- "+JSON.stringify(e.state.getAllSubmittedList))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllSubmittedList()}},{key:"createUIRFQ",value:function(){if(this.state.lineItemsRFQView.length>0)return this.state.lineItemsRFQView.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{style:ns},l.a.createElement("div",{style:{border:"2px solid blue",display:"flex",flexWrap:"wrap",padding:"20px"}},l.a.createElement("div",null,l.a.createElement(J.a,{style:is,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:e.item_name,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:is,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:e.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:is,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"unit_price",label:"Price Per Unit (\u20b9)",id:"unit_price",value:e.unit_price,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:is,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"amount",label:"Amount (\u20b9)",id:"amount",value:e.amount,InputProps:{disabled:!0}})))))})}},{key:"createUI",value:function(){return l.a.createElement("div",null,l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"RFQhead",label:"Head",id:"RFQhead",fullWidth:!0,value:this.state.RFQhead,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"description",label:"Description",id:"description",multiline:!0,rows:5,rowsMax:5,fullWidth:!0,value:this.state.description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderName",label:"Vender Name",id:"venderName",fullWidth:!0,value:this.state.venderName,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderEmail",label:"Vender Email",id:"venderEmail",fullWidth:!0,value:this.state.venderEmail,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderAddress",label:"Vender Address",id:"venderAddress",multiline:!0,rows:1,rowsMax:1,fullWidth:!0,value:this.state.venderAddress,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),this.createUIRFQ(),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:ss,variant:"outlined",margin:"dense",required:!0,name:"location",label:"Ship To Location",id:"location",value:this.state.location,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ss,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"cgst_tax",label:"CGST (%)",id:"cgst_tax",value:this.state.cgst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ss,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"sgst_tax",label:"SGST (%)",id:"sgst_tax",value:this.state.sgst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ss,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"igst_tax",label:"IGST (%)",id:"igst_tax",value:this.state.igst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ss,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"discount",label:"Discount (%)",id:"discount",value:this.state.discount,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ss,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"total",label:"Total Amount (\u20b9)",id:"total",value:this.state.total,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:is,variant:"outlined",margin:"dense",required:!0,name:"needByDate",label:"Need By Date",id:"needByDate",value:this.state.needByDate,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:is,variant:"outlined",margin:"dense",required:!0,name:"shipByDate",label:"Ship By Date",id:"shipByDate",value:this.state.shipByDate,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(Q.a,{style:rs,variant:"contained",color:"secondary",onClick:this.handleClose},"Close"),"\xa0\xa0\xa0","submitted"===this.state.status?l.a.createElement(Q.a,{style:{marginRight:"50px",textTransform:"none"},id:"btnSub",type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Send Quotation For Approval"):"","\xa0\xa0\xa0","submitted"===this.state.status?l.a.createElement(Q.a,{style:{textTransform:"none"},id:"btnRev",type:"submit",variant:"contained",color:"primary",onClick:this.handleRevised},"Send For Revision"):"")))}},{key:"render",value:function(){var e=this,t=this.state.open2,a={cursor:"pointer",color:"blue"},n={fontWeight:"bold",fontSize:"15px",color:"black"},i={fontWeight:"bold",fontSize:"15px",color:"black",textAlign:"center"},s={fontSize:"12px"};this.state.loading;return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:t,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"false"},l.a.createElement("div",{style:{width:800}},l.a.createElement(U.a,{id:"scroll-dialog-title"},"View Quotation Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:ls}},this.createUI())))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:os,label:"Search by RFQ/Requisition/Item/Vendor",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllSubmittedListBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:n},"RFQ No."),l.a.createElement(nt.a,{style:n},"Requisition No."),l.a.createElement(nt.a,{style:n},"Item name"),l.a.createElement(nt.a,{style:i},"Quantity"),l.a.createElement(nt.a,{style:n},"Vendor Response"))),l.a.createElement(lt.a,null,this.state.getAllSubmittedListBySearch.length>0&&this.state.getAllSubmittedListBySearch.map(function(t,n){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.rfq_no),l.a.createElement(nt.a,{style:s},t.requisition_no),l.a.createElement(nt.a,{style:s},e.state.getAllSubmittedListBySearch[n].item_name&&e.state.getAllSubmittedListBySearch[n].item_name.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:{textAlign:"center"}},e.state.getAllSubmittedListBySearch[n].item_name&&e.state.getAllSubmittedListBySearch[n].item_name.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:a},e.state.getAllSubmittedListBySearch[n].vendor&&e.state.getAllSubmittedListBySearch[n].vendor.map(function(t,a){return l.a.createElement("p",{onClick:function(a){return e.handleClickView(t._id,e.state.searchItemIndex)}},t.vendor_id.name," ")})))}))):[this.state.getAllSubmittedList.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:n},"RFQ No."),l.a.createElement(nt.a,{style:n},"Requisition No."),l.a.createElement(nt.a,{style:n},"Item name"),l.a.createElement(nt.a,{style:i},"Quantity"),l.a.createElement(nt.a,{style:n},"Vendor Response"))),l.a.createElement(lt.a,null,this.state.getAllSubmittedList.length>0&&this.state.getAllSubmittedList.map(function(t,n){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.rfq_no),l.a.createElement(nt.a,{style:s},t.requisition_no),l.a.createElement(nt.a,{style:s},e.state.getAllSubmittedList[n].item_name&&e.state.getAllSubmittedList[n].item_name.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:{textAlign:"center"}},e.state.getAllSubmittedList[n].item_name&&e.state.getAllSubmittedList[n].item_name.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:a},e.state.getAllSubmittedList[n].vendor&&e.state.getAllSubmittedList[n].vendor.map(function(t,a){return l.a.createElement("p",{onClick:function(n){return e.handleClickView(t._id,a)}},t.vendor_id.name," ")})))}))):l.a.createElement("h3",null,"No list to be displayed")])}}]),t}(n.Component),ds=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(cs);function us(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ms(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?us(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):us(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function hs(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var gs={display:"flex",flexWrap:"wrap"},ps={textAlign:"center",paddingTop:"2"},fs={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},ys={width:220,height:80,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},bs={width:420,height:80,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},vs={width:350},Es=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){var e;a.setState({open1:!1,open2:!1,comment:"",lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsRFQView:[(e={item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:"",unit_price:""},Object(y.a)(e,"unit_price",""),Object(y.a)(e,"amount",""),e)]})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:"",unit_price:"",amount:""}],getAllQoutationApprovalList:[],getAllQoutationApprovalListBySearch:[],getAllQoutationApprovalListSearchItem:[],requisition_id:"",vendor_id:"",purchase_id:"",assignIndex:"",requisition_user_id:"",delIndex:-1,editIndex:-1,viewIndex:-1,searchItemIndex:-1,open:!1,open1:!1,open2:!1,dispStatus:!1,comment:"",RFQhead:"",description:"",venderName:"",venderEmail:"",venderAddress:"",location:"",shipByDate:new Date,needByDate:new Date,minshipByDate:new Date,minneedByDate:new Date,total:0,discount:0,cgst_tax:0,sgst_tax:0,igst_tax:0,status:"",loading:!1,val_amount:[],reject_note_purchase:""},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleReject=a.handleReject.bind(Object(V.a)(a)),a.proceedReject=a.proceedReject.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"proceedReject",value:function(e){console.log("Clicked"),this.setState({open2:!1,open1:!0}),this.state.open2=!1,this.state.open1=!0}},{key:"handleReject",value:function(e){var t=this;e.preventDefault(),console.log("Reject Calling --- ");var a={vendor_id:this.state.vendor_id,rfq_id:this.state.requisition_id,reject_note_purchase:this.state.reject_note_purchase};console.log("Values Send --- "+JSON.stringify(a)),w.post("abc",a,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?(hs(e.data.message),t.handleClose(),t.fetchAllQoutationApprovalList()):(hs(e.data.message),t.handleClose())}).catch(function(e){return console.log(e)})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={total_price:this.state.total,rfq_id:this.state.requisition_id,vendor_id:this.state.vendor_id,purchaseid:this.state.purchase_id,name:localStorage.getItem("name"),children:this.state.lineItemsRFQView};console.log("Values Send --- +++ "+JSON.stringify(a)),w.post("po-send",a,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?(hs(e.data.message),t.handleClose(),t.fetchAllQoutationApprovalList()):(hs(e.data.message),t.handleClose())}).catch(function(e){return console.log(e)})}},{key:"handleClickView",value:function(e,t,a,n){console.log("INDEX --- "+n),this.setState({open2:!0,requisition_id:e,vendor_id:t,purchase_id:a,viewIndex:n}),this.state.requisition_id=t,console.log("this.state.requisition_id --- "+this.state.requisition_id),this.fetchProposalDetailsById()}},{key:"fetchProposalDetailsById",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"vendor-rfq-detail",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({rfq_id:e.state.requisition_id})}).then(function(e){return e.json()}).then(function(t){if(console.log("DATA --- "+JSON.stringify(t)+" --- "+JSON.stringify(t.value)),1==t.value){e.setState({getAllRequisition:t.list,loading:!1}),e.state.RFQhead=t.list.purchase_id.rfq_head,console.log("this.state.RFQhead --- "+e.state.RFQhead),e.state.description=t.list.purchase_id.rfq_description,e.state.venderName=t.list.vendor_id.name,e.state.venderEmail=t.list.vendor_id.email,e.state.venderAddress=t.list.vendor_id.address,e.state.location=t.list.purchase_id.ship_to_location,e.state.discount=t.list.Discount,e.state.cgst_tax=t.list.cgst_tax,e.state.sgst_tax=t.list.sgst_tax,e.state.igst_tax=t.list.igst_tax,e.state.total=t.list.total_price,e.state.status=t.list.status,zl.a.locale("en"),e.state.needByDate=zl()(t.list.purchase_id.need_by_date).format("DD/MM/YYYY"),console.log("needby"+t.list.purchase_id.need_by_date),e.state.shipByDate=zl()(t.list.price_valid).format("DD/MM/YYYY");for(var a=0;a<e.state.getAllRequisition.children.length;a++)console.log("Value Comming --- "+JSON.stringify(e.state.getAllRequisition.children)+" --- "+JSON.stringify(e.state.getAllRequisition.children[a].item_name.name)),e.state.lineItemsRFQView.push({item_id:e.state.getAllRequisition.children[a].item_name._id,item_name:e.state.getAllRequisition.children[a].item_name.name,item_description:e.state.getAllRequisition.children[a].item_description,purpose:e.state.getAllRequisition.children[a].purpose,no_of_items:e.state.getAllRequisition.children[a].no_of_items,unit_price:e.state.getAllRequisition.children[a].unit_price,amount:e.state.getAllRequisition.children[a].vendor_price});e.state.lineItemsRFQView.splice(0,1);e.forceUpdate()}else hs("Something went wrong.")}).catch(function(e){})})}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllQoutationApprovalListBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllQoutationApprovalListBySearch=[],this.state.getAllQoutationApprovalListBySearchItem=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllQoutationApprovalList.length;t++)this.state.searchBy===this.state.getAllQoutationApprovalList[t].purchase_id.rfq_id&&(this.state.searchItemIndex=t,this.state.getAllQoutationApprovalListBySearch.push(this.state.getAllQoutationApprovalList[t]),this.forceUpdate(),e=1,console.log("Fine"));if(0==e)for(var a=0;a<this.state.getAllQoutationApprovalList.length;a++){var n=this.state.getAllQoutationApprovalList[a].children.length;this.state.getAllQoutationApprovalListBySearchItem=[];for(var l=0;l<n;l++)this.state.getAllQoutationApprovalListBySearchItem.push(this.state.getAllQoutationApprovalList[a].children[l]),this.state.getAllQoutationApprovalListBySearchItem[l].item_name.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=a,this.state.getAllQoutationApprovalListBySearch.push(this.state.getAllQoutationApprovalList[a]),this.forceUpdate(),e=1,console.log("Fine --- "))}if(0==e)for(var i=0;i<this.state.getAllQoutationApprovalList.length;i++)this.state.searchBy===this.state.getAllQoutationApprovalList[i].vendor_id.name&&(this.state.searchItemIndex=i,this.state.getAllQoutationApprovalListBySearch.push(this.state.getAllQoutationApprovalList[i]),this.forceUpdate(),e=1,console.log("Fine"))}},{key:"fetchAllQoutationApprovalList",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"qoutation-approval-list",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log("Test res --- "+JSON.stringify(t)),e.setState({getAllQoutationApprovalList:t.list,loading:!1}),console.log("getAllQoutationApprovalList --- "+JSON.stringify(e.state.getAllQoutationApprovalList))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllQoutationApprovalList()}},{key:"handleInputChangeValue",value:function(e,t){if(""===t.target.value||/^[0-9\b]+$/.test(t.target.value)){var a=t?t.target.name:t,n=t?t.target.value:t;console.log(a,":",n),this.setState(Object(y.a)({},a,n));var l=t.target,i=l.name,s=l.value,o=Object(ea.a)(this.state.lineItemsRFQView);o[e]=ms({},o[e],Object(y.a)({},i,s)),this.state.amount=parseFloat(o[e].unit_price)*parseFloat(n),console.log("Test Val --- "+this.state.amount),o[e]=ms({},o[e],Object(y.a)({},"amount",this.state.amount)),this.setState({lineItemsRFQView:o});var r=Object(ea.a)(this.state.val_amount);r[e]=ms({},r[e],Object(y.a)({},"amount",this.state.amount)),this.setState({val_amount:r});for(var c=0,d=0;d<r.length;d++)console.log("Price --- "+JSON.stringify(r[d])),c+=parseFloat(r[d].amount),console.log("Price Amount --- "+c);this.state.total=parseFloat(c),isNaN(parseFloat(this.state.discount))||(this.state.total=parseFloat(this.state.total)-parseFloat(this.state.discount)/100),isNaN(parseFloat(this.state.cgst_tax))||(this.state.total=parseFloat(this.state.total)-parseFloat(this.state.cgst_tax)/100),isNaN(parseFloat(this.state.sgst_tax))||(this.state.total=parseFloat(this.state.total)-parseFloat(this.state.sgst_tax)/100),isNaN(parseFloat(this.state.igst_tax))||(this.state.total=parseFloat(this.state.total)-parseFloat(this.state.igst_tax)/100)}console.log("Change Calling --- ")}},{key:"handleInputChangeValueReject",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),console.log("Change Calling --- ")}},{key:"createUIRFQ",value:function(){var e=this;if(this.state.lineItemsRFQView.length>0)return this.state.lineItemsRFQView.map(function(t,a){return l.a.createElement("div",{key:a},l.a.createElement("div",{style:gs},l.a.createElement("div",{style:{border:"2px solid blue",display:"flex",flexWrap:"wrap",padding:"20px"}},l.a.createElement("div",null,l.a.createElement(J.a,{style:fs,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:t.item_name,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:fs,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:t.no_of_items,onChange:e.handleInputChangeValue.bind(e,a)})),l.a.createElement("div",null,l.a.createElement(J.a,{style:fs,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"unit_price",label:"Price Per Unit (\u20b9)",id:"unit_price",value:t.unit_price,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:fs,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"amount",label:"Amount (\u20b9)",id:"amount",value:t.amount,InputProps:{disabled:!0}})))))})}},{key:"createUI",value:function(){return l.a.createElement("div",null,l.a.createElement("form",{autocomplete:"off"},l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"RFQhead",label:"Head",id:"RFQhead",fullWidth:!0,value:this.state.RFQhead,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"description",label:"Description",id:"description",multiline:!0,rows:5,rowsMax:5,fullWidth:!0,value:this.state.description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderName",label:"Vender Name",id:"venderName",fullWidth:!0,value:this.state.venderName,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderEmail",label:"Vender Email",id:"venderEmail",fullWidth:!0,value:this.state.venderEmail,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderAddress",label:"Vender Address",id:"venderAddress",multiline:!0,rows:1,rowsMax:1,fullWidth:!0,value:this.state.venderAddress,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),this.createUIRFQ(),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:ys,variant:"outlined",margin:"dense",required:!0,name:"location",label:"Ship To Location",id:"location",value:this.state.location,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ys,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"cgst_tax",label:"CGST (%)",id:"cgst_tax",value:this.state.cgst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ys,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"sgst_tax",label:"SGST (%)",id:"sgst_tax",value:this.state.sgst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ys,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"igst_tax",label:"IGST (%)",id:"igst_tax",value:this.state.igst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ys,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"discount",label:"Discount (%)",id:"discount",value:this.state.discount,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ys,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"total",label:"Total Amount (\u20b9)",id:"total",value:this.state.total,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:fs,variant:"outlined",margin:"dense",required:!0,name:"needByDate",label:"Need By Date",id:"needByDate",value:this.state.needByDate,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:fs,variant:"outlined",margin:"dense",required:!0,name:"shipByDate",label:"Ship By Date",id:"shipByDate",value:this.state.shipByDate,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{id:"btn"},l.a.createElement(Q.a,{style:{marginLeft:"50px",marginRight:"50px",textTransform:"none"},id:"btnSub",type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Approve Create & Send PO"),l.a.createElement(Q.a,{style:{textTransform:"none"},id:"btnRej",variant:"contained",color:"secondary",onClick:this.proceedReject},"Reject Quotation"))))}},{key:"render",value:function(){var e=this,t=this.state,a=t.open1,n=t.open2,i={cursor:"pointer",color:"blue"},s={fontWeight:"bold",fontSize:"15px",color:"black"},o={fontWeight:"bold",fontSize:"15px",color:"black",textAlign:"center"},r={fontSize:"12px"};this.state.loading;return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"false"},l.a.createElement("div",{style:{width:800}},l.a.createElement(U.a,{id:"scroll-dialog-title"},"View Quotation Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",{autocomplete:"off",className:"reg",noValidate:!0,style:{styles1:ps}},this.createUI())))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title-text"},l.a.createElement(U.a,{id:"form-dialog-title-text"},"Note "),l.a.createElement(M.a,null,l.a.createElement("div",null,l.a.createElement(J.a,{style:bs,variant:"outlined",margin:"dense",label:"Reject Note",multiline:!0,rows:3,rowsMax:3,name:"reject_note_purchase",value:this.state.reject_note_purchase,onChange:this.handleInputChangeValueReject.bind(this)}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:function(t){return e.handleReject(t)},color:"primary"},"Ok"))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:vs,label:"Search by RFQ/Item/Vendor",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllQoutationApprovalListBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},"RFQ No."),l.a.createElement(nt.a,{style:s},"Item name"),l.a.createElement(nt.a,{style:o},"Quantity"),l.a.createElement(nt.a,{style:s},"Vendor Response"))),l.a.createElement(lt.a,null,this.state.getAllQoutationApprovalListBySearch.length>0&&this.state.getAllQoutationApprovalListBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.purchase_id.rfq_id),l.a.createElement(nt.a,{style:r},e.state.getAllQoutationApprovalListBySearch[a].children&&e.state.getAllQoutationApprovalListBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:{textAlign:"center"}},e.state.getAllQoutationApprovalListBySearch[a].children&&e.state.getAllQoutationApprovalListBySearch[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:i},l.a.createElement("p",{onClick:function(a){return e.handleClickView(t._id,t.vendor_id._id,t.purchase_id._id,e.state.searchItemIndex)}},t.vendor_id.name," ")))}))):[this.state.getAllQoutationApprovalList.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},"RFQ No."),l.a.createElement(nt.a,{style:s},"Item name"),l.a.createElement(nt.a,{style:o},"Quantity"),l.a.createElement(nt.a,{style:s},"Vendor Response"))),l.a.createElement(lt.a,null,this.state.getAllQoutationApprovalList.length>0&&this.state.getAllQoutationApprovalList.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.purchase_id.rfq_id),l.a.createElement(nt.a,{style:r},e.state.getAllQoutationApprovalList[a].children&&e.state.getAllQoutationApprovalList[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:{textAlign:"center"}},e.state.getAllQoutationApprovalList[a].children&&e.state.getAllQoutationApprovalList[a].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:i},l.a.createElement("p",{onClick:function(n){return e.handleClickView(t._id,t.vendor_id._id,t.purchase_id._id,a)}},t.vendor_id.name," ")))}))):l.a.createElement("h3",null,"No pending quotation list to be displayed")])}}]),t}(n.Component),_s=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Es);N.a.settings={theme:"ios"};var Ss={display:"flex",flexWrap:"wrap"},Cs={textAlign:"center",paddingTop:"2"},Is={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},ks={width:220,height:80,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},As={width:350},xs={marginLeft:"200px",marginRight:"50px",textTransform:"none"},Os=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){var e;a.setState({open2:!1,comment:"",lineItemsView:[{item_name:"",item_description:"",purpose:"",no_of_items:""}],lineItemsRFQView:[(e={item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:"",unit_price:""},Object(y.a)(e,"unit_price",""),Object(y.a)(e,"amount",""),e)]})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:"",unit_price:"",amount:""}],getAllPOSendList:[],getAllPOSendListBySearch:[],getAllPOSendListSearchItem:[],requisition_id:"",vendor_id:"",assignIndex:"",requisition_user_id:"",delIndex:-1,editIndex:-1,viewIndex:-1,searchItemIndex:-1,open:!1,dispStatus:!1,comment:"",RFQhead:"",description:"",venderName:"",venderEmail:"",venderAddress:"",location:"",shipByDate:new Date,needByDate:new Date,minshipByDate:new Date,minneedByDate:new Date,total:0,discount:0,cgst_tax:0,sgst_tax:0,igst_tax:0,status:"",loading:!1,val_amount:[]},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClickView",value:function(e,t,a){console.log("INDEX --- "+a),this.setState({open2:!0,requisition_id:e,vendor_id:t,viewIndex:a}),this.state.requisition_id=t,console.log("this.state.requisition_id --- "+this.state.requisition_id),this.fetchProposalDetailsById()}},{key:"fetchProposalDetailsById",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"vendor-rfq-detail",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({rfq_id:e.state.requisition_id})}).then(function(e){return e.json()}).then(function(t){if(console.log("DATA --- "+JSON.stringify(t)+" --- "+JSON.stringify(t.value)),1==t.value){e.setState({getAllRequisition:t.list,loading:!1}),e.state.RFQhead=t.list.purchase_id.rfq_head,console.log("this.state.RFQhead --- "+e.state.RFQhead),e.state.description=t.list.purchase_id.rfq_description,e.state.venderName=t.list.vendor_id.name,e.state.venderEmail=t.list.vendor_id.email,e.state.venderAddress=t.list.vendor_id.address,e.state.location=t.list.purchase_id.ship_to_location,e.state.discount=t.list.Discount,e.state.cgst_tax=t.list.cgst_tax,e.state.sgst_tax=t.list.sgst_tax,e.state.igst_tax=t.list.igst_tax,e.state.total=t.list.total_price,e.state.status=t.list.status,zl.a.locale("en"),e.state.needByDate=zl()(t.list.requisition_id.needed_by_date).format("DD/MM/YYYY"),e.state.shipByDate=zl()(t.list.price_valid).format("DD/MM/YYYY");for(var a=0;a<e.state.getAllRequisition.children.length;a++)console.log("Value Comming --- "+JSON.stringify(e.state.getAllRequisition.children)+" --- "+JSON.stringify(e.state.getAllRequisition.children[a].item_name.name)),e.state.lineItemsRFQView.push({item_id:e.state.getAllRequisition.children[a]._id,item_name:e.state.getAllRequisition.children[a].item_name.name,item_description:e.state.getAllRequisition.children[a].item_description,purpose:e.state.getAllRequisition.children[a].purpose,no_of_items:e.state.getAllRequisition.children[a].no_of_items,unit_price:e.state.getAllRequisition.children[a].unit_price,amount:e.state.getAllRequisition.children[a].vendor_price});e.state.lineItemsRFQView.splice(0,1);e.forceUpdate()}else n="Something went wrong.",N.a.alert({message:n});var n}).catch(function(e){})})}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllPOSendListBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllPOSendListBySearch=[],this.state.getAllPOSendListBySearchItem=[];var e=0;console.log("Search Calling --- "+this.state.searchBy);for(var t=0;t<this.state.getAllPOSendList.length;t++)this.state.searchBy===this.state.getAllPOSendList[t].purchase_id.rfq_id&&(this.state.searchItemIndex=t,this.state.getAllPOSendListBySearch.push(this.state.getAllPOSendList[t]),this.forceUpdate(),e=1,console.log("Fine"));if(0==e)for(var a=0;a<this.state.getAllPOSendList.length;a++){var n=this.state.getAllPOSendList[a].children.length;this.state.getAllPOSendListBySearchItem=[];for(var l=0;l<n;l++)this.state.getAllPOSendListBySearchItem.push(this.state.getAllPOSendList[a].children[l]),this.state.getAllPOSendListBySearchItem[l].item_name.name===this.state.searchBy&&(console.log("True ---"),this.state.searchItemIndex=a,this.state.getAllPOSendListBySearch.push(this.state.getAllPOSendList[a]),this.forceUpdate(),e=1,console.log("Fine --- "))}if(0==e)for(var i=0;i<this.state.getAllPOSendList.length;i++)this.state.searchBy===this.state.getAllPOSendList[i].vendor_id.name&&(this.state.searchItemIndex=i,this.state.getAllPOSendListBySearch.push(this.state.getAllPOSendList[i]),this.forceUpdate(),e=1,console.log("Fine"))}},{key:"fetchAllQoutationApprovalList",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"po-send-list",{method:"get",headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllPOSendList:t.list,loading:!1}),console.log("getAllPOSendList --- "+JSON.stringify(e.state.getAllPOSendList))}).catch(function(e){console.log("ERROR --- "+e)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchAllQoutationApprovalList()}},{key:"createUIRFQ",value:function(){if(this.state.lineItemsRFQView.length>0)return this.state.lineItemsRFQView.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{style:Ss},l.a.createElement("div",{style:{border:"2px solid blue",display:"flex",flexWrap:"wrap",padding:"20px"}},l.a.createElement("div",null,l.a.createElement(J.a,{style:Is,variant:"outlined",margin:"dense",required:!0,name:"item_name",label:"item_name",value:e.item_name,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Is,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:e.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Is,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"unit_price",label:"Price Per Unit (\u20b9)",id:"unit_price",value:e.unit_price,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Is,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"amount",label:"Amount (\u20b9)",id:"amount",value:e.amount,InputProps:{disabled:!0}})))))})}},{key:"createUI",value:function(){return l.a.createElement("div",null,l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"RFQhead",label:"Head",id:"RFQhead",fullWidth:!0,value:this.state.RFQhead,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"description",label:"Description",id:"description",multiline:!0,rows:5,rowsMax:5,fullWidth:!0,value:this.state.description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderName",label:"Vender Name",id:"venderName",fullWidth:!0,value:this.state.venderName,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderEmail",label:"Vender Email",id:"venderEmail",fullWidth:!0,value:this.state.venderEmail,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderAddress",label:"Vender Address",id:"venderAddress",multiline:!0,rows:1,rowsMax:1,fullWidth:!0,value:this.state.venderAddress,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),this.createUIRFQ(),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:ks,variant:"outlined",margin:"dense",required:!0,name:"location",label:"Ship To Location",id:"location",value:this.state.location,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ks,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"cgst_tax",label:"CGST (%)",id:"cgst_tax",value:this.state.cgst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ks,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"sgst_tax",label:"SGST (%)",id:"sgst_tax",value:this.state.sgst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ks,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"igst_tax",label:"IGST (%)",id:"igst_tax",value:this.state.igst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ks,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"discount",label:"Discount (%)",id:"discount",value:this.state.discount,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:ks,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"total",label:"Total Amount (\u20b9)",id:"total",value:this.state.total,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Is,variant:"outlined",margin:"dense",required:!0,name:"needByDate",label:"Need By Date",id:"needByDate",value:this.state.needByDate,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Is,variant:"outlined",margin:"dense",required:!0,name:"shipByDate",label:"Ship By Date",id:"shipByDate",value:this.state.shipByDate,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(Q.a,{style:xs,id:"btnClose",variant:"contained",color:"primary",onClick:this.handleClose},"Close"))))}},{key:"render",value:function(){var e=this,t=this.state.open2,a={cursor:"pointer",color:"blue"},n={fontWeight:"bold",fontSize:"15px",color:"black"},i={fontWeight:"bold",fontSize:"15px",color:"black",textAlign:"center"},s={fontSize:"12px"};this.state.loading;return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:t,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"false"},l.a.createElement("div",{style:{width:800}},l.a.createElement(U.a,{id:"scroll-dialog-title"},"View Quotation Details",l.a.createElement(le.a,{style:{float:"right",color:"red"},onClick:this.handleClose},l.a.createElement(Ht.a,null))),l.a.createElement(M.a,null,l.a.createElement("form",{className:"reg",noValidate:!0,style:{styles1:Cs}},this.createUI())))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:As,label:"Search by RFQ/Item/Vendor",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),this.state.getAllPOSendListBySearch.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:n},"RFQ No."),l.a.createElement(nt.a,{style:n},"Item name"),l.a.createElement(nt.a,{style:i},"Quantity"),l.a.createElement(nt.a,{style:n},"Vendor Response"),l.a.createElement(nt.a,{style:n},"Status"))),l.a.createElement(lt.a,null,this.state.getAllPOSendListBySearch.length>0&&this.state.getAllPOSendListBySearch.map(function(t,n){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.purchase_id.rfq_id),l.a.createElement(nt.a,{style:s},e.state.getAllPOSendListBySearch[n].children&&e.state.getAllPOSendListBySearch[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:{textAlign:"center"}},e.state.getAllPOSendListBySearch[n].children&&e.state.getAllPOSendListBySearch[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:a},l.a.createElement("p",{onClick:function(a){return e.handleClickView(t._id,t.vendor_id._id,e.state.searchItemIndex)}},t.vendor_id.name," ")),"qoutation_approved"===t.status?l.a.createElement(nt.a,{style:s},"Approved"):l.a.createElement(nt.a,{style:s},"Rejected"))}))):[this.state.getAllPOSendList.length>0?l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:n},"RFQ No."),l.a.createElement(nt.a,{style:n},"Item name"),l.a.createElement(nt.a,{style:i},"Quantity"),l.a.createElement(nt.a,{style:n},"Vendor Response"),l.a.createElement(nt.a,{style:n},"Status"))),l.a.createElement(lt.a,null,this.state.getAllPOSendList.length>0&&this.state.getAllPOSendList.map(function(t,n){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},t.purchase_id.rfq_id),l.a.createElement(nt.a,{style:s},e.state.getAllPOSendList[n].children&&e.state.getAllPOSendList[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.item_name.name," ")})),l.a.createElement(nt.a,{style:{textAlign:"center"}},e.state.getAllPOSendList[n].children&&e.state.getAllPOSendList[n].children.map(function(e,t){return l.a.createElement("p",null," ",e.no_of_items," ")})),l.a.createElement(nt.a,{style:a},l.a.createElement("p",{onClick:function(a){return e.handleClickView(t._id,t.vendor_id._id,n)}},t.vendor_id.name," ")),"qoutation_approved"===t.status?l.a.createElement(nt.a,{style:s},"Approved"):l.a.createElement(nt.a,{style:s},"Rejected"))}))):l.a.createElement("h3",null,"No pending PO list to be displayed")])}}]),t}(n.Component),ws=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Os),Rs=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null," ",l.a.createElement("b",null,"Welcome!!")," ")}}]),t}(n.Component),js=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null," ",l.a.createElement("b",null,"You have no permission")," ")}}]),t}(n.Component),Ds=a(130),qs=a.n(Ds);function Ns(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Ps=[],Bs=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a.state={getAllcategories:[],category:"",color_code:"",categories:[],delIndex:-1,editIndex:-1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a){this.setState({open:!0,category:t.rowData[0],color_code:t.rowData[1],categoryid:e,editIndex:a})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,categoryid:e,delIndex:t})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;this.setState(Object(y.a)({},t,a))}},{key:"fetchUnit",value:function(){var e=this;fetch(ne.BASE_URL+"consumer/services",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllcategories:t.Service});for(var a=0;a<t.Service.length;a++)Ps.push(t.Service[a].name),e.setState({category:t.Service[a].category}),e.setState({color_code:t.Service[a].color_code});e.setState({category:Ps})}),this.forceUpdate()}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.category)Ns("Please fill name");else{var t={category:this.state.category,color_code:this.state.color_code,categoryid:this.state.categoryid};this.state.getAllcategories[this.state.editIndex].category=this.state.category,this.state.getAllcategories[this.state.editIndex].color_code=this.state.color_code,this.state.getAllcategories[this.state.editIndex].categoryid=this.state.categoryid,w.post("admin/edit-category",t,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){if(1==e.data.value){Ns("Category is updates successfully")}else Ns(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),this.setState(function(e){return{getAllcategories:e.getAllcategories.filter(function(e,a){return a!==t.state.delIndex})}});var a={categoryid:this.state.categoryid};w.post("admin/delete-category",a,{method:"post",headers:{"Content-Type":"application/json"}}).then(function(e){e.data.value,Ns(e.data.message)}).catch(function(e){}),this.handleClose()}},{key:"componentDidMount",value:function(){var e=this;this.fetchUnit(),this.timer=setInterval(function(){return e.fetchUnit()},5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i=[{name:"Category",options:{}},{name:"Color Code",options:{}},{name:"Edit",options:{sort:!1,empty:!1,customBodyRender:function(t,a,n){return l.a.createElement("button",{onClick:function(){return e.handleClick(t,a,a.rowIndex)}},"Edit")}}},{name:"Delete",options:{filter:!0,sort:!1,customBodyRender:function(t,a,n){return l.a.createElement("button",{onClick:function(){return e.handleClickDelete(t,a.rowIndex)}},"Delete")}}}];return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , to delete the categories?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Category"),l.a.createElement("form",null,l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"category",label:"Category",name:"category",value:this.state.category,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"color_code",value:this.state.color_code,label:"Color Code",name:"color_code",fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(qs.a,{title:"Category",data:this.state.getAllcategories.map(function(e){return[e.category,e.color_code,e.id,e.id]}),columns:i,options:{selectableRows:!1,textLabels:{body:{noMatch:"Please Wait until data is loading",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}}}}}))}}]),t}(n.Component),Fs=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Bs);function Vs(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Ls=null,Us=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({category:""}),e.setState({color_code:""})},e.state={category:"",file:"",color_code:"",ext:"",showChild:!0},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"_handleImageChange",value:function(e){var t=this;e.preventDefault();var a,n=new FileReader,l=e.target.files[0];a=e.target.files[0].name.slice(2+(e.target.files[0].name.lastIndexOf(".")-1>>>0)),this.setState({ext:a}),n.onloadend=function(e){t.setState({file:l,imagePreviewUrl:n.result}),console.log("Files --- "+e.target.result),Ls={file:e.target.result.split(",").pop()}},n.readAsDataURL(l)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),(new FormData).append("file",this.state.file);var a={category:this.state.category,color_code:this.state.color_code,category_image:Ls,extension:this.state.ext};console.log("DATA send --- "+JSON.stringify(a)),w.post("admin/add-category",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?Vs("Category is added successfully"):Vs(e.data.message),t.reloadChild()}).catch(function(e){return console.log(e)}),this.resetField()}},{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"render",value:function(){var e=this,t=(this.state.open,{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5});return l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("form",{className:"reg",encType:"multipart/form-data",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement("div",{id:"2"},l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:!0,id:"category",label:"Category Name",name:"category",value:this.state.category,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement("div",{id:"3"},l.a.createElement(J.a,{style:t,variant:"outlined",margin:"dense",required:!0,id:"color_code",label:"Color Code",name:"color_code",value:this.state.color_code,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement("input",{className:"fileInput",type:"file",onChange:function(t){return e._handleImageChange(t)},style:{width:"200px"}}),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary"},"Submit"),l.a.createElement("br",null),l.a.createElement("br",null),this.state.showChild?l.a.createElement(Fs,{reloadChild:this.reloadChild}):null)))}}]),t}(n.Component),Ms=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Us);function Ts(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Ws=[],Qs=[],Js=[],zs=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a.state={getAllsubcategories:[],subcategory:"",subcategories:[],getAllCategory:[],category:"",delIndex:-1,editIndex:-1,getAllcategories:[]},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a){this.setState({open:!0,subcategory:t.rowData[0],subcategoryid:t.rowData[3],category:t.rowData[2],editIndex:a})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,subcategoryid:e,delIndex:t})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;this.setState(Object(y.a)({},t,a))}},{key:"fetchUnit",value:function(){var e=this;fetch(ne.BASE_URL+"admin/list-subcategory",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllcategories:t.Service});for(var a=0;a<t.Service.length;a++)Ws.push(t.Service[a].name),e.setState({category:t.Service[a].category_id}),e.setState({subcategory:t.Service[a].subcategory}),e.setState({subcategoryid:t.Service[a].id});e.setState({category:Ws})}),this.forceUpdate()}},{key:"fetchcategory",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"consumer/services/",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllCategory:t.Service,loading:!1});for(var a=0;a<t.Service.length;a++)Qs.push(t.Service[a].category),Js.push(t.Service[a].id)})})}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.subcategory)Ts("Please fill name");else{var t={subcategory:this.state.subcategory,subcategoryid:this.state.subcategoryid};this.state.getAllcategories[this.state.editIndex].subcategory=this.state.subcategory,this.state.getAllcategories[this.state.editIndex].subcategoryid=this.state.subcategoryid,this.state.getAllcategories[this.state.editIndex].category=this.state.category,w.post("admin/edit-subcategory",t,{headers:{}}).then(function(e){if(1==e.data.value){Ts("Subcategories is updates successfully")}else Ts(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),this.setState(function(e){return{getAllcategories:e.getAllcategories.filter(function(e,a){return a!==t.state.delIndex})}});var a={subcategoryid:this.state.subcategoryid};w.post("admin/delete-subcategory",a,{method:"post",headers:{"Content-Type":"application/json"}}).then(function(e){if(1==e.data.value){Ts("Sub Category is Deleted successfully")}else Ts(e.data.message)}).catch(function(e){}),this.handleClose()}},{key:"componentDidMount",value:function(){var e=this;this.fetchUnit(),this.fetchcategory(),this.timer=setInterval(function(){return e.fetchUnit()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"handleInputChangeValueCategory",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getAllCategory.length;l++)JSON.stringify(Js.pop(l))==n&&(this.state.id=n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i=[{name:"Sub Category",options:{}},{name:"Category",options:{}},{name:"Edit",options:{sort:!1,empty:!1,customBodyRender:function(t,a,n){return l.a.createElement("button",{onClick:function(){return e.handleClick(t,a,a.rowIndex)}},"Edit")}}},{name:"Delete",options:{filter:!0,sort:!1,customBodyRender:function(t,a,n){return l.a.createElement("button",{onClick:function(){return e.handleClickDelete(t,a.rowIndex)}},"Delete")}}}];return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , to delete the subcategories?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Subcategory"),l.a.createElement("form",null,l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:{minWidth:150,marginLeft:15}},l.a.createElement(fa.a,{htmlFor:"Category"},"Category"),l.a.createElement(ya.a,{value:this.state.category,onChange:function(t){return e.handleInputChangeValueCategory(t)},inputProps:{name:"category",id:"category"}},this.state.getAllCategory.map(function(e){return l.a.createElement(se.a,{value:e.id},e.category)})))),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"category",label:"Subcategory",name:"subcategory",value:this.state.subcategory,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(qs.a,{title:" Sub Category",data:this.state.getAllcategories.map(function(e){return[e.subcategory,e.amin_service_category.category,e.category_id,e.id]}),columns:i,options:{selectableRows:!1,textLabels:{body:{noMatch:"Please Wait until data is loading",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}}}}}))}}]),t}(n.Component),Gs=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(zs);function Ys(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Ks=[],Hs=[],Xs=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({subcategory:""}),e.setState({category:""})},e.state={subcategory:"",category_id:"",getAllCategory:[],showChild:!0,loading:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchcategory",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"consumer/services/",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllCategory:t.Service,loading:!1});for(var a=0;a<t.Service.length;a++)Ks.push(t.Service[a].category),Hs.push(t.Service[a].id)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchcategory()}},{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleInputChangeValueCategory",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getAllCategory.length;l++)JSON.stringify(Hs.pop(l))==n&&(console.log("entered"),this.state.id=n)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={subcategory:this.state.subcategory,category_id:this.state.category};w.post("admin/add-subcategory",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){1==e.data.value?Ys("Subcategory is added successfully"):Ys(e.data.message),t.reloadChild()}).catch(function(e){return console.log(e)}),this.resetField()}},{key:"render",value:function(){var e=this;this.state.loading,this.state.open;return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:{minWidth:150,marginLeft:15}},l.a.createElement(fa.a,{htmlFor:"Category"},"Category"),l.a.createElement(ya.a,{value:this.state.category,onChange:function(t){return e.handleInputChangeValueCategory(t)},inputProps:{name:"category",id:"category"}},this.state.getAllCategory.map(function(e){return l.a.createElement(se.a,{value:e.id},e.category)})))),l.a.createElement("br",null),l.a.createElement("div",{id:"2"},l.a.createElement(J.a,{style:{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5},variant:"outlined",margin:"dense",required:!0,id:"subcategory",label:"Sub Category",name:"subcategory",value:this.state.subcategory,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),l.a.createElement("br",null),this.state.showChild?l.a.createElement(Gs,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),Zs=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Xs);function $s(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var eo=[],to=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1,open2:!1})},a._handleKeyDown=function(e){"Enter"===e.key&&a.searchItemDisplay()},a.state={getAllprovider:[],providers:[],searchBy:"",getAllProviderList:[],getAllProviderListBySearch:[],getAllProviderListSearchItem:[],delIndex:-1,rejIndex:-1,viewIndex:-1},a.handleAccept=a.handleAccept.bind(Object(V.a)(a)),a.handleReject=a.handleReject.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClickAccept",value:function(e,t){this.setState({open1:!0,providerid:e,delIndex:t})}},{key:"handleClickReject",value:function(e,t){this.setState({open2:!0,providerid:e,rejIndex:t})}},{key:"handleClickView",value:function(e,t,a,n,l,i,s,o,r,c,d,u){this.setState({open:!0,providerid:e,name:t,email:a,phone:n,dob:l,city:i,state:s,postalcode:o,address:r,experience:c,salary_hr:d,viewIndex:u})}},{key:"handleInputChangeSearchValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),""===a&&(console.log("Clear"),this.state.getAllProviderListBySearch=[],this.forceUpdate())}},{key:"handleSearch",value:function(e){e.preventDefault(),this.searchItemDisplay()}},{key:"searchItemDisplay",value:function(){this.state.getAllProviderListBySearch=[],this.state.getAllProviderListBySearchItem=[];for(var e=0;e<this.state.getAllProviderList.length;e++)console.log("within for"+this.state.getAllProviderList[e].name),this.state.searchBy===this.state.getAllProviderList[e].name&&(this.state.searchItemIndex=e,this.state.getAllProviderListBySearch.push(this.state.getAllProviderList[e]),this.forceUpdate(),1,console.log("Fine"));console.log("Search Calling --- "+this.state.searchBy),console.log("call here")}},{key:"handleAccept",value:function(e){var t=this;e.preventDefault();var a={providerid:this.state.providerid};this.setState(function(e){return{getAllProviderList:e.getAllProviderList.filter(function(e,a){return a!==t.state.delIndex})}}),w.post("service/accept-provider",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),e.data.value,$s(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"handleReject",value:function(e){var t=this;e.preventDefault(),console.log("--id"+this.state.providerid);var a={providerid:this.state.providerid};this.setState(function(e){return{getAllProviderList:e.getAllProviderList.filter(function(e,a){return a!==t.state.rejIndex})}}),w.post("service/reject-provider",a,{headers:{}}).then(function(e){console.log(e.data.value),console.log(e.data.message),e.data.value,$s(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"fetchProviders",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"service/provider-list",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllProviderList:t.Providers});for(var a=0;a<t.Providers.length;a++)eo.push(t.Providers[a].name);console.log("array"+eo),e.setState({category:eo})}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchProviders()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i=t.open2,s={cursor:"pointer",color:"blue"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"};return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , Want to accept this service provider?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleAccept,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:i,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , Want to reject this service provider?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleReject,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(M.a,null,l.a.createElement(T.a,null,"View details"),l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(J.a,{label:"Name:",value:this.state.name,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Email:",value:this.state.email,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Phone:",value:this.state.phone,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"DOB:",value:this.state.dob,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"City:",value:this.state.city,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"State:",value:this.state.state,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Postal Code:",value:this.state.postalcode,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Address:",value:this.state.address,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Experience:",value:this.state.experience,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Salary:",value:this.state.salary_hr,margin:"normal",InputProps:{readOnly:!0}}))))),l.a.createElement("div",{align:"right"},l.a.createElement(J.a,{style:{width:350},label:"Search",id:"searchBy",name:"searchBy",value:this.state.searchBy,onChange:this.handleInputChangeSearchValue.bind(this),onKeyDown:this._handleKeyDown,InputProps:{endAdornment:l.a.createElement(dn.a,null,l.a.createElement(le.a,null,l.a.createElement(mn.a,{onClick:this.handleSearch.bind(this)})))}})),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Provider Name"),l.a.createElement(nt.a,{style:o},"Provider Email"),l.a.createElement(nt.a,{style:o},"Phone"),l.a.createElement(nt.a,{style:o},"Status"),l.a.createElement(nt.a,{style:o},"Accept"),l.a.createElement(nt.a,{style:o},"View"))),this.state.getAllProviderListBySearch.length>0?l.a.createElement(lt.a,null,this.state.getAllProviderListBySearch.length>0&&this.state.getAllProviderListBySearch.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.name),l.a.createElement(nt.a,{style:r},t.email),l.a.createElement(nt.a,{style:r},t.phone),"unverified"===t.is_verified?l.a.createElement(nt.a,{style:r},"Pending"):"verified"===t.is_verified?l.a.createElement(nt.a,{style:r},"Approved"):l.a.createElement(nt.a,{style:r},"Rejected"),"unverified"===t.is_verified?l.a.createElement(nt.a,{style:r},l.a.createElement("a",{href:"#",onClick:function(n){return e.handleClickAccept(t.id,a)}},"Accept"),l.a.createElement("br",null),l.a.createElement("a",{href:"#",onClick:function(n){return e.handleClickReject(t.id,a)}},"Reject")):l.a.createElement(nt.a,{style:r},"------"),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickView(t.id,t.name,t.email,t.phone,t.dob,t.city,t.state,t.postalcode,t.address,t.experience,t.salary_hr,a)}})))})):[this.state.getAllProviderList.length>0?l.a.createElement(lt.a,null,this.state.getAllProviderList&&this.state.getAllProviderList.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.name),l.a.createElement(nt.a,{style:r},t.email),l.a.createElement(nt.a,{style:r},t.phone),"unverified"===t.is_verified?l.a.createElement(nt.a,{style:r},"Pending"):"verified"===t.is_verified?l.a.createElement(nt.a,{style:r},"Approved"):l.a.createElement(nt.a,{style:r},"Rejected"),"unverified"===t.is_verified?l.a.createElement(nt.a,{style:r},l.a.createElement("a",{href:"#",onClick:function(n){return e.handleClickAccept(t.id,a)}},"Accept"),l.a.createElement("br",null),l.a.createElement("a",{href:"#",onClick:function(n){return e.handleClickReject(t.id,a)}},"Reject")):l.a.createElement(nt.a,{style:r},"------"),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickView(t.id,t.name,t.email,t.phone,t.dob,t.city,t.state,t.postalcode,t.address,t.experience,t.salary_hr,a)}})))})):l.a.createElement("h3",null,"No List Found")]))}}]),t}(n.Component),ao=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(to);function no(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var lo=[],io=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a.state={getAllprovider:[],providers:[],delIndex:-1,viewIndex:-1},a.handleAccept=a.handleAccept.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClickAccept",value:function(e,t){this.setState({open1:!0,providerid:e,delIndex:t})}},{key:"handleClickView",value:function(e,t,a,n,l,i,s,o,r,c,d,u){this.setState({open:!0,providerid:e,name:t,email:a,phone:n,dob:l,city:i,state:s,postalcode:o,address:r,experience:c,salary_hr:d,viewIndex:u})}},{key:"handleAccept",value:function(e){var t=this;e.preventDefault();var a={providerid:this.state.providerid};this.setState(function(e){return{getAllprovider:e.getAllprovider.filter(function(e,a){return a!==t.state.delIndex})}}),w.post("service/accept-provider",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),e.data.value,no(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose(),this.forceUpdate()}},{key:"fetchProviders",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"service/accepted-provider-list",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllprovider:t.Providers});for(var a=0;a<t.Providers.length;a++)lo.push(t.Providers[a].name);console.log("array"+lo),e.setState({category:lo})}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchProviders()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={fontWeight:"bold",fontSize:"15px",color:"black"},o={fontSize:"12px"};return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , Want to accept this service provider?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleAccept,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(M.a,null,l.a.createElement(T.a,null,"View details"),l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(J.a,{label:"Name:",value:this.state.name,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Email:",value:this.state.email,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Phone:",value:this.state.phone,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"DOB:",value:this.state.dob,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"City:",value:this.state.city,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"State:",value:this.state.state,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Postal Code:",value:this.state.postalcode,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Address:",value:this.state.address,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Experience:",value:this.state.experience,margin:"normal",InputProps:{readOnly:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{label:"Salary:",value:this.state.salary_hr,margin:"normal",InputProps:{readOnly:!0}}))))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:s},"Provider Name"),l.a.createElement(nt.a,{style:s},"Provider Email"),l.a.createElement(nt.a,{style:s},"Phone"),l.a.createElement(nt.a,{style:s},"Status"),l.a.createElement(nt.a,{style:s},"View"))),l.a.createElement(lt.a,null,this.state.getAllprovider&&this.state.getAllprovider.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},t.name),l.a.createElement(nt.a,{style:o},t.email),l.a.createElement(nt.a,{style:o},t.phone),l.a.createElement(nt.a,{style:o},t.is_verified),l.a.createElement(nt.a,null,l.a.createElement(jt.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClickView(t.id,t.name,t.email,t.phone,t.dob,t.city,t.state,t.postalcode,t.address,t.experience,t.salary_hr,a)}})))}))))}}]),t}(n.Component),so=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(io);function oo(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var ro=[],co=[],uo=[],mo=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){a.setState({open:!1,open1:!1})},a.state={getAllsubcategories:[],subcategory:"",subcategories:[],getAllCategory:[],getAllcategories:[],category:"",delIndex:-1,editIndex:-1,page:1},a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a){this.setState({open:!0,category:t.rowData[2],subcategoryid:t.rowData[3],subcategory:t.rowData[0],editIndex:a})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,subcategoryid:e,delIndex:t})}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;this.setState(Object(y.a)({},t,a))}},{key:"handleInputChangeValueCategory",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getAllCategory.length;l++)JSON.stringify(uo.pop(l))==n&&(this.state.id=n)}},{key:"fetchcategory",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"admin/list-subcategory/",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllCategory:t.Service,loading:!1});for(var a=0;a<t.Service.length;a++)co.push(t.Service[a].subcategory),uo.push(t.Service[a].id)})})}},{key:"fetchUnit",value:function(){var e=this;fetch(ne.BASE_URL+"admin/list-finalsubcategory",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({getAllcategories:t.Service});for(var a=0;a<t.Service.length;a++)ro.push(t.Service[a].name),e.setState({category:t.Service[a].name}),e.setState({subcategory:t.Service[a].name}),e.setState({subcategoryid:t.Service[a].id});e.setState({category:ro})}),this.forceUpdate()}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),""==this.state.subcategory)oo("Please fill name");else{var t={subcategory:this.state.subcategory,subcategoryid:this.state.subcategoryid,category:this.state.category};this.state.getAllcategories[this.state.editIndex].subcategory=this.state.subcategory,this.state.getAllcategories[this.state.editIndex].subcategoryid=this.state.subcategoryid,this.state.getAllcategories[this.state.editIndex].category=this.state.category,w.post("admin/edit-finalsubcategory",t,{headers:{}}).then(function(e){if(1==e.data.value){oo("Subcategories is updates successfully")}else oo(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),this.setState(function(e){return{getAllcategories:e.getAllcategories.filter(function(e,a){return a!==t.state.delIndex})}});var a={subcategoryid:this.state.subcategoryid};w.post("admin/delete-finalsubcategory",a,{method:"post",headers:{"Content-Type":"application/json"}}).then(function(e){if(1==e.data.value){oo("Sub Category is Deleted successfully")}else oo(e.data.message)}).catch(function(e){}),this.handleClose()}},{key:"componentDidMount",value:function(){this.fetchUnit(),this.fetchcategory()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i=[{name:"Sub Category",options:{}},{name:"Parent Sub Category",options:{}},{name:"Edit",options:{sort:!1,empty:!1,customBodyRender:function(t,a,n){return l.a.createElement("button",{onClick:function(){return e.handleClick(t,a,a.rowIndex)}},"Edit")}}},{name:"Delete",options:{filter:!0,sort:!1,customBodyRender:function(t,a,n){return l.a.createElement("button",{onClick:function(){return e.handleClickDelete(t,a.rowIndex)}},"Delete")}}}];return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , to delete the sub categories?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Subcategory"),l.a.createElement("form",null,l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:{minWidth:150,marginLeft:15}},l.a.createElement(fa.a,{htmlFor:"Category"},"Category"),l.a.createElement(ya.a,{value:this.state.category,onChange:function(t){return e.handleInputChangeValueCategory(t)},inputProps:{name:"category",id:"category"}},this.state.getAllCategory.map(function(e){return l.a.createElement(se.a,{value:e.id},e.subcategory)})))),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"category",label:"Subcategory",name:"subcategory",value:this.state.subcategory,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(qs.a,{title:"Child Sub Category",data:this.state.getAllcategories.map(function(e){return[e.name,e.amin_service_subcategory.subcategory,e.subcategoryid,e.id]}),columns:i,options:{selectableRows:!1,textLabels:{body:{noMatch:"Please Wait until data is loading",toolTip:"Sort",columnHeaderTooltip:function(e){return"Sort for ".concat(e.label)}}}}}))}}]),t}(n.Component),ho=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(mo);function go(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var po=[],fo=[],yo=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({subcategory:""}),e.setState({category:""})},e.state={subcategory:"",category_id:"",getAllCategory:[],showChild:!0,loading:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"fetchcategory",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"admin/list-subcategory/",{method:"POST",headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getAllCategory:t.Service,loading:!1});for(var a=0;a<t.Service.length;a++)po.push(t.Service[a].subcategory),fo.push(t.Service[a].id)})})}},{key:"componentDidMount",value:function(){console.log("Child calling ------ "),this.fetchcategory()}},{key:"handleInputChangeValue",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;console.log(a,":",n),this.setState(Object(y.a)({},a,n))}},{key:"handleInputChangeValueCategory",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getAllCategory.length;l++)JSON.stringify(fo.pop(l))==n&&(console.log("entered"),this.state.id=n)}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={subcategory:this.state.subcategory,category_id:this.state.category};console.log("-----"+a),w.post("admin/add-finalsubcategory",a,{headers:{}}).then(function(e){1==e.data.value?go("Subcategory is added successfully"):go(e.data.message),t.reloadChild()}).catch(function(e){return console.log(e)}),this.resetField()}},{key:"render",value:function(){var e=this;this.state.loading,this.state.open;return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:{minWidth:150,marginLeft:15}},l.a.createElement(fa.a,{htmlFor:"Category"},"Category"),l.a.createElement(ya.a,{value:this.state.category,onChange:function(t){return e.handleInputChangeValueCategory(t)},inputProps:{name:"category",id:"category"}},this.state.getAllCategory.map(function(e){return l.a.createElement(se.a,{value:e.id},e.subcategory)})))),l.a.createElement("br",null),l.a.createElement("div",{id:"2"},l.a.createElement(J.a,{style:{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5},variant:"outlined",margin:"dense",required:!0,id:"subcategory",label:"Sub Category",name:"subcategory",value:this.state.subcategory,onChange:function(t){return e.handleInputChangeValue(t,1)}})),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),l.a.createElement("br",null),this.state.showChild?l.a.createElement(ho,{reloadChild:this.reloadChild}):null)}}]),t}(n.Component),bo=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(yo);function vo(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Eo=[],_o=[],So=[],Co=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this))).handleClose=function(){a.setState({open:!1,open1:!1})},a.state={getAllLocation:[],city:"",country:"",state:"",locationid:"",statename:"",name:"",getallcountry:[],getallstate:[],delIndex:-1,editIndex:-1},a.handleDelete=a.handleDelete.bind(Object(V.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleClick",value:function(e,t,a,n,l){this.setState({open:!0,city:e,name:t,statename:a,locationid:n,editIndex:l}),console.log("setstate"+this.state.locationid)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={country_id:this.state.name,state_id:this.state.statename,city:this.state.city,locationid:this.state.locationid};this.state.getAllLocation[this.state.editIndex].country_id=this.state.country_id,this.state.getAllLocation[this.state.editIndex].state_id=this.state.state_id,this.state.getAllLocation[this.state.editIndex].city=this.state.city,w.post("admin/edit-location",t,{headers:{}}).then(function(e){if(console.log(e.data.value),console.log(e.data.message),1==e.data.value){vo("Location is updates successfully")}else vo(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"handleInputChangeValueCountry",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getallcountry.length;l++)JSON.stringify(So.pop(l))==n&&(console.log("entered"),this.state.id=n);console.log("name---"+a),this.fetchState(n)}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),console.log("----------"+this.state.city)}},{key:"handleInputChangeValueState",value:function(e,t){e&&e.target.name;var a=e?e.target.value:e;this.setState({statename:a});for(var n=0;n<this.state.getallstate.length;n++)JSON.stringify(So.pop(n))==a&&(console.log("entered"),this.state.id=a)}},{key:"fetchCountry",value:function(){var e=this;fetch(ne.BASE_URL+"admin/country-list/",{method:"POST",headers:{}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getallcountry:t.data,loading:!1});for(var a=0;a<t.data.length;a++)_o.push(t.data[a].name),So.push(t.data[a].id)})}},{key:"fetchState",value:function(e){var t=this;fetch(ne.BASE_URL+"admin/state-list/"+e,{method:"POST",headers:{}}).then(function(e){return e.json()}).then(function(e){console.log("state"+e),t.setState({getallstate:e.data})}).catch(function(e){return console.log(e)})}},{key:"handleClickDelete",value:function(e,t){this.setState({open1:!0,locationid:e,delIndex:t})}},{key:"handleDelete",value:function(e){var t=this;e.preventDefault(),this.setState(function(e){return{getAllLocation:e.getAllLocation.filter(function(e,a){return a!==t.state.delIndex})}});var a={locationid:this.state.locationid};w.post("admin/delete-location",a,{method:"post",headers:{"Content-Type":"application/json"}}).then(function(e){if(1==e.data.value){vo("Location is Deleted successfully")}else vo(e.data.message)}).catch(function(e){}),this.handleClose()}},{key:"componentDidMount",value:function(){this.fetchLocation(),this.fetchState(),this.fetchCountry()}},{key:"fetchLocation",value:function(){var e=this;console.log("Calling --- "),fetch(ne.BASE_URL+"admin/location-list",{method:"POST"}).then(function(e){return e.json()}).then(function(t){e.setState({getAllLocation:t.data}),console.log(JSON.stringify(t.data));for(var a=0;a<t.data.length;a++)Eo.push(t.data[a].city);console.log("array"+Eo),e.setState({location:Eo})}),console.log("Calling --- End ---  "),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.open1,i={cursor:"pointer",color:"blue"},s={cursor:"pointer",color:"red"},o={fontWeight:"bold",fontSize:"15px",color:"black"},r={fontSize:"12px"},c={minWidth:150,marginLeft:15};return l.a.createElement("div",null,l.a.createElement(L.a,{open:n,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(U.a,{id:"alert-dialog-title"},"Are sure , to delete the location ?"),l.a.createElement(M.a,null),l.a.createElement(it.a,null,l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleClose,color:"primary"},"Disagree"),l.a.createElement(Q.a,{onClick:this.handleDelete,color:"secondary",autoFocus:!0},"Agree"))),l.a.createElement(L.a,{open:a,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},l.a.createElement(U.a,{id:"form-dialog-title"},"Edit"),l.a.createElement(M.a,null,l.a.createElement(T.a,null,"Edit Subcategory"),l.a.createElement("form",null,l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:c},l.a.createElement(fa.a,{htmlFor:"Country"},"Country"),l.a.createElement(ya.a,{value:this.state.name,onChange:function(t){return e.handleInputChangeValueCountry(t)},inputProps:{name:"name",id:"name"}},this.state.getallcountry.map(function(e){return l.a.createElement(se.a,{value:e.id},e.name)})))),l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:c},l.a.createElement(fa.a,{htmlFor:"State"},"State"),l.a.createElement(ya.a,{value:this.state.statename,onChange:function(t){return e.handleInputChangeValueState(t)},inputProps:{name:"statename",id:"statename"}},this.state.getallstate.map(function(e){return l.a.createElement(se.a,{value:e.id},e.name)})))),l.a.createElement(J.a,{autoFocus:!0,margin:"dense",id:"city",label:"City",name:"city",value:this.state.city,fullWidth:!0,onChange:function(t){return e.handleInputChangeValue(t)}}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:this.handleSubmit,color:"primary"},"Edit"))),l.a.createElement(et.a,null,l.a.createElement(tt.a,null,l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:o},"Country"),l.a.createElement(nt.a,{style:o},"State"),l.a.createElement(nt.a,{style:o},"City"),l.a.createElement(nt.a,{style:o},"Edit"),l.a.createElement(nt.a,{style:o},"Delete"))),l.a.createElement(lt.a,null,this.state.getAllLocation&&this.state.getAllLocation.map(function(t,a){return l.a.createElement(at.a,null,l.a.createElement(nt.a,{style:r},t.country.name),l.a.createElement(nt.a,{style:r},t.state.name),l.a.createElement(nt.a,{style:r},t.city),l.a.createElement(nt.a,null,l.a.createElement(ot.a,{fontSize:"small",style:i,onClick:function(n){return e.handleClick(t.city,t.country.id,t.state.id,t.id,a)}})),l.a.createElement(nt.a,null,l.a.createElement(_t.a,{fontSize:"small",style:s,onClick:function(n){return e.handleClickDelete(t.id,a)}})))}))))}}]),t}(n.Component),Io=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Co);function ko(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Ao=[],xo=[],Oo=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).reloadChild=function(){e.setState({showChild:!1}),setTimeout(function(){e.setState({showChild:!0})},100),console.log("Reload Child Invoked")},e.resetField=function(){e.setState({name:""}),e.setState({statename:""}),e.setState({city:""})},e.state={country_id:"",state_id:"",city:"",name:"",statename:"",getallcountry:[],getallstate:[],showchild:!0,loading:!1},e.handleSubmit=e.handleSubmit.bind(Object(V.a)(e)),e}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.fetchCountry()}},{key:"handleInputChangeValueCountry",value:function(e,t){var a=e?e.target.name:e,n=e?e.target.value:e;this.setState(Object(y.a)({},a,n));for(var l=0;l<this.state.getallcountry.length;l++)JSON.stringify(xo.pop(l))==n&&(console.log("entered"),this.state.id=n);console.log("name---"+a),this.fetchState(n)}},{key:"handleInputChangeValue",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),console.log("----------"+this.state.city)}},{key:"handleInputChangeValueState",value:function(e,t){e&&e.target.name;var a=e?e.target.value:e;this.setState({statename:a});for(var n=0;n<this.state.getallstate.length;n++)JSON.stringify(xo.pop(n))==a&&(console.log("entered"),this.state.id=a)}},{key:"fetchCountry",value:function(){var e=this;fetch(ne.BASE_URL+"admin/country-list/",{method:"POST",headers:{}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({getallcountry:t.data,loading:!1});for(var a=0;a<t.data.length;a++)Ao.push(t.data[a].name),xo.push(t.data[a].id)})}},{key:"fetchState",value:function(e){var t=this;fetch(ne.BASE_URL+"admin/state-list/"+e,{method:"POST",headers:{}}).then(function(e){return e.json()}).then(function(e){console.log("state"+e),t.setState({getallstate:e.data})}).catch(function(e){return console.log(e)})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),console.log("aaaa"+this.state.city);var a={country_id:this.state.name,state_id:this.state.statename,city:this.state.city};w.post("admin/master-location",a,{headers:{"x-access-token":localStorage.getItem("token")}}).then(function(e){1==e.data.value?ko("Location is added successfully"):ko(e.data.message),t.reloadChild()}).catch(function(e){return console.log(e)}),this.resetField(),console.log("-----states"+JSON.stringify(a))}},{key:"render",value:function(){var e=this,t={minWidth:150,marginLeft:15};return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",{style:{textAlign:"center",paddingTop:"2"}},l.a.createElement("form",{className:"reg",onSubmit:this.handleSubmit},l.a.createElement("div",{id:"1",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:t},l.a.createElement(fa.a,{htmlFor:"Country"},"Country"),l.a.createElement(ya.a,{value:this.state.name,onChange:function(t){return e.handleInputChangeValueCountry(t)},inputProps:{name:"name",id:"name"}},this.state.getallcountry.map(function(e){return l.a.createElement(se.a,{value:e.id},e.name)})))),l.a.createElement("br",null),l.a.createElement("div",{id:"2",style:{paddingLeft:"5px",paddingRight:"5px"}},l.a.createElement($e.a,{style:t},l.a.createElement(fa.a,{htmlFor:"State"},"State"),l.a.createElement(ya.a,{value:this.state.statename,onChange:function(t){return e.handleInputChangeValueState(t)},inputProps:{name:"name",id:"name"}},this.state.getallstate.map(function(e){return l.a.createElement(se.a,{value:e.id},e.name)})))),l.a.createElement("br",null),l.a.createElement("div",{id:"3"},l.a.createElement(J.a,{style:{width:280,height:50,marginLeft:4,marginRight:4,marginTop:5},variant:"outlined",margin:"dense",required:!0,id:"city",label:"City",name:"city",value:this.state.city,onChange:function(t){return e.handleInputChangeValue(t)}})),l.a.createElement(Q.a,{style:{marginTop:20},type:"submit",variant:"contained",color:"primary"},"Submit")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(Io,{reloadChild:this.reloadChild}))}}]),t}(n.Component),wo=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Oo),Ro=Object(G.a)(function(e){var t;return{grow:{flexGrow:1,display:"flex"},menuButton:{marginRight:e.spacing(2)},title:Object(y.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),titleUser:(t={display:"none"},Object(y.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(y.a)(t,"marginRight","5px"),t),search:Object(y.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(Y.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(Y.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(y.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(y.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(y.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,background:"#0099FF"},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,nested:{paddingLeft:e.spacing(4)},icon:{color:"#FFFFFF"}}});function jo(){var e=Ro(),t=l.a.useState(null),a=Object(z.a)(t,2),i=a[0],s=a[1],o=l.a.useState(null),r=Object(z.a)(o,2),c=r[0],d=r[1],u=l.a.useState(!1),m=Object(z.a)(u,2),h=(m[0],m[1],l.a.useState(!1)),g=Object(z.a)(h,2),p=(g[0],g[1],l.a.useState(!1)),f=Object(z.a)(p,2),y=(f[0],f[1],l.a.useState(0)),b=Object(z.a)(y,2),v=b[0],E=b[1],_=l.a.useState(JSON.parse(localStorage.getItem("subscription_detail"))),S=(Object(z.a)(_,1)[0],Object(n.useState)("dashboard")),C=Object(z.a)(S,2),I=C[0],k=C[1];function A(e,t){console.log("Index --- "+t),E(t),0==t&&k("dashboard"),1==t&&k("category"),2==t&&k("subCategory"),3==t&&k("providers"),4==t&&k("serviceproviders"),5==t&&k("childsubcategory"),6==t&&k("addlocation")}"Admin"===localStorage.getItem("role")&&(!0,console.log("u r Admin")),console.log("profpic----"+localStorage.getItem("profilepic")),"img"===localStorage.getItem("profilepic")||null==localStorage.getItem("profilepic")||localStorage.getItem("profilepic");var x=Boolean(i),O=Boolean(c);function w(){d(null)}var R=l.a.createElement(oe.a,{anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:x,onClose:function(){s(null),w()}},l.a.createElement(se.a,{onClick:function(){s(null),d(null),k("profile")}},"Profile"),l.a.createElement(se.a,{onClick:function(){s(null),d(null),k("password")}},"Change Password"),l.a.createElement(La.a,{style:{color:"#000",textDecoration:"none"},href:"/"},l.a.createElement(se.a,{onClick:function(){s(null),d(null),localStorage.clear(),k("logout")}},"Logout"))),j=l.a.createElement(oe.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:O,onClose:w},l.a.createElement(se.a,null,l.a.createElement(le.a,{"aria-label":"show 4 new mails",color:"inherit"},l.a.createElement(ie.a,{badgeContent:4,color:"secondary"},l.a.createElement(ue.a,null))),l.a.createElement("p",null,"Messages")),l.a.createElement(se.a,null,l.a.createElement(le.a,{"aria-label":"show 11 new notifications",color:"inherit"},l.a.createElement(ie.a,{badgeContent:11,color:"secondary"},l.a.createElement(he.a,null))),l.a.createElement("p",null,"Notifications")),l.a.createElement(se.a,{onClick:function(e){s(e.currentTarget)}},l.a.createElement(le.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},l.a.createElement(ce.a,null)),l.a.createElement("p",null,"Profile")));return l.a.createElement("div",{className:e.grow},l.a.createElement(K.a,{position:"fixed",className:e.appBar},l.a.createElement(ee.a,null),l.a.createElement(H.a,{variant:"dense"},l.a.createElement("div",{className:e.grow}),l.a.createElement("div",{className:e.sectionDesktop},l.a.createElement(za.a,{container:!0,justify:"center",alignItems:"center"})),l.a.createElement("div",{className:e.sectionMobile},l.a.createElement(le.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit"},l.a.createElement(pe.a,null)))),l.a.createElement("div",null,l.a.createElement(W.a,{align:"right",className:e.titleUser,variant:"h9"},"Welcome ",localStorage.getItem("name")))),l.a.createElement(fe.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper}},l.a.createElement("div",{className:e.toolbar}),l.a.createElement("div",null,l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:0===v,onClick:function(e){return A(0,0)}},l.a.createElement(Ee.a,null,l.a.createElement(Ae.a,{className:e.icon})," "),l.a.createElement(_e.a,{primary:"Dashboard",style:{color:"#FFFFFF"}}))),l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:1===v,onClick:function(e){return A(0,1)}},l.a.createElement(Ee.a,null,l.a.createElement(Re.a,{className:e.icon})," "),l.a.createElement(_e.a,{primary:"Category",style:{color:"#FFFFFF"}}))),l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:2===v,onClick:function(e){return A(0,2)}},l.a.createElement(Ee.a,null,l.a.createElement(Re.a,{className:e.icon})," "),l.a.createElement(_e.a,{primary:"Sub Category",style:{color:"#FFFFFF"}}))),l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:5===v,onClick:function(e){return A(0,5)}},l.a.createElement(Ee.a,null,l.a.createElement(Re.a,{className:e.icon})," "),l.a.createElement(_e.a,{primary:"Child Sub Category",style:{color:"#FFFFFF"}}))),l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:3===v,onClick:function(e){return A(0,3)}},l.a.createElement(Ee.a,null,l.a.createElement(Re.a,{className:e.icon})," "),l.a.createElement(_e.a,{primary:"Service Providers",style:{color:"#FFFFFF"}}))),l.a.createElement(ye.a,null,l.a.createElement(ve.a,{button:!0,selected:6===v,onClick:function(e){return A(0,6)}},l.a.createElement(Ee.a,null,l.a.createElement(Re.a,{className:e.icon})," "),l.a.createElement(_e.a,{primary:"Add Location",style:{color:"#FFFFFF"}}))))),l.a.createElement("main",{className:e.content},l.a.createElement("div",{className:e.toolbar}),"user"===I?l.a.createElement(Cn,null):"","adduser"===I?l.a.createElement(jn,null):"","lead"===I?l.a.createElement(Tt,null):"","designation"===I?l.a.createElement(Mn,null):"","Ticket"===I?l.a.createElement(Yn,null):"","receive"===I?l.a.createElement(Ba,null):"","publish"===I?l.a.createElement(al,null):"","units"===I?l.a.createElement(yi,null):"","profile"===I?l.a.createElement(ml,null):"","password"===I?l.a.createElement(cl,null):"","dashboard"===I&&"Admin"===localStorage.getItem("role")?l.a.createElement(sl,null):"","dashboard"===I&&"Admin"!=localStorage.getItem("role")?l.a.createElement(Rs,null):"","requisition"===I?l.a.createElement(Vl,null):"","requisitionreceived"===I?l.a.createElement(Ql,null):"","requisitionapproved"===I?l.a.createElement(ei,null):"","requisitionreceivedlist"===I?l.a.createElement(xi,null):"","requisitionreceivedcompletedlist"===I?l.a.createElement(qi,null):"","stock"===I?l.a.createElement(di,null):"","vendor"===I?l.a.createElement(zi,null):"","rfqprocessinglist"===I?l.a.createElement(Li,null):"","quotationsubmitlist"===I?l.a.createElement(ts,null):"","vendorquotationlist"===I?l.a.createElement(ds,null):"","quotationlist"===I?l.a.createElement(_s,null):"","polist"===I?l.a.createElement(ws,null):"",""===I?l.a.createElement(js,null):"","category"===I?l.a.createElement(Ms,null):"","subCategory"===I?l.a.createElement(Zs,null):"","providers"===I?l.a.createElement(ao,null):"","serviceproviders"===I?l.a.createElement(so,null):"","childsubcategory"===I?l.a.createElement(bo,null):"","addlocation"===I?l.a.createElement(wo,null):""),j,R)}if(localStorage.jwtToken){O(localStorage.jwtToken);var Do=k()(localStorage.jwtToken);C.dispatch({type:"SET_CURRENT_USER",payload:Do})}var qo=!1,No=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={token:localStorage.getItem("token")},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return null==this.state.token?(console.log("check"),qo=!1):(console.log("Ok"),qo=!0),l.a.createElement(m.a,{store:C},l.a.createElement("div",null,qo?l.a.createElement(jo,null):l.a.createElement(La.a,{href:"/"},"Yor are Logged Out. Login First")))}}]),t}(n.Component);function Po(e){N.a.alert({message:e})}N.a.settings={theme:"ios"};var Bo={display:"flex",flexWrap:"wrap"},Fo={width:220,height:50,marginLeft:4,marginRight:4,marginTop:5,resize:"none"},Vo={width:420,height:80,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},Lo={width:220,height:80,marginLeft:2,marginRight:2,marginTop:2,resize:"none"},Uo=function(e){function t(e){var a,n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(){n.setState({lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:"",unit_price:"",amount:""}],selected_vendor:[],open:!1})},n.state=(a={lineItemsRFQView:[{item_id:"",item_name:"",item_description:"",purpose:"",no_of_items:"",unit_price:"",amount:""}],getAllRequisition:[],rfq_details:[],amount:0,unit_price:0,RFQhead:"",description:"",venderName:"",venderEmail:"",venderAddress:"",location:"",shipByDate:new Date,minshipByDate:new Date,minneedByDate:new Date,total:0,discount:0,cgst_tax:0,sgst_tax:0,igst_tax:0,vendor_list:"",vendor_name:[],vendor_id:[],selected_vendor:[],value:["coconut"],message:"",lastSegment:"",getAllRequisitionValue:[],getAllVendorDetails:[],needByDate:""},Object(y.a)(a,"shipByDate",""),Object(y.a)(a,"req_id",""),Object(y.a)(a,"pur_id",""),Object(y.a)(a,"ven_id",""),Object(y.a)(a,"val_amount",[]),Object(y.a)(a,"open",!1),Object(y.a)(a,"reject_note_vendor",""),Object(y.a)(a,"loading",!1),a),n.handleSubmit=n.handleSubmit.bind(Object(V.a)(n)),n.handleReject=n.handleReject.bind(Object(V.a)(n)),n.proceedReject=n.proceedReject.bind(Object(V.a)(n)),n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleInputChangeValueReject",value:function(e){var t=e?e.target.name:e,a=e?e.target.value:e;console.log(t,":",a),this.setState(Object(y.a)({},t,a)),console.log("Change Calling --- ")}},{key:"fetchRFQDetails",value:function(){var e=this;this.setState({loading:!0},function(){fetch(ne.BASE_URL+"rfq-vendor-po",{method:"post",headers:{"x-access-db":localStorage.getItem("dbname"),"Content-Type":"application/json"},body:JSON.stringify({encrypt:e.state.lastSegment})}).then(function(e){return e.json()}).then(function(t){if(console.log("DATA --- "+JSON.stringify(t)+" --- "+JSON.stringify(t.value)),1==t.value){e.setState({message:t.message,getAllRequisition:t.rfq,getAllRequisitionValue:t.requisition_value,getAllVendorDetails:t.vendor_details,rfq_details:t.rfq,loading:!1}),console.log("res.message --- "+JSON.stringify(t.message)+" --- "+t.message.length),console.log("res.requisition_value.rfq_head --- "+JSON.stringify(t.requisition_value.rfq_head)),e.state.req_id=t.rfqs_id,e.state.pur_id=t.requisition_value._id,e.state.ven_id=t.vendor_details._id,e.state.RFQhead=t.requisition_value.rfq_head,e.state.description=t.requisition_value.rfq_description,e.state.venderName=t.vendor_details.name,e.state.venderEmail=t.vendor_details.email,e.state.venderAddress=t.vendor_details.address,e.state.location=t.requisition_value.ship_to_location,e.state.cgst_tax=t.rfq.cgst_tax,e.state.sgst_tax=t.rfq.sgst_tax,e.state.igst_tax=t.rfq.igst_tax,e.state.discount=t.rfq.Discount,e.state.total=t.rfq.total_price,zl.a.locale("en"),e.state.needByDate=zl()(t.requisition_value.requisition_id.needed_by_date).format("DD/MM/YYYY"),e.state.shipByDate=zl()(t.rfq.price_valid).format("DD/MM/YYYY");for(var a=0;a<e.state.getAllRequisition.po_children.length;a++)console.log("Value Comming --- "+JSON.stringify(e.state.getAllRequisition.po_children)+" --- "+JSON.stringify(e.state.getAllRequisition.po_children[a].item_name.name)),e.state.lineItemsRFQView.push({item_id:e.state.getAllRequisition.po_children[a].item_name._id,item_name:e.state.getAllRequisition.po_children[a].item_name.name,item_description:e.state.getAllRequisition.po_children[a].item_description,purpose:e.state.getAllRequisition.po_children[a].purpose,no_of_items:e.state.getAllRequisition.po_children[a].no_of_items,unit_price:e.state.getAllRequisition.po_children[a].unit_price,amount:e.state.getAllRequisition.po_children[a].amount});e.state.lineItemsRFQView.splice(0,1);e.forceUpdate()}else Po("Something went wrong.")}).catch(function(e){})})}},{key:"componentDidMount",value:function(){var e=window.location.href.split("/");this.state.lastSegment=e.pop()||e.pop(),console.log("lastSegment --- "+this.state.lastSegment),console.log("Child calling ------ "),this.fetchRFQDetails()}},{key:"createUIRFQ",value:function(){if(this.state.lineItemsRFQView.length>0)return this.state.lineItemsRFQView.map(function(e,t){return l.a.createElement("div",{key:t},l.a.createElement("div",{style:Bo},l.a.createElement("div",{style:{border:"2px solid blue",display:"flex",flexWrap:"wrap",padding:"20px"}},l.a.createElement("div",null,l.a.createElement(J.a,{style:Fo,variant:"outlined",margin:"dense",name:"item_name",label:"item_name",value:e.item_name,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Fo,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"no_of_items",label:"No. Of Items",id:"no_of_items",value:e.no_of_items,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Fo,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"unit_price",label:"Price Per Unit (\u20b9)",id:"unit_price",value:e.unit_price,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Fo,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"amount",label:"Amount (\u20b9)",id:"amount",value:parseFloat(e.no_of_items)*parseFloat(e.unit_price),InputProps:{disabled:!0}})))))})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={rfq_id:this.state.req_id};console.log("Values Send --- "+JSON.stringify(t)),w.post("accept-order",t,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?(Po(e.data.message),document.getElementById("btnSub").style.display="none",document.getElementById("btnRej").style.display="none"):Po(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"proceedReject",value:function(e){console.log("Clicked"),this.setState({open:!0}),this.state.open=!0}},{key:"handleReject",value:function(e){e.preventDefault();var t={rfq_id:this.state.req_id,reject_note_vendor:this.state.reject_note_vendor};console.log("Values Send --- "+JSON.stringify(t)),w.post("reject-order",t,{headers:{"x-access-db":localStorage.getItem("dbname")}}).then(function(e){console.log(e.data.value),console.log(e.data.message),1==e.data.value?(Po(e.data.message),document.getElementById("btnSub").style.display="none",document.getElementById("btnRej").style.display="none"):Po(e.data.message)}).catch(function(e){return console.log(e)}),this.handleClose()}},{key:"render",value:function(){var e=this,t=(this.state.loading,this.state.open);return this.state.loading?l.a.createElement("div",{style:{margin:"auto",width:"50%",maxWidth:400,minWidth:150,position:"absolute",top:"50%",left:"50%",fontsize:100}},l.a.createElement("i",{className:"fa fa-cog fa-spin"})):l.a.createElement("div",null,l.a.createElement(L.a,{open:t,onClose:this.handleClose,"aria-labelledby":"form-dialog-title-text"},l.a.createElement(U.a,{id:"form-dialog-title-text"},"Note "),l.a.createElement(M.a,null,l.a.createElement("div",null,l.a.createElement(J.a,{style:Vo,variant:"outlined",margin:"dense",label:"Reject Note",multiline:!0,rows:3,rowsMax:3,name:"reject_note_vendor",value:this.state.reject_note_vendor,onChange:this.handleInputChangeValueReject.bind(this)}))),l.a.createElement(it.a,null,l.a.createElement(Q.a,{onClick:this.handleClose,color:"secondary"},"Cancel"),l.a.createElement(Q.a,{style:{fontWeight:"bold"},onClick:function(t){return e.handleReject(t)},color:"primary"},"Ok"))),!this.state.message.length>0?l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"RFQhead",label:"Head",id:"RFQhead",fullWidth:!0,value:this.state.RFQhead,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"description",label:"Description",id:"description",multiline:!0,rows:5,rowsMax:5,fullWidth:!0,value:this.state.description,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderName",label:"Vender Name",id:"venderName",fullWidth:!0,value:this.state.venderName,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderEmail",label:"Vender Email",id:"venderEmail",fullWidth:!0,value:this.state.venderEmail,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{variant:"outlined",margin:"dense",required:!0,name:"venderAddress",label:"Vender Address",id:"venderAddress",multiline:!0,rows:1,rowsMax:1,fullWidth:!0,value:this.state.venderAddress,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),this.createUIRFQ(),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(J.a,{style:Lo,variant:"outlined",margin:"dense",required:!0,name:"location",label:"Ship To Location",id:"location",value:this.state.location,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Lo,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"cgst_tax",label:"CGST (%)",id:"cgst_tax",value:this.state.cgst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Lo,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"sgst_tax",label:"SGST (%)",id:"sgst_tax",value:this.state.sgst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Lo,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"igst_tax",label:"IGST (%)",id:"igst_tax",value:this.state.igst_tax,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Lo,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"discount",label:"Discount (%)",id:"discount",value:this.state.discount,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Lo,variant:"outlined",margin:"dense",required:!0,type:"tel",name:"total",label:"Total Amount (\u20b9)",id:"total",value:this.state.total,InputProps:{disabled:!0}})),l.a.createElement("div",null,l.a.createElement(J.a,{style:Fo,variant:"outlined",margin:"dense",required:!0,name:"needByDate",label:"Need By Date",id:"needByDate",value:this.state.needByDate,InputProps:{disabled:!0}}),l.a.createElement(J.a,{style:Fo,variant:"outlined",margin:"dense",required:!0,name:"shipByDate",label:"Ship By Date",id:"shipByDate",value:this.state.shipByDate,InputProps:{disabled:!0}})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement(Q.a,{style:{marginLeft:"150px",marginRight:"50px"},id:"btnSub",type:"submit",variant:"contained",color:"primary",onClick:this.handleSubmit},"Accept"),"\xa0\xa0\xa0",l.a.createElement(Q.a,{id:"btnRej",variant:"contained",color:"secondary",onClick:this.proceedReject},"Reject"))):l.a.createElement("h1",null,this.state.message))}}]),t}(n.Component),Mo=Object(m.b)(function(e){return{auth:e.auth,errors:e.errors}})(Uo);if(localStorage.jwtToken){O(localStorage.jwtToken);var To=k()(localStorage.jwtToken);C.dispatch(F(To))}var Wo=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(sn.a,null,l.a.createElement(m.a,{store:C},l.a.createElement("div",null,l.a.createElement(on.a,{exact:!0,path:"/",component:ln}),l.a.createElement(on.a,{path:"/rfq-submit",component:ts}),l.a.createElement(on.a,{path:"/approve-po",component:Mo}),l.a.createElement(on.a,{path:"/dashboard",component:No}),l.a.createElement(on.a,{path:"/ticket-history",component:ln}),l.a.createElement(on.a,{path:"/login/superadmin",component:tn}),l.a.createElement(on.a,{exact:!0,path:"/superadmin/dashboard",component:Za}))))}}]),t}(n.Component),Qo=a(323);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Jo={position:D.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:D.c.SCALE};s.a.render(l.a.createElement(function(){return l.a.createElement(D.a,Object.assign({template:Qo.a},Jo),l.a.createElement(Wo,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[349,1,2]]]);
//# sourceMappingURL=main.07dbbae5.chunk.js.map